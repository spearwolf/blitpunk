/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.l = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };

/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};

/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};

/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 4);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _eventize = __webpack_require__(1);\n\nvar _eventize2 = _interopRequireDefault(_eventize);\n\nvar _generate_uuid = __webpack_require__(3);\n\nvar _generate_uuid2 = _interopRequireDefault(_generate_uuid);\n\nvar _constants = __webpack_require__(2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Common interface used by all scene graph nodes.\n */\nclass SGNode {\n\n    constructor({ nodeType, name, parentNode, priority } = {}) {\n\n        (0, _eventize2.default)(this);\n\n        /**\n         * @type {number}\n         */\n        this.nodeType = nodeType || _constants.SG_NODE_TYPE;\n\n        /**\n         * @type {string}\n         */\n        this.name = name || (0, _generate_uuid2.default)();\n\n        /**\n         * @type {SGNode}\n         */\n        this.parentNode = parentNode || null;\n\n        /**\n         * @private\n         */\n        this._priority = priority || _constants.DEFAULT_PRIORITY;\n\n        /**\n         * @type {SGNode[]}\n         */\n        this.childNodes = [];\n\n        /**\n         * @private\n         */\n        this.shouldSortChildNodes = false;\n\n        if (this.parentNode) {\n            this.parentNode.appendChild(this);\n        }\n    }\n\n    /**\n     * @type {number}\n     */\n    get priority() {\n        return this._priority;\n    }\n\n    /**\n     * @param {number} priority\n     */\n    set priority(priority) {\n        if (priority !== this._priority) {\n            this._priority = priority;\n            const { parentNode } = this;\n            if (parentNode != null) {\n                parentNode.shouldSortChildNodes = true;\n            }\n        }\n    }\n\n    /**\n     * @type {boolean}\n     */\n    get isRootNode() {\n        return !this.parentNode;\n    }\n\n    /**\n     * @type {SGNode}\n     */\n    get rootNode() {\n        return this.parentNode && this.parentNode.rootNode || this;\n    }\n\n    /**\n     * @param {number} nodeType\n     * @return {SGNode}\n     */\n    getRootNodeByType(nodeType) {\n        if (nodeType === this.nodeType) {\n            return this;\n        } else {\n            return this.parentNode && this.parentNode.getRootNodeByType(nodeType);\n        }\n    }\n\n    /**\n     * @type {boolean}\n     */\n    get hasChildNodes() {\n        return this.childNodes.length > 0;\n    }\n\n    sortChildNodesByPriority() {\n        this.childNodes.sort((a, b) => a.priority < b.priority);\n    }\n\n    reSortChildNodesByPriority() {\n        if (this.shouldSortChildNodes) {\n            this.sortChildNodesByPriority();\n            this.shouldSortChildNodes = false;\n        }\n    }\n\n    containsChild(node) {\n        const len = this.childNodes.length;\n        for (let i = 0; i < len; i++) {\n            if (this.childNodes[i] === node) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    appendChild(node) {\n        if (node && !this.containsChild(node)) {\n            this.childNodes.push(node);\n            this.shouldSortChildNodes = true;\n        }\n        return this;\n    }\n\n    forEachChild(callback, context) {\n        this.reSortChildNodesByPriority();\n        this.childNodes.forEach(node => callback.call(context, node));\n        return this;\n    }\n\n    /*\n     * Depth-first traversal.\n     * @param {function} [callbackBefore]\n     * @param {function} [callbackAfter]\n     * @param {function|function[]} [filterFunc]\n     */\n    traverse(callbackBefore, callbackAfter, filterFunc) {\n        if (Array.isArray(filterFunc)) {\n            for (let filter of filterFunc) {\n                if (!filter(this)) {\n                    return;\n                }\n            }\n        } else if (filterFunc && !filterFunc(this)) {\n            return;\n        }\n        if (callbackBefore) {\n            callbackBefore(this);\n        }\n        this.forEachChild(node => node.traverse(callbackBefore, callbackAfter, filterFunc));\n        if (callbackAfter) {\n            callbackAfter(this);\n        }\n    }\n\n    /**\n     * Find *first* node with given name.\n     * Further nodes with same name will be ignored.\n     * @param {string}Â name\n     * @returns {SGNode|undefined}\n     */\n    findByName(name) {\n        if (this.name === name) {\n            return this;\n        }\n        this.reSortChildNodesByPriority();\n        const len = this.childNodes.length;\n        for (let i = 0; i < len; ++i) {\n            let node = this.childNodes[i].findByName(name);\n            if (node) {\n                return node;\n            }\n        }\n    }\n\n}\nexports.default = SGNode;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NlbmVfZ3JhcGgvc19nX25vZGUuanM/MGRkYSJdLCJuYW1lcyI6WyJTR05vZGUiLCJjb25zdHJ1Y3RvciIsIm5vZGVUeXBlIiwibmFtZSIsInBhcmVudE5vZGUiLCJwcmlvcml0eSIsIl9wcmlvcml0eSIsImNoaWxkTm9kZXMiLCJzaG91bGRTb3J0Q2hpbGROb2RlcyIsImFwcGVuZENoaWxkIiwiaXNSb290Tm9kZSIsInJvb3ROb2RlIiwiZ2V0Um9vdE5vZGVCeVR5cGUiLCJoYXNDaGlsZE5vZGVzIiwibGVuZ3RoIiwic29ydENoaWxkTm9kZXNCeVByaW9yaXR5Iiwic29ydCIsImEiLCJiIiwicmVTb3J0Q2hpbGROb2Rlc0J5UHJpb3JpdHkiLCJjb250YWluc0NoaWxkIiwibm9kZSIsImxlbiIsImkiLCJwdXNoIiwiZm9yRWFjaENoaWxkIiwiY2FsbGJhY2siLCJjb250ZXh0IiwiZm9yRWFjaCIsImNhbGwiLCJ0cmF2ZXJzZSIsImNhbGxiYWNrQmVmb3JlIiwiY2FsbGJhY2tBZnRlciIsImZpbHRlckZ1bmMiLCJBcnJheSIsImlzQXJyYXkiLCJmaWx0ZXIiLCJmaW5kQnlOYW1lIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFFQTs7O0FBR2UsTUFBTUEsTUFBTixDQUFhOztBQUV4QkMsZ0JBQWEsRUFBRUMsUUFBRixFQUFZQyxJQUFaLEVBQWtCQyxVQUFsQixFQUE4QkMsUUFBOUIsS0FBMkMsRUFBeEQsRUFBNEQ7O0FBRXhELGdDQUFTLElBQVQ7O0FBRUE7OztBQUdBLGFBQUtILFFBQUwsR0FBZ0JBLG1DQUFoQjs7QUFFQTs7O0FBR0EsYUFBS0MsSUFBTCxHQUFZQSxRQUFRLDhCQUFwQjs7QUFFQTs7O0FBR0EsYUFBS0MsVUFBTCxHQUFrQkEsY0FBYyxJQUFoQzs7QUFFQTs7O0FBR0EsYUFBS0UsU0FBTCxHQUFpQkQsdUNBQWpCOztBQUVBOzs7QUFHQSxhQUFLRSxVQUFMLEdBQWtCLEVB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O0FBQ0g7QUFDSjtBQUNKLFNBTkQsTUFNTyxJQUFJSCxjQUFjLENBQUNBLFdBQVcsSUFBWCxDQUFuQixFQUFxQztBQUN4QztBQUNIO0FBQ0QsWUFBSUYsY0FBSixFQUFvQjtBQUNoQkEsMkJBQWUsSUFBZjtBQUNIO0FBQ0QsYUFBS04sWUFBTCxDQUFrQkosUUFBUUEsS0FBS1MsUUFBTCxDQUFjQyxjQUFkLEVBQThCQyxhQUE5QixFQUE2Q0MsVUFBN0MsQ0FBMUI7QUFDQSxZQUFJRCxhQUFKLEVBQW1CO0FBQ2ZBLDBCQUFjLElBQWQ7QUFDSDtBQUNKOztBQUVEOzs7Ozs7QUFNQUssZUFBWWxDLElBQVosRUFBa0I7QUFDZCxZQUFJLEtBQUtBLElBQUwsS0FBY0EsSUFBbEIsRUFBd0I7QUFDcEIsbUJBQU8sSUFBUDtBQUNIO0FBQ0QsYUFBS2dCLDBCQUFMO0FBQ0EsY0FBTUcsTUFBTSxLQUFLZixVQUFMLENBQWdCTyxNQUE1QjtBQUNBLGFBQUssSUFBSVMsSUFBSSxDQUFiLEVBQWdCQSxJQUFJRCxHQUFwQixFQUF5QixFQUFFQyxDQUEzQixFQUE4QjtBQUMxQixnQkFBSUYsT0FBTyxLQUFLZCxVQUFMLENBQWdCZ0IsQ0FBaEIsRUFBbUJjLFVBQW5CLENBQThCbEMsSUFBOUIsQ0FBWDtBQUNBLGdCQUFJa0IsSUFBSixFQUFVO0FBQ04sdUJBQU9BLElBQVA7QUFDSDtBQUNKO0FBQ0o7O0FBN0t1QjtrQkFBUHJCLE0iLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBldmVudGl6ZSBmcm9tICdAc3BlYXJ3b2xmL2V2ZW50aXplJztcblxuaW1wb3J0IGdlbmVyYXRlVVVJRCBmcm9tICcuLi91dGlscy9nZW5lcmF0ZV91dWlkJztcbmltcG9ydCB7IFNHX05PREVfVFlQRSwgREVGQVVMVF9QUklPUklUWSB9IGZyb20gJy4vY29uc3RhbnRzJztcblxuLyoqXG4gKiBDb21tb24gaW50ZXJmYWNlIHVzZWQgYnkgYWxsIHNjZW5lIGdyYXBoIG5vZGVzLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTR05vZGUge1xuXG4gICAgY29uc3RydWN0b3IgKHsgbm9kZVR5cGUsIG5hbWUsIHBhcmVudE5vZGUsIHByaW9yaXR5IH0gPSB7fSkge1xuXG4gICAgICAgIGV2ZW50aXplKHRoaXMpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ub2RlVHlwZSA9IG5vZGVUeXBlIHx8IFNHX05PREVfVFlQRTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWUgfHwgZ2VuZXJhdGVVVUlEKCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtTR05vZGV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBhcmVudE5vZGUgPSBwYXJlbnROb2RlIHx8wqBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fcHJpb3JpdHkgPSBwcmlvcml0eSB8fCBERUZBVUxUX1BSSU9SSVRZO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7U0dOb2RlW119XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNoaWxkTm9kZXMgPSBbXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2hvdWxkU29ydENoaWxkTm9kZXMgPSBmYWxzZTtcblxuICAgICAgICBpZiAodGhpcy5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcyk7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IHByaW9yaXR5ICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ByaW9yaXR5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwcmlvcml0eVxuICAgICAqL1xuICAgIHNldCBwcmlvcml0eSAocHJpb3JpdHkpIHtcbiAgICAgICAgaWYgKHByaW9yaXR5ICE9PSB0aGlzLl9wcmlvcml0eSkge1xuICAgICAgICAgICAgdGhpcy5fcHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICAgICAgICAgIGNvbnN0IHvCoHBhcmVudE5vZGUgfSA9IHRoaXM7XG4gICAgICAgICAgICBpZiAocGFyZW50Tm9kZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50Tm9kZS5zaG91bGRTb3J0Q2hpbGROb2RlcyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXQgaXNSb290Tm9kZSAoKSB7XG4gICAgICAgIHJldHVybiAhIHRoaXMucGFyZW50Tm9kZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7U0dOb2RlfVxuICAgICAqL1xuICAgIGdldCByb290Tm9kZSAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudE5vZGUgJiYgdGhpcy5wYXJlbnROb2RlLnJvb3ROb2RlIHx8IHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG5vZGVUeXBlXG4gICAgICogQHJldHVybiB7U0dOb2RlfVxuICAgICAqL1xuICAgIGdldFJvb3ROb2RlQnlUeXBlIChub2RlVHlwZSkge1xuICAgICAgICBpZiAobm9kZVR5cGUgPT09IHRoaXMubm9kZVR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50Tm9kZSAmJiB0aGlzLnBhcmVudE5vZGUuZ2V0Um9vdE5vZGVCeVR5cGUobm9kZVR5cGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgZ2V0IGhhc0NoaWxkTm9kZXMgKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZE5vZGVzLmxlbmd0aCA+IDA7XG4gICAgfVxuXG4gICAgc29ydENoaWxkTm9kZXNCeVByaW9yaXR5ICgpIHtcbiAgICAgICAgdGhpcy5jaGlsZE5vZGVzLnNvcnQoKGEsIGIpID0+IGEucHJpb3JpdHkgPCBiLnByaW9yaXR5KTtcbiAgICB9XG5cbiAgICByZVNvcnRDaGlsZE5vZGVzQnlQcmlvcml0eSAoKSB7XG4gICAgICAgIGlmICh0aGlzLnNob3VsZFNvcnRDaGlsZE5vZGVzKSB7XG4gICAgICAgICAgICB0aGlzLnNvcnRDaGlsZE5vZGVzQnlQcmlvcml0eSgpO1xuICAgICAgICAgICAgdGhpcy5zaG91bGRTb3J0Q2hpbGROb2RlcyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29udGFpbnNDaGlsZCAobm9kZSkge1xuICAgICAgICBjb25zdCBsZW4gPSB0aGlzLmNoaWxkTm9kZXMubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jaGlsZE5vZGVzW2ldID09PSBub2RlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGFwcGVuZENoaWxkIChub2RlKSB7XG4gICAgICAgIGlmIChub2RlICYmICF0aGlzLmNvbnRhaW5zQ2hpbGQobm9kZSkpIHtcbiAgICAgICAgICAgIHRoaXMuY2hpbGROb2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgdGhpcy5zaG91bGRTb3J0Q2hpbGROb2RlcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgZm9yRWFjaENoaWxkIChjYWxsYmFjaywgY29udGV4dCkge1xuICAgICAgICB0aGlzLnJlU29ydENoaWxkTm9kZXNCeVByaW9yaXR5KCk7XG4gICAgICAgIHRoaXMuY2hpbGROb2Rlcy5mb3JFYWNoKG5vZGUgPT4gY2FsbGJhY2suY2FsbChjb250ZXh0LCBub2RlKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogRGVwdGgtZmlyc3QgdHJhdmVyc2FsLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IFtjYWxsYmFja0JlZm9yZV1cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbY2FsbGJhY2tBZnRlcl1cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufGZ1bmN0aW9uW119IFtmaWx0ZXJGdW5jXVxuICAgICAqL1xuICAgIHRyYXZlcnNlIChjYWxsYmFja0JlZm9yZSwgY2FsbGJhY2tBZnRlciwgZmlsdGVyRnVuYykge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShmaWx0ZXJGdW5jKSkge1xuICAgICAgICAgICAgZm9yIChsZXQgZmlsdGVyIG9mIGZpbHRlckZ1bmMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWZpbHRlcih0aGlzKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGZpbHRlckZ1bmMgJiYgIWZpbHRlckZ1bmModGhpcykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FsbGJhY2tCZWZvcmUpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrQmVmb3JlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZm9yRWFjaENoaWxkKG5vZGUgPT4gbm9kZS50cmF2ZXJzZShjYWxsYmFja0JlZm9yZSwgY2FsbGJhY2tBZnRlciwgZmlsdGVyRnVuYykpO1xuICAgICAgICBpZiAoY2FsbGJhY2tBZnRlcikge1xuICAgICAgICAgICAgY2FsbGJhY2tBZnRlcih0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpbmQgKmZpcnN0KiBub2RlIHdpdGggZ2l2ZW4gbmFtZS5cbiAgICAgKiBGdXJ0aGVyIG5vZGVzIHdpdGggc2FtZSBuYW1lIHdpbGwgYmUgaWdub3JlZC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ33CoG5hbWVcbiAgICAgKiBAcmV0dXJucyB7U0dOb2RlfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICBmaW5kQnlOYW1lIChuYW1lKSB7XG4gICAgICAgIGlmICh0aGlzLm5hbWUgPT09IG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVTb3J0Q2hpbGROb2Rlc0J5UHJpb3JpdHkoKTtcbiAgICAgICAgY29uc3QgbGVuID0gdGhpcy5jaGlsZE5vZGVzLmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgbGV0IG5vZGUgPSB0aGlzLmNoaWxkTm9kZXNbaV0uZmluZEJ5TmFtZShuYW1lKTtcbiAgICAgICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbn1cblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3NjZW5lX2dyYXBoL3NfZ19ub2RlLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar hasMap = canUseMap();\nvar hasSymbol = canUseSymbol();\nvar hasConsole = typeof console !== 'undefined';\n\nvar PROP_NAMESPACE  = !hasSymbol ? '@@eventize' : (function () {\n    if (!Symbol.eventize) {\n        Symbol.eventize = Symbol('eventize');\n    }\n    return Symbol.eventize;\n})();\n\nvar CATCH_ALL_EVENT = '*';\nvar LOG_NAMESPACE   = '[eventize.js]';\n\n// =====================================================================\n//\n// eventize( object )\n//\n// =====================================================================\n\nfunction eventize (o) {\n\n    if (o[PROP_NAMESPACE]) return o;\n\n    var _e = {\n        lastCallbackId : 0,\n        callbacks      : {},\n        boundObjects   : []\n    };\n\n    _e.callbacks[CATCH_ALL_EVENT] = [];\n\n    var _ePublic = definePublicPropertiesRO({}, {\n        silenced : false,\n        off      : []\n    });\n\n    defineHiddenPropertyRO(o, PROP_NAMESPACE, _ePublic);\n\n    if (eventize.PRIO_DEFAULT === undefined) {\n\n        definePublicPropertiesRO(eventize, {\n            PRIO_MAX     : Number.POSITIVE_INFINITY,\n            PRIO_A       : 1000000000,\n            PRIO_B       : 10000000,\n            PRIO_C       : 100000,\n            PRIO_DEFAULT : 0,\n            PRIO_LOW     : -100000,\n            PRIO_MIN     : Number.NEGATIVE_INFINITY\n        });\n\n    }\n\n    // -----------------------------------------------------------------\n    //\n    // object.on( eventName, [ prio, ] callbackFunc )\n    // object.on( eventName, [ prio, ] obj )\n    //\n    // object.on( callbackFunc )    => object.on( '*', callbackFunc )\n    // object.on( obj )             => object.on( '*', obj )\n    //\n    // object.on( eventName )\n    // object.on()\n    //\n    // -----------------------------------------------------------------\n\n    o.on = function (eventName, prio, fn) {  // --- {{{\n\n        var argsLen = arguments.length;\n\n        if (argsLen === 0) {\n            if (_ePublic.silenced) {\n                definePublicPropertyRO(_ePublic, 'silenced', false);\n                _ePublic.off.length = 0;\n            }\n            return;\n        }\n\n        var i;\n\n        if (argsLen === 1) {\n            if (typeof eventName === 'string') {\n\n                i = _ePublic.off.indexOf(eventName);\n                if (i >= 0) {\n                    _ePublic.off.splice(i, 1);\n                }\n                return;\n\n            } else if (typeof eventName === 'object' || typeof eventName === 'function') {\n\n                // alias for: on('*', listener)\n\n                fn = eventName;\n                eventName = CATCH_ALL_EVENT;\n                prio = eventize.PRIO_DEFAULT;\n\n            } else {\n                if (hasConsole) {\n                    console.warn(LOG_NAMESPACE, '.on() called with insufficient arguments!', arguments);\n                }\n                return;\n            }\n        }\n\n        if (argsLen === 2) {\n            fn = prio;\n            prio = eventize.PRIO_DEFAULT;\n        }\n\n        var eventizeCallbacks = _e.callbacks;\n        var eventListener = eventizeCallbacks[eventName] || (eventizeCallbacks[eventName] = []);\n        var listenerId = createId();\n        var listener = definePublicPropertiesRO({}, {\n            id         : listenerId,\n            fn         : fn,\n            prio       : (typeof prio !== 'number' ? eventize.PRIO_DEFAULT : prio),\n            isFunction : (typeof fn === 'function'),\n        });\n\n        eventListener.push(listener);\n        eventListener.sort(sortListenerByPrio);\n\n        return listenerId;\n\n    };\n\n    function createId () {\n        return ++_e.lastCallbackId;\n    }\n\n    function sortListenerByPrio (a, b) {\n        return a.prio !== b.prio ? b.prio - a.prio : a.id - b.id;\n    }\n\n    // --- on }}}\n\n    // ----------------------------------------------------------------------\n    //\n    // object.once( eventName, [ prio, ] callbackFunc )\n    // object.once( eventName, [ prio, ] obj )\n    //\n    // object.once( callbackFunc )      => object.once( '*', callbackFunc )\n    // object.once( obj )               => object.once( '*', obj )\n    //\n    // ----------------------------------------------------------------------\n\n    o.once = function (eventName, prio, fn) {  // --- {{{\n\n        var argsLen = arguments.length;\n\n        if (!argsLen || argsLen > 3) {\n            if (hasConsole) {\n                console.warn(LOG_NAMESPACE, '.once() called with insufficient arguments!', arguments);\n            }\n            return;\n        }\n\n        if (argsLen === 1) {\n\n            fn = eventName;\n            eventName = CATCH_ALL_EVENT;\n            prio = eventize.PRIO_DEFAULT;\n\n        } else if (argsLen === 2) {\n\n            fn = prio;\n            prio = eventize.PRIO_DEFAULT;\n\n        }\n\n        var id = o.on(eventName, prio, function () {\n            var res = fn.apply(this, arguments);\n            o.off(id);\n            return res;\n        });\n\n        return id;\n\n    };\n\n    // --- once }}}\n\n    // -----------------------------------------------------------------\n    //\n    // object.off( id )\n    // object.off( callback )\n    // object.off( obj )\n    // object.off( eventName )\n    // object.off()\n    //\n    // deactive listener by id or previously bound object or\n    // function reference or event name or silence all events\n    //\n    // -----------------------------------------------------------------\n\n    o.off = function (id) {  // -- {{{\n\n        if (arguments.length === 0) {\n            if (!_ePublic.silenced) {\n                definePublicPropertyRO(_ePublic, 'silenced', true);\n                _ePublic.off.length = 0;\n            }\n            return;\n        }\n\n        if (typeof id === 'string') {\n            //\n            // by event name\n            //\n            if (_ePublic.off.indexOf(id) === -1) {\n                _ePublic.off.push(id);\n            }\n            return;\n        }\n\n        var eventizeCallbacks = _e.callbacks;\n        var cb, i, j, _callbacks, keys;\n        var isObject = typeof id === 'object';\n\n        if (typeof id === 'number' || typeof id === 'function' || isObject) {\n            //\n            // by id or function reference\n            //\n            keys = Object.keys(eventizeCallbacks);\n            for (j = 0; j < keys.length; j++) {\n                _callbacks = eventizeCallbacks[keys[j]];\n                for (i = 0; i < _callbacks.length; i++) {\n                    cb = _callbacks[i];\n                    if (cb.id === id || cb.fn === id) {\n                        _callbacks.splice(i, 1);\n                        if (!isObject) return;\n                    }\n                }\n            }\n        }\n\n        if (isObject) {\n            //\n            // by bound object reference\n            //\n            i = _e.boundObjects.indexOf(id);\n            if ( i >= 0 ) {\n                _e.boundObjects.splice(i, 1);\n            }\n        }\n\n    };\n\n    // --- off }}}\n\n    // -----------------------------------------------------------------\n    //\n    // object.connect( obj )\n    // object.connect( obj, mapping )\n    //\n    // Example:\n    //\n    //   object.connect(options, {\n    //        onProjectionUpdated : [100, 'projectionUpdated'],\n    //        onFrame             : 'frame',\n    //        onFrameEnd          : 'frameEnd'\n    //   })\n    //\n    // -----------------------------------------------------------------\n\n    o.connect = function (obj, mapping) {  // --- {{{\n        var argsLen = arguments.length;\n        if (argsLen === 1) {\n            return _bindObject(obj);\n        } else if (argsLen === 2) {\n            return _connectWithMapping(this, obj, mapping);\n        } else {\n            if (hasConsole) {\n                console.warn(LOG_NAMESPACE, '.connect() called with insufficient arguments!', arguments);\n            }\n        }\n    };\n\n    function _bindObject (obj) {\n\n        // TODO connect(obj) should ..\n        // - support priority\n        // - support filters? (via only, except options)\n        // - support senderContextArgument?: 'prepend'|'append'|false\n\n        if (!obj) return;\n        var i = _e.boundObjects.indexOf(obj);\n        if (i === -1) {\n            _e.boundObjects.push(obj);\n        }\n        return obj;\n\n    }\n\n    function _connectWithMapping (obj, options, listenerMap) {\n\n        var eventName, listenName, listenFunc, prio;\n\n        for (listenName in listenerMap) {\n            if (listenerMap.hasOwnProperty(listenName)) {\n                listenFunc = options[listenName];\n                if (typeof listenFunc === 'function') {\n                    eventName = listenerMap[listenName];\n                    if (Array.isArray(eventName)) {\n                        prio = eventName[0];\n                        eventName = eventName[1];\n                    } else {\n                        prio = eventize.PRIO_DEFAULT;\n                    }\n                    obj.on(eventName, prio, listenFunc);\n                }\n            }\n        }\n\n        return obj;\n\n    }\n\n    // --- connect }}}\n\n    // -----------------------------------------------------------------\n    //\n    // object.emit( eventName [, arguments .. ] )\n    //\n    // -----------------------------------------------------------------\n\n    o.emit = function () {  // --- {{{\n\n        // https://github.com/petkaantonov/bluebird/wiki/Optimization-killers#3-managing-arguments\n        var args = new Array(arguments.length);\n        for (var i = 0; i < args.length; ++i) {\n            args[i] = arguments[i];\n        }\n\n        var eventName;\n        var senderCtx = this;\n        var rootCtx;\n        var argsCtx;\n\n        if (args.length > 1 && typeof args[0] !== 'string' && typeof args[1] === 'string') {\n            rootCtx = args.shift();\n            eventName = args.shift();\n            args[args.length - 1] = rootCtx;\n            argsCtx = args;\n        } else {\n            eventName = args.shift();  // throw out eventName\n            argsCtx = args.concat([senderCtx]);\n        }\n\n        _dispatch(eventName, function (listener) {\n\n            if (listener.isFunction) {\n                listener.fn.apply(senderCtx, args);\n            } else {\n                var fn = listener.fn[eventName];\n                if (typeof fn === 'function') {\n                    fn.apply(listener.fn, argsCtx);\n                } else if (listener.fn[PROP_NAMESPACE]) {\n                    listener.fn.emit.apply(listener.fn, [eventName].concat(args));\n                }\n            }\n\n        }, function (fn, boundObj) {\n\n            if (fn) {\n                fn.apply(boundObj, argsCtx);\n            } else {\n                boundObj.emit.apply(boundObj, [senderCtx, eventName].concat(argsCtx));\n            }\n\n        });\n\n    }\n\n    function _dispatch (eventName, emitListener, emitBoundObject) {\n\n        if (_ePublic.silenced) return;\n        if (_ePublic.off.indexOf(eventName) >= 0) return;\n\n        var listeners              = _e.callbacks[eventName];\n        var catchAllListeners      = _e.callbacks[CATCH_ALL_EVENT];\n        var boundObjsCount         = _e.boundObjects.length;\n        var hasBoundObjectsEmitted = false;\n\n        function _emitBoundObjects () {\n            var j, bo, fn;\n            if (boundObjsCount) {\n                for (j = 0; j < boundObjsCount; j++) {\n                    bo = _e.boundObjects[j];\n                    fn = bo[eventName];\n                    if (typeof fn === 'function') {\n                        emitBoundObject(fn, bo);\n                    } else if (bo[PROP_NAMESPACE]) {\n                        emitBoundObject(null, bo);\n                    }\n                }\n            }\n        }\n\n        var i, len, listen;\n\n        if (listeners || catchAllListeners.length) {\n\n            listeners = listeners ? listeners.concat(catchAllListeners) : catchAllListeners;\n            len = listeners.length;\n\n            for (i = 0; i < len; i++) {\n                listen = listeners[i];\n                if (!hasBoundObjectsEmitted && listen && listen.prio < eventize.PRIO_DEFAULT) {\n                    _emitBoundObjects();\n                    hasBoundObjectsEmitted = true;\n                }\n                emitListener(listen);\n            }\n        }\n\n        if (!hasBoundObjectsEmitted) _emitBoundObjects();\n\n    }\n\n    // --- emit }}}\n\n    // --------------------------------------------------------------------\n    //\n    // object.emitReduce( eventName [, value= {} ] [, arguments .. ] )\n    //\n    // --------------------------------------------------------------------\n\n    o.emitReduce = function () {  // --- {{{\n\n        var args = new Array(arguments.length);\n        for (var i = 0; i < args.length; ++i) {\n            args[i] = arguments[i];\n        }\n\n        var eventName = args.shift();\n        var value;\n\n        function setValue (val) {\n            if (val !== undefined) {\n                value = val;\n            }\n        }\n\n        if (args.length === 0) {\n            value = {};\n            args.push(value);\n        } else {\n            setValue(args[0]);\n        }\n\n        var ctx = this;\n        var argsWithEventName = [eventName].concat(args);\n        var argsCtx = args.concat([ctx]);\n\n        _dispatch(eventName, function (listener) {\n\n            if (listener.isFunction) {\n                args[0] = value;\n                setValue(listener.fn.apply(ctx, args));\n            } else {\n                var fn = listener.fn[eventName];\n                if (typeof fn === 'function') {\n                    argsCtx[0] = value;\n                    setValue(fn.apply(listener.fn, argsCtx));\n                } else if (listener.fn[PROP_NAMESPACE]) {\n                    argsWithEventName[1] = value;\n                    setValue(listener.fn.emitReduce.apply(listener.fn, argsWithEventName));\n                }\n            }\n\n        }, function (fn, boundObj) {\n\n            if (fn) {\n                argsCtx[0] = value;\n                setValue(fn.apply(boundObj, argsCtx));\n            }\n\n        });\n\n        return value;\n\n    };\n\n    // --- emit }}}\n\n    // --------------------------------------------------------------------\n    //\n    // object.from( eventName, Observable )\n    //\n    // See https://github.com/tc39/proposal-observable\n    //\n    // Example:\n    //\n    //      object\n    //          .from('foo', Rx.Observable)\n    //          .filter(x => x % 2 === 0)\n    //          .subscribe(x => console.log(x));\n    //\n    //\n    // --------------------------------------------------------------------\n\n    o.from = function (eventName, observable) {  // --- {{{\n        var self = this;\n        return new observable(function (observer) {\n\n            var id = self.on(eventName, function (data) {\n                observer.next(data);\n            });\n\n            return function () {\n                self.off(id);\n            };\n\n        });\n    };\n\n    // --- from }}}\n\n    // --------------------------------------------------------------------\n    //\n    // object.subscribe( Observable, onNext[, onError][, onComplete] )\n    //\n    // Example:\n    //\n    //      object.subscribe(a, 'value', 'error');   // a => Observable\n    //\n    // --------------------------------------------------------------------\n\n    o.subscribe = function (source, onNext, onError, onComplete) {  // --- {{{\n        var self = this;\n        return source.subscribe(function (value) {\n            self.emit(onNext, value);\n        }, onError ? function (errorValue) {\n            self.emit(onError, errorValue);\n        } : undefined, onComplete ? function (completeValue) {\n            self.emit(onComplete, completeValue);\n        } : undefined);\n    };\n\n    // --- subscribe }}}\n\n    return o;\n\n} // <= eventize()\n\n\neventize.is = function (obj) {\n    return !!( obj && obj[PROP_NAMESPACE] );\n};\n\n\ndefineHiddenPropertyRO( eventize,\n    'EventizeNamespace', PROP_NAMESPACE);\n\n\n// ==========================================================================\n//\n// eventize.queue([ queueId ][, options]) : queue\n//\n// options are:\n//    - replace: true|false  - replace previous events with same name\n//                             when queue is in collection mode\n//\n// queue.play()              - activate play (immediately emit) mode\n// queue.collect()           - activate collection (store all events) mode\n// queue.toggle()            - toggle state\n// queue.state               - 'play'|'collect'\n//\n// ==========================================================================\n\ndefineHiddenPropertyRO(eventize, 'queues', hasMap ? new Map : {});\n\neventize.queue = function (id/*, options */) {\n\n    var queue, options;\n    var len = arguments.length;\n\n    if (len >= 1) {\n        if (typeof id !== 'object' || len === 2) {\n            queue = hasMap ? eventize.queues.get(id) : eventize.queues[id];\n        }\n        if (len === 2) {\n            options = arguments[1];\n        } else if (len === 1 && typeof id === 'object') {\n            options = id;\n        }\n    }\n\n    if (!queue) {\n        queue = createQueue(id, options);\n        if (hasMap) {\n            eventize.queues.set(queue.id, queue);\n        } else {\n            eventize.queues[queue.id] = queue;\n        }\n    }\n\n    return queue;\n\n};\n\n\nvar STATE = 'state';\nvar PLAY = 'play';\nvar COLLECT = 'collect';\n\nfunction createQueue (id, options) {\n\n    var queueId = ((typeof id === 'string' || typeof id === 'symbol') && id) || createUuid();\n    var queue = eventize({});\n    var isReplace = !!(options && options.replace);\n\n    var setState = function (state) {\n        definePublicPropertyRO(queue, STATE, state);\n    };\n\n    var emit = (function (_emit) {\n            return function (args) {\n            _emit.apply(queue, args);\n        };\n    })(queue.emit);\n\n    defineHiddenPropertyRO(queue, 'events', []);\n    definePublicPropertyRO(queue, 'id', queueId);\n\n    queue.collect = function () {\n        if (queue[STATE] !== COLLECT) {\n            setState(COLLECT);\n        }\n        return queue;\n    };\n\n    queue.emit = function () {\n        var args = new Array(arguments.length);\n        var i;\n        for (i = 0; i < args.length; ++i) {\n            args[i] = arguments[i];\n        }\n        if (queue[STATE] === PLAY) {\n            emit(args);\n        } else {  // COLLECT\n            if (isReplace) {\n                var len, eventName = args[0];\n                for (i = 0, len = queue.events.length; i < len; i++) {\n                    if (queue.events[i][0] === eventName) {\n                        queue.events[i] = args;\n                        return;\n                    }\n                }\n            }\n            queue.events.push(args);\n        }\n    };\n\n    queue.play = function () {\n        if (queue[STATE] !== PLAY) {\n            setState(PLAY);\n            queue.events.forEach(emit);\n            queue.events.length = 0;\n        }\n        return queue;\n    };\n\n    queue.toggle = function () {\n        return queue[STATE] !== PLAY ? queue.play() : queue.collect();\n    };\n\n    return queue.play();\n\n}\n\n\n// =====================================================================\n//\n// helper functions\n//\n// =====================================================================\n\n\nfunction createUuid () {\n    // http://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\n    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\n        return v.toString(16);\n    });\n    return hasSymbol ? Symbol(uuid) : uuid;\n}\n\nfunction canUseSymbol () {\n    return typeof Symbol !== 'undefined';\n}\n\nfunction canUseMap () {\n    return typeof Map !== 'undefined';\n}\n\nfunction definePublicPropertyRO (obj, name, value) {\n    Object.defineProperty(obj, name, {\n        value        : value,\n        configurable : true,\n        enumerable   : true\n    });\n    return obj;\n}\n\nfunction definePublicPropertiesRO (obj, attrs) {\n    var i, keys = Object.keys(attrs);\n    for (i = keys.length; i--;) {\n        definePublicPropertyRO(obj, keys[i], attrs[keys[i]]);\n    }\n    return obj;\n}\n\nfunction defineHiddenPropertyRO (obj, name, value) {\n    Object.defineProperty(obj, name, {\n        value        : value,\n        configurable : true\n    });\n    return obj;\n}\n\n\n// --- end\n//\nmodule.exports = eventize;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L0BzcGVhcndvbGYvZXZlbnRpemUvc3JjL2V2ZW50aXplLmpzP2Q1ZmUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7O0FBRUE7O0FBRUEsOENBQThDO0FBQzlDO0FBQ0E7QUFDQSxLQUFLOztBQUVMOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSwyQ0FBMkM7O0FBRTNDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxhQUFhOztBQUViOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRDtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw2Q0FBNkM7O0FBRTdDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUzs7QUFFVDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FB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QTtBQUNBIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBoYXNNYXAgPSBjYW5Vc2VNYXAoKTtcbnZhciBoYXNTeW1ib2wgPSBjYW5Vc2VTeW1ib2woKTtcbnZhciBoYXNDb25zb2xlID0gdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnO1xuXG52YXIgUFJPUF9OQU1FU1BBQ0UgID0gIWhhc1N5bWJvbCA/ICdAQGV2ZW50aXplJyA6IChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFTeW1ib2wuZXZlbnRpemUpIHtcbiAgICAgICAgU3ltYm9sLmV2ZW50aXplID0gU3ltYm9sKCdldmVudGl6ZScpO1xuICAgIH1cbiAgICByZXR1cm4gU3ltYm9sLmV2ZW50aXplO1xufSkoKTtcblxudmFyIENBVENIX0FMTF9FVkVOVCA9ICcqJztcbnZhciBMT0dfTkFNRVNQQUNFICAgPSAnW2V2ZW50aXplLmpzXSc7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy9cbi8vIGV2ZW50aXplKCBvYmplY3QgKVxuLy9cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5mdW5jdGlvbiBldmVudGl6ZSAobykge1xuXG4gICAgaWYgKG9bUFJPUF9OQU1FU1BBQ0VdKSByZXR1cm4gbztcblxuICAgIHZhciBfZSA9IHtcbiAgICAgICAgbGFzdENhbGxiYWNrSWQgOiAwLFxuICAgICAgICBjYWxsYmFja3MgICAgICA6IHt9LFxuICAgICAgICBib3VuZE9iamVjdHMgICA6IFtdXG4gICAgfTtcblxuICAgIF9lLmNhbGxiYWNrc1tDQVRDSF9BTExfRVZFTlRdID0gW107XG5cbiAgICB2YXIgX2VQdWJsaWMgPSBkZWZpbmVQdWJsaWNQcm9wZXJ0aWVzUk8oe30sIHtcbiAgICAgICAgc2lsZW5jZWQgOiBmYWxzZSxcbiAgICAgICAgb2ZmICAgICAgOiBbXVxuICAgIH0pO1xuXG4gICAgZGVmaW5lSGlkZGVuUHJvcGVydHlSTyhvLCBQUk9QX05BTUVTUEFDRSwgX2VQdWJsaWMpO1xuXG4gICAgaWYgKGV2ZW50aXplLlBSSU9fREVGQVVMVCA9PT0gdW5kZWZpbmVkKSB7XG5cbiAgICAgICAgZGVmaW5lUHVibGljUHJvcGVydGllc1JPKGV2ZW50aXplLCB7XG4gICAgICAgICAgICBQUklPX01BWCAgICAgOiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksXG4gICAgICAgICAgICBQUklPX0EgICAgICAgOiAxMDAwMDAwMDAwLFxuICAgICAgICAgICAgUFJJT19CICAgICAgIDogMTAwMDAwMDAsXG4gICAgICAgICAgICBQUklPX0MgICAgICAgOiAxMDAwMDAsXG4gICAgICAgICAgICBQUklPX0RFRkFVTFQgOiAwLFxuICAgICAgICAgICAgUFJJT19MT1cgICAgIDogLTEwMDAwMCxcbiAgICAgICAgICAgIFBSSU9fTUlOICAgICA6IE51bWJlci5ORUdBVElWRV9JTkZJTklUWVxuICAgICAgICB9KTtcblxuICAgIH1cblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy9cbiAgICAvLyBvYmplY3Qub24oIGV2ZW50TmFtZSwgWyBwcmlvLCBdIGNhbGxiYWNrRnVuYyApXG4gICAgLy8gb2JqZWN0Lm9uKCBldmVudE5hbWUsIFsgcHJpbywgXSBvYmogKVxuICAgIC8vXG4gICAgLy8gb2JqZWN0Lm9uKCBjYWxsYmFja0Z1bmMgKSAgICA9PiBvYmplY3Qub24oICcqJywgY2FsbGJhY2tGdW5jIClcbiAgICAvLyBvYmplY3Qub24oIG9iaiApICAgICAgICAgICAgID0+IG9iamVjdC5vbiggJyonLCBvYmogKVxuICAgIC8vXG4gICAgLy8gb2JqZWN0Lm9uKCBldmVudE5hbWUgKVxuICAgIC8vIG9iamVjdC5vbigpXG4gICAgLy9cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgby5vbiA9IGZ1bmN0aW9uIChldmVudE5hbWUsIHByaW8sIGZuKSB7ICAvLyAtLS0ge3t7XG5cbiAgICAgICAgdmFyIGFyZ3NMZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuXG4gICAgICAgIGlmIChhcmdzTGVuID09PSAwKSB7XG4gICAgICAgICAgICBpZiAoX2VQdWJsaWMuc2lsZW5jZWQpIHtcbiAgICAgICAgICAgICAgICBkZWZpbmVQdWJsaWNQcm9wZXJ0eVJPKF9lUHVibGljLCAnc2lsZW5jZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgX2VQdWJsaWMub2ZmLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaTtcblxuICAgICAgICBpZiAoYXJnc0xlbiA9PT0gMSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBldmVudE5hbWUgPT09ICdzdHJpbmcnKSB7XG5cbiAgICAgICAgICAgICAgICBpID0gX2VQdWJsaWMub2ZmLmluZGV4T2YoZXZlbnROYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoaSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIF9lUHVibGljLm9mZi5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZXZlbnROYW1lID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgZXZlbnROYW1lID09PSAnZnVuY3Rpb24nKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBhbGlhcyBmb3I6IG9uKCcqJywgbGlzdGVuZXIpXG5cbiAgICAgICAgICAgICAgICBmbiA9IGV2ZW50TmFtZTtcbiAgICAgICAgICAgICAgICBldmVudE5hbWUgPSBDQVRDSF9BTExfRVZFTlQ7XG4gICAgICAgICAgICAgICAgcHJpbyA9IGV2ZW50aXplLlBSSU9fREVGQVVMVDtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzQ29uc29sZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oTE9HX05BTUVTUEFDRSwgJy5vbigpIGNhbGxlZCB3aXRoIGluc3VmZmljaWVudCBhcmd1bWVudHMhJywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFyZ3NMZW4gPT09IDIpIHtcbiAgICAgICAgICAgIGZuID0gcHJpbztcbiAgICAgICAgICAgIHByaW8gPSBldmVudGl6ZS5QUklPX0RFRkFVTFQ7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZXZlbnRpemVDYWxsYmFja3MgPSBfZS5jYWxsYmFja3M7XG4gICAgICAgIHZhciBldmVudExpc3RlbmVyID0gZXZlbnRpemVDYWxsYmFja3NbZXZlbnROYW1lXSB8fCAoZXZlbnRpemVDYWxsYmFja3NbZXZlbnROYW1lXSA9IFtdKTtcbiAgICAgICAgdmFyIGxpc3RlbmVySWQgPSBjcmVhdGVJZCgpO1xuICAgICAgICB2YXIgbGlzdGVuZXIgPSBkZWZpbmVQdWJsaWNQcm9wZXJ0aWVzUk8oe30sIHtcbiAgICAgICAgICAgIGlkICAgICAgICAgOiBsaXN0ZW5lcklkLFxuICAgICAgICAgICAgZm4gICAgICAgICA6IGZuLFxuICAgICAgICAgICAgcHJpbyAgICAgICA6ICh0eXBlb2YgcHJpbyAhPT0gJ251bWJlcicgPyBldmVudGl6ZS5QUklPX0RFRkFVTFQgOiBwcmlvKSxcbiAgICAgICAgICAgIGlzRnVuY3Rpb24gOiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZXZlbnRMaXN0ZW5lci5wdXNoKGxpc3RlbmVyKTtcbiAgICAgICAgZXZlbnRMaXN0ZW5lci5zb3J0KHNvcnRMaXN0ZW5lckJ5UHJpbyk7XG5cbiAgICAgICAgcmV0dXJuIGxpc3RlbmVySWQ7XG5cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlSWQgKCkge1xuICAgICAgICByZXR1cm4gKytfZS5sYXN0Q2FsbGJhY2tJZDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzb3J0TGlzdGVuZXJCeVByaW8gKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEucHJpbyAhPT0gYi5wcmlvID8gYi5wcmlvIC0gYS5wcmlvIDogYS5pZCAtIGIuaWQ7XG4gICAgfVxuXG4gICAgLy8gLS0tIG9uIH19fVxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vXG4gICAgLy8gb2JqZWN0Lm9uY2UoIGV2ZW50TmFtZSwgWyBwcmlvLCBdIGNhbGxiYWNrRnVuYyApXG4gICAgLy8gb2JqZWN0Lm9uY2UoIGV2ZW50TmFtZSwgWyBwcmlvLCBdIG9iaiApXG4gICAgLy9cbiAgICAvLyBvYmplY3Qub25jZSggY2FsbGJhY2tGdW5jICkgICAgICA9PiBvYmplY3Qub25jZSggJyonLCBjYWxsYmFja0Z1bmMgKVxuICAgIC8vIG9iamVjdC5vbmNlKCBvYmogKSAgICAgICAgICAgICAgID0+IG9iamVjdC5vbmNlKCAnKicsIG9iaiApXG4gICAgLy9cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICBvLm9uY2UgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBwcmlvLCBmbikgeyAgLy8gLS0tIHt7e1xuXG4gICAgICAgIHZhciBhcmdzTGVuID0gYXJndW1lbnRzLmxlbmd0aDtcblxuICAgICAgICBpZiAoIWFyZ3NMZW4gfHwgYXJnc0xlbiA+IDMpIHtcbiAgICAgICAgICAgIGlmIChoYXNDb25zb2xlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKExPR19OQU1FU1BBQ0UsICcub25jZSgpIGNhbGxlZCB3aXRoIGluc3VmZmljaWVudCBhcmd1bWVudHMhJywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhcmdzTGVuID09PSAxKSB7XG5cbiAgICAgICAgICAgIGZuID0gZXZlbnROYW1lO1xuICAgICAgICAgICAgZXZlbnROYW1lID0gQ0FUQ0hfQUxMX0VWRU5UO1xuICAgICAgICAgICAgcHJpbyA9IGV2ZW50aXplLlBSSU9fREVGQVVMVDtcblxuICAgICAgICB9IGVsc2UgaWYgKGFyZ3NMZW4gPT09IDIpIHtcblxuICAgICAgICAgICAgZm4gPSBwcmlvO1xuICAgICAgICAgICAgcHJpbyA9IGV2ZW50aXplLlBSSU9fREVGQVVMVDtcblxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGlkID0gby5vbihldmVudE5hbWUsIHByaW8sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXMgPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgby5vZmYoaWQpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGlkO1xuXG4gICAgfTtcblxuICAgIC8vIC0tLSBvbmNlIH19fVxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvL1xuICAgIC8vIG9iamVjdC5vZmYoIGlkIClcbiAgICAvLyBvYmplY3Qub2ZmKCBjYWxsYmFjayApXG4gICAgLy8gb2JqZWN0Lm9mZiggb2JqIClcbiAgICAvLyBvYmplY3Qub2ZmKCBldmVudE5hbWUgKVxuICAgIC8vIG9iamVjdC5vZmYoKVxuICAgIC8vXG4gICAgLy8gZGVhY3RpdmUgbGlzdGVuZXIgYnkgaWQgb3IgcHJldmlvdXNseSBib3VuZCBvYmplY3Qgb3JcbiAgICAvLyBmdW5jdGlvbiByZWZlcmVuY2Ugb3IgZXZlbnQgbmFtZSBvciBzaWxlbmNlIGFsbCBldmVudHNcbiAgICAvL1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICBvLm9mZiA9IGZ1bmN0aW9uIChpZCkgeyAgLy8gLS0ge3t7XG5cbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGlmICghX2VQdWJsaWMuc2lsZW5jZWQpIHtcbiAgICAgICAgICAgICAgICBkZWZpbmVQdWJsaWNQcm9wZXJ0eVJPKF9lUHVibGljLCAnc2lsZW5jZWQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBfZVB1YmxpYy5vZmYubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgaWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gYnkgZXZlbnQgbmFtZVxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIGlmIChfZVB1YmxpYy5vZmYuaW5kZXhPZihpZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgX2VQdWJsaWMub2ZmLnB1c2goaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGV2ZW50aXplQ2FsbGJhY2tzID0gX2UuY2FsbGJhY2tzO1xuICAgICAgICB2YXIgY2IsIGksIGosIF9jYWxsYmFja3MsIGtleXM7XG4gICAgICAgIHZhciBpc09iamVjdCA9IHR5cGVvZiBpZCA9PT0gJ29iamVjdCc7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGlkID09PSAnZnVuY3Rpb24nIHx8IGlzT2JqZWN0KSB7XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gYnkgaWQgb3IgZnVuY3Rpb24gcmVmZXJlbmNlXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAga2V5cyA9IE9iamVjdC5rZXlzKGV2ZW50aXplQ2FsbGJhY2tzKTtcbiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBrZXlzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgX2NhbGxiYWNrcyA9IGV2ZW50aXplQ2FsbGJhY2tzW2tleXNbal1dO1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBfY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiID0gX2NhbGxiYWNrc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNiLmlkID09PSBpZCB8fCBjYi5mbiA9PT0gaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jYWxsYmFja3Muc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc09iamVjdCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzT2JqZWN0KSB7XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gYnkgYm91bmQgb2JqZWN0IHJlZmVyZW5jZVxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIGkgPSBfZS5ib3VuZE9iamVjdHMuaW5kZXhPZihpZCk7XG4gICAgICAgICAgICBpZiAoIGkgPj0gMCApIHtcbiAgICAgICAgICAgICAgICBfZS5ib3VuZE9iamVjdHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgLy8gLS0tIG9mZiB9fX1cblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy9cbiAgICAvLyBvYmplY3QuY29ubmVjdCggb2JqIClcbiAgICAvLyBvYmplY3QuY29ubmVjdCggb2JqLCBtYXBwaW5nIClcbiAgICAvL1xuICAgIC8vIEV4YW1wbGU6XG4gICAgLy9cbiAgICAvLyAgIG9iamVjdC5jb25uZWN0KG9wdGlvbnMsIHtcbiAgICAvLyAgICAgICAgb25Qcm9qZWN0aW9uVXBkYXRlZCA6IFsxMDAsICdwcm9qZWN0aW9uVXBkYXRlZCddLFxuICAgIC8vICAgICAgICBvbkZyYW1lICAgICAgICAgICAgIDogJ2ZyYW1lJyxcbiAgICAvLyAgICAgICAgb25GcmFtZUVuZCAgICAgICAgICA6ICdmcmFtZUVuZCdcbiAgICAvLyAgIH0pXG4gICAgLy9cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgby5jb25uZWN0ID0gZnVuY3Rpb24gKG9iaiwgbWFwcGluZykgeyAgLy8gLS0tIHt7e1xuICAgICAgICB2YXIgYXJnc0xlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICAgIGlmIChhcmdzTGVuID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gX2JpbmRPYmplY3Qob2JqKTtcbiAgICAgICAgfSBlbHNlIGlmIChhcmdzTGVuID09PSAyKSB7XG4gICAgICAgICAgICByZXR1cm4gX2Nvbm5lY3RXaXRoTWFwcGluZyh0aGlzLCBvYmosIG1hcHBpbmcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGhhc0NvbnNvbGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oTE9HX05BTUVTUEFDRSwgJy5jb25uZWN0KCkgY2FsbGVkIHdpdGggaW5zdWZmaWNpZW50IGFyZ3VtZW50cyEnLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIF9iaW5kT2JqZWN0IChvYmopIHtcblxuICAgICAgICAvLyBUT0RPIGNvbm5lY3Qob2JqKSBzaG91bGQgLi5cbiAgICAgICAgLy8gLSBzdXBwb3J0IHByaW9yaXR5XG4gICAgICAgIC8vIC0gc3VwcG9ydCBmaWx0ZXJzPyAodmlhIG9ubHksIGV4Y2VwdCBvcHRpb25zKVxuICAgICAgICAvLyAtIHN1cHBvcnQgc2VuZGVyQ29udGV4dEFyZ3VtZW50PzogJ3ByZXBlbmQnfCdhcHBlbmQnfGZhbHNlXG5cbiAgICAgICAgaWYgKCFvYmopIHJldHVybjtcbiAgICAgICAgdmFyIGkgPSBfZS5ib3VuZE9iamVjdHMuaW5kZXhPZihvYmopO1xuICAgICAgICBpZiAoaSA9PT0gLTEpIHtcbiAgICAgICAgICAgIF9lLmJvdW5kT2JqZWN0cy5wdXNoKG9iaik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9jb25uZWN0V2l0aE1hcHBpbmcgKG9iaiwgb3B0aW9ucywgbGlzdGVuZXJNYXApIHtcblxuICAgICAgICB2YXIgZXZlbnROYW1lLCBsaXN0ZW5OYW1lLCBsaXN0ZW5GdW5jLCBwcmlvO1xuXG4gICAgICAgIGZvciAobGlzdGVuTmFtZSBpbiBsaXN0ZW5lck1hcCkge1xuICAgICAgICAgICAgaWYgKGxpc3RlbmVyTWFwLmhhc093blByb3BlcnR5KGxpc3Rlbk5hbWUpKSB7XG4gICAgICAgICAgICAgICAgbGlzdGVuRnVuYyA9IG9wdGlvbnNbbGlzdGVuTmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5GdW5jID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50TmFtZSA9IGxpc3RlbmVyTWFwW2xpc3Rlbk5hbWVdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShldmVudE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmlvID0gZXZlbnROYW1lWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnROYW1lID0gZXZlbnROYW1lWzFdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJpbyA9IGV2ZW50aXplLlBSSU9fREVGQVVMVDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvYmoub24oZXZlbnROYW1lLCBwcmlvLCBsaXN0ZW5GdW5jKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gb2JqO1xuXG4gICAgfVxuXG4gICAgLy8gLS0tIGNvbm5lY3QgfX19XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vXG4gICAgLy8gb2JqZWN0LmVtaXQoIGV2ZW50TmFtZSBbLCBhcmd1bWVudHMgLi4gXSApXG4gICAgLy9cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgby5lbWl0ID0gZnVuY3Rpb24gKCkgeyAgLy8gLS0tIHt7e1xuXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9wZXRrYWFudG9ub3YvYmx1ZWJpcmQvd2lraS9PcHRpbWl6YXRpb24ta2lsbGVycyMzLW1hbmFnaW5nLWFyZ3VtZW50c1xuICAgICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGV2ZW50TmFtZTtcbiAgICAgICAgdmFyIHNlbmRlckN0eCA9IHRoaXM7XG4gICAgICAgIHZhciByb290Q3R4O1xuICAgICAgICB2YXIgYXJnc0N0eDtcblxuICAgICAgICBpZiAoYXJncy5sZW5ndGggPiAxICYmIHR5cGVvZiBhcmdzWzBdICE9PSAnc3RyaW5nJyAmJiB0eXBlb2YgYXJnc1sxXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJvb3RDdHggPSBhcmdzLnNoaWZ0KCk7XG4gICAgICAgICAgICBldmVudE5hbWUgPSBhcmdzLnNoaWZ0KCk7XG4gICAgICAgICAgICBhcmdzW2FyZ3MubGVuZ3RoIC0gMV0gPSByb290Q3R4O1xuICAgICAgICAgICAgYXJnc0N0eCA9IGFyZ3M7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBldmVudE5hbWUgPSBhcmdzLnNoaWZ0KCk7ICAvLyB0aHJvdyBvdXQgZXZlbnROYW1lXG4gICAgICAgICAgICBhcmdzQ3R4ID0gYXJncy5jb25jYXQoW3NlbmRlckN0eF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgX2Rpc3BhdGNoKGV2ZW50TmFtZSwgZnVuY3Rpb24gKGxpc3RlbmVyKSB7XG5cbiAgICAgICAgICAgIGlmIChsaXN0ZW5lci5pc0Z1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXIuZm4uYXBwbHkoc2VuZGVyQ3R4LCBhcmdzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGZuID0gbGlzdGVuZXIuZm5bZXZlbnROYW1lXTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGZuLmFwcGx5KGxpc3RlbmVyLmZuLCBhcmdzQ3R4KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpc3RlbmVyLmZuW1BST1BfTkFNRVNQQUNFXSkge1xuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lci5mbi5lbWl0LmFwcGx5KGxpc3RlbmVyLmZuLCBbZXZlbnROYW1lXS5jb25jYXQoYXJncykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9LCBmdW5jdGlvbiAoZm4sIGJvdW5kT2JqKSB7XG5cbiAgICAgICAgICAgIGlmIChmbikge1xuICAgICAgICAgICAgICAgIGZuLmFwcGx5KGJvdW5kT2JqLCBhcmdzQ3R4KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYm91bmRPYmouZW1pdC5hcHBseShib3VuZE9iaiwgW3NlbmRlckN0eCwgZXZlbnROYW1lXS5jb25jYXQoYXJnc0N0eCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gX2Rpc3BhdGNoIChldmVudE5hbWUsIGVtaXRMaXN0ZW5lciwgZW1pdEJvdW5kT2JqZWN0KSB7XG5cbiAgICAgICAgaWYgKF9lUHVibGljLnNpbGVuY2VkKSByZXR1cm47XG4gICAgICAgIGlmIChfZVB1YmxpYy5vZmYuaW5kZXhPZihldmVudE5hbWUpID49IDApIHJldHVybjtcblxuICAgICAgICB2YXIgbGlzdGVuZXJzICAgICAgICAgICAgICA9IF9lLmNhbGxiYWNrc1tldmVudE5hbWVdO1xuICAgICAgICB2YXIgY2F0Y2hBbGxMaXN0ZW5lcnMgICAgICA9IF9lLmNhbGxiYWNrc1tDQVRDSF9BTExfRVZFTlRdO1xuICAgICAgICB2YXIgYm91bmRPYmpzQ291bnQgICAgICAgICA9IF9lLmJvdW5kT2JqZWN0cy5sZW5ndGg7XG4gICAgICAgIHZhciBoYXNCb3VuZE9iamVjdHNFbWl0dGVkID0gZmFsc2U7XG5cbiAgICAgICAgZnVuY3Rpb24gX2VtaXRCb3VuZE9iamVjdHMgKCkge1xuICAgICAgICAgICAgdmFyIGosIGJvLCBmbjtcbiAgICAgICAgICAgIGlmIChib3VuZE9ianNDb3VudCkge1xuICAgICAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBib3VuZE9ianNDb3VudDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGJvID0gX2UuYm91bmRPYmplY3RzW2pdO1xuICAgICAgICAgICAgICAgICAgICBmbiA9IGJvW2V2ZW50TmFtZV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtaXRCb3VuZE9iamVjdChmbiwgYm8pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJvW1BST1BfTkFNRVNQQUNFXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW1pdEJvdW5kT2JqZWN0KG51bGwsIGJvKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpLCBsZW4sIGxpc3RlbjtcblxuICAgICAgICBpZiAobGlzdGVuZXJzIHx8IGNhdGNoQWxsTGlzdGVuZXJzLmxlbmd0aCkge1xuXG4gICAgICAgICAgICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMgPyBsaXN0ZW5lcnMuY29uY2F0KGNhdGNoQWxsTGlzdGVuZXJzKSA6IGNhdGNoQWxsTGlzdGVuZXJzO1xuICAgICAgICAgICAgbGVuID0gbGlzdGVuZXJzLmxlbmd0aDtcblxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGlzdGVuID0gbGlzdGVuZXJzW2ldO1xuICAgICAgICAgICAgICAgIGlmICghaGFzQm91bmRPYmplY3RzRW1pdHRlZCAmJiBsaXN0ZW4gJiYgbGlzdGVuLnByaW8gPCBldmVudGl6ZS5QUklPX0RFRkFVTFQpIHtcbiAgICAgICAgICAgICAgICAgICAgX2VtaXRCb3VuZE9iamVjdHMoKTtcbiAgICAgICAgICAgICAgICAgICAgaGFzQm91bmRPYmplY3RzRW1pdHRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVtaXRMaXN0ZW5lcihsaXN0ZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFoYXNCb3VuZE9iamVjdHNFbWl0dGVkKSBfZW1pdEJvdW5kT2JqZWN0cygpO1xuXG4gICAgfVxuXG4gICAgLy8gLS0tIGVtaXQgfX19XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vXG4gICAgLy8gb2JqZWN0LmVtaXRSZWR1Y2UoIGV2ZW50TmFtZSBbLCB2YWx1ZT0ge30gXSBbLCBhcmd1bWVudHMgLi4gXSApXG4gICAgLy9cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgby5lbWl0UmVkdWNlID0gZnVuY3Rpb24gKCkgeyAgLy8gLS0tIHt7e1xuXG4gICAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZXZlbnROYW1lID0gYXJncy5zaGlmdCgpO1xuICAgICAgICB2YXIgdmFsdWU7XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0VmFsdWUgKHZhbCkge1xuICAgICAgICAgICAgaWYgKHZhbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHZhbHVlID0ge307XG4gICAgICAgICAgICBhcmdzLnB1c2godmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0VmFsdWUoYXJnc1swXSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY3R4ID0gdGhpcztcbiAgICAgICAgdmFyIGFyZ3NXaXRoRXZlbnROYW1lID0gW2V2ZW50TmFtZV0uY29uY2F0KGFyZ3MpO1xuICAgICAgICB2YXIgYXJnc0N0eCA9IGFyZ3MuY29uY2F0KFtjdHhdKTtcblxuICAgICAgICBfZGlzcGF0Y2goZXZlbnROYW1lLCBmdW5jdGlvbiAobGlzdGVuZXIpIHtcblxuICAgICAgICAgICAgaWYgKGxpc3RlbmVyLmlzRnVuY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBhcmdzWzBdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgc2V0VmFsdWUobGlzdGVuZXIuZm4uYXBwbHkoY3R4LCBhcmdzKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBmbiA9IGxpc3RlbmVyLmZuW2V2ZW50TmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBhcmdzQ3R4WzBdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHNldFZhbHVlKGZuLmFwcGx5KGxpc3RlbmVyLmZuLCBhcmdzQ3R4KSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaXN0ZW5lci5mbltQUk9QX05BTUVTUEFDRV0pIHtcbiAgICAgICAgICAgICAgICAgICAgYXJnc1dpdGhFdmVudE5hbWVbMV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VmFsdWUobGlzdGVuZXIuZm4uZW1pdFJlZHVjZS5hcHBseShsaXN0ZW5lci5mbiwgYXJnc1dpdGhFdmVudE5hbWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSwgZnVuY3Rpb24gKGZuLCBib3VuZE9iaikge1xuXG4gICAgICAgICAgICBpZiAoZm4pIHtcbiAgICAgICAgICAgICAgICBhcmdzQ3R4WzBdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgc2V0VmFsdWUoZm4uYXBwbHkoYm91bmRPYmosIGFyZ3NDdHgpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdmFsdWU7XG5cbiAgICB9O1xuXG4gICAgLy8gLS0tIGVtaXQgfX19XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vXG4gICAgLy8gb2JqZWN0LmZyb20oIGV2ZW50TmFtZSwgT2JzZXJ2YWJsZSApXG4gICAgLy9cbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtb2JzZXJ2YWJsZVxuICAgIC8vXG4gICAgLy8gRXhhbXBsZTpcbiAgICAvL1xuICAgIC8vICAgICAgb2JqZWN0XG4gICAgLy8gICAgICAgICAgLmZyb20oJ2ZvbycsIFJ4Lk9ic2VydmFibGUpXG4gICAgLy8gICAgICAgICAgLmZpbHRlcih4ID0+IHggJSAyID09PSAwKVxuICAgIC8vICAgICAgICAgIC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gICAgLy9cbiAgICAvL1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICBvLmZyb20gPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBvYnNlcnZhYmxlKSB7ICAvLyAtLS0ge3t7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgcmV0dXJuIG5ldyBvYnNlcnZhYmxlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuXG4gICAgICAgICAgICB2YXIgaWQgPSBzZWxmLm9uKGV2ZW50TmFtZSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KGRhdGEpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5vZmYoaWQpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gLS0tIGZyb20gfX19XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vXG4gICAgLy8gb2JqZWN0LnN1YnNjcmliZSggT2JzZXJ2YWJsZSwgb25OZXh0Wywgb25FcnJvcl1bLCBvbkNvbXBsZXRlXSApXG4gICAgLy9cbiAgICAvLyBFeGFtcGxlOlxuICAgIC8vXG4gICAgLy8gICAgICBvYmplY3Quc3Vic2NyaWJlKGEsICd2YWx1ZScsICdlcnJvcicpOyAgIC8vIGEgPT4gT2JzZXJ2YWJsZVxuICAgIC8vXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIG8uc3Vic2NyaWJlID0gZnVuY3Rpb24gKHNvdXJjZSwgb25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlKSB7ICAvLyAtLS0ge3t7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUoZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBzZWxmLmVtaXQob25OZXh0LCB2YWx1ZSk7XG4gICAgICAgIH0sIG9uRXJyb3IgPyBmdW5jdGlvbiAoZXJyb3JWYWx1ZSkge1xuICAgICAgICAgICAgc2VsZi5lbWl0KG9uRXJyb3IsIGVycm9yVmFsdWUpO1xuICAgICAgICB9IDogdW5kZWZpbmVkLCBvbkNvbXBsZXRlID8gZnVuY3Rpb24gKGNvbXBsZXRlVmFsdWUpIHtcbiAgICAgICAgICAgIHNlbGYuZW1pdChvbkNvbXBsZXRlLCBjb21wbGV0ZVZhbHVlKTtcbiAgICAgICAgfSA6IHVuZGVmaW5lZCk7XG4gICAgfTtcblxuICAgIC8vIC0tLSBzdWJzY3JpYmUgfX19XG5cbiAgICByZXR1cm4gbztcblxufSAvLyA8PSBldmVudGl6ZSgpXG5cblxuZXZlbnRpemUuaXMgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgcmV0dXJuICEhKCBvYmogJiYgb2JqW1BST1BfTkFNRVNQQUNFXSApO1xufTtcblxuXG5kZWZpbmVIaWRkZW5Qcm9wZXJ0eVJPKCBldmVudGl6ZSxcbiAgICAnRXZlbnRpemVOYW1lc3BhY2UnLCBQUk9QX05BTUVTUEFDRSk7XG5cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vXG4vLyBldmVudGl6ZS5xdWV1ZShbIHF1ZXVlSWQgXVssIG9wdGlvbnNdKSA6IHF1ZXVlXG4vL1xuLy8gb3B0aW9ucyBhcmU6XG4vLyAgICAtIHJlcGxhY2U6IHRydWV8ZmFsc2UgIC0gcmVwbGFjZSBwcmV2aW91cyBldmVudHMgd2l0aCBzYW1lIG5hbWVcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGVuIHF1ZXVlIGlzIGluIGNvbGxlY3Rpb24gbW9kZVxuLy9cbi8vIHF1ZXVlLnBsYXkoKSAgICAgICAgICAgICAgLSBhY3RpdmF0ZSBwbGF5IChpbW1lZGlhdGVseSBlbWl0KSBtb2RlXG4vLyBxdWV1ZS5jb2xsZWN0KCkgICAgICAgICAgIC0gYWN0aXZhdGUgY29sbGVjdGlvbiAoc3RvcmUgYWxsIGV2ZW50cykgbW9kZVxuLy8gcXVldWUudG9nZ2xlKCkgICAgICAgICAgICAtIHRvZ2dsZSBzdGF0ZVxuLy8gcXVldWUuc3RhdGUgICAgICAgICAgICAgICAtICdwbGF5J3wnY29sbGVjdCdcbi8vXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5kZWZpbmVIaWRkZW5Qcm9wZXJ0eVJPKGV2ZW50aXplLCAncXVldWVzJywgaGFzTWFwID8gbmV3IE1hcCA6IHt9KTtcblxuZXZlbnRpemUucXVldWUgPSBmdW5jdGlvbiAoaWQvKiwgb3B0aW9ucyAqLykge1xuXG4gICAgdmFyIHF1ZXVlLCBvcHRpb25zO1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuXG4gICAgaWYgKGxlbiA+PSAxKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaWQgIT09ICdvYmplY3QnIHx8IGxlbiA9PT0gMikge1xuICAgICAgICAgICAgcXVldWUgPSBoYXNNYXAgPyBldmVudGl6ZS5xdWV1ZXMuZ2V0KGlkKSA6IGV2ZW50aXplLnF1ZXVlc1tpZF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlbiA9PT0gMikge1xuICAgICAgICAgICAgb3B0aW9ucyA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgfSBlbHNlIGlmIChsZW4gPT09IDEgJiYgdHlwZW9mIGlkID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgb3B0aW9ucyA9IGlkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFxdWV1ZSkge1xuICAgICAgICBxdWV1ZSA9IGNyZWF0ZVF1ZXVlKGlkLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKGhhc01hcCkge1xuICAgICAgICAgICAgZXZlbnRpemUucXVldWVzLnNldChxdWV1ZS5pZCwgcXVldWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXZlbnRpemUucXVldWVzW3F1ZXVlLmlkXSA9IHF1ZXVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHF1ZXVlO1xuXG59O1xuXG5cbnZhciBTVEFURSA9ICdzdGF0ZSc7XG52YXIgUExBWSA9ICdwbGF5JztcbnZhciBDT0xMRUNUID0gJ2NvbGxlY3QnO1xuXG5mdW5jdGlvbiBjcmVhdGVRdWV1ZSAoaWQsIG9wdGlvbnMpIHtcblxuICAgIHZhciBxdWV1ZUlkID0gKCh0eXBlb2YgaWQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBpZCA9PT0gJ3N5bWJvbCcpICYmIGlkKSB8fCBjcmVhdGVVdWlkKCk7XG4gICAgdmFyIHF1ZXVlID0gZXZlbnRpemUoe30pO1xuICAgIHZhciBpc1JlcGxhY2UgPSAhIShvcHRpb25zICYmIG9wdGlvbnMucmVwbGFjZSk7XG5cbiAgICB2YXIgc2V0U3RhdGUgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgZGVmaW5lUHVibGljUHJvcGVydHlSTyhxdWV1ZSwgU1RBVEUsIHN0YXRlKTtcbiAgICB9O1xuXG4gICAgdmFyIGVtaXQgPSAoZnVuY3Rpb24gKF9lbWl0KSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIF9lbWl0LmFwcGx5KHF1ZXVlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICB9KShxdWV1ZS5lbWl0KTtcblxuICAgIGRlZmluZUhpZGRlblByb3BlcnR5Uk8ocXVldWUsICdldmVudHMnLCBbXSk7XG4gICAgZGVmaW5lUHVibGljUHJvcGVydHlSTyhxdWV1ZSwgJ2lkJywgcXVldWVJZCk7XG5cbiAgICBxdWV1ZS5jb2xsZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAocXVldWVbU1RBVEVdICE9PSBDT0xMRUNUKSB7XG4gICAgICAgICAgICBzZXRTdGF0ZShDT0xMRUNUKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcXVldWU7XG4gICAgfTtcblxuICAgIHF1ZXVlLmVtaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHF1ZXVlW1NUQVRFXSA9PT0gUExBWSkge1xuICAgICAgICAgICAgZW1pdChhcmdzKTtcbiAgICAgICAgfSBlbHNlIHsgIC8vIENPTExFQ1RcbiAgICAgICAgICAgIGlmIChpc1JlcGxhY2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGVuLCBldmVudE5hbWUgPSBhcmdzWzBdO1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHF1ZXVlLmV2ZW50cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocXVldWUuZXZlbnRzW2ldWzBdID09PSBldmVudE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlLmV2ZW50c1tpXSA9IGFyZ3M7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBxdWV1ZS5ldmVudHMucHVzaChhcmdzKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBxdWV1ZS5wbGF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAocXVldWVbU1RBVEVdICE9PSBQTEFZKSB7XG4gICAgICAgICAgICBzZXRTdGF0ZShQTEFZKTtcbiAgICAgICAgICAgIHF1ZXVlLmV2ZW50cy5mb3JFYWNoKGVtaXQpO1xuICAgICAgICAgICAgcXVldWUuZXZlbnRzLmxlbmd0aCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHF1ZXVlO1xuICAgIH07XG5cbiAgICBxdWV1ZS50b2dnbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBxdWV1ZVtTVEFURV0gIT09IFBMQVkgPyBxdWV1ZS5wbGF5KCkgOiBxdWV1ZS5jb2xsZWN0KCk7XG4gICAgfTtcblxuICAgIHJldHVybiBxdWV1ZS5wbGF5KCk7XG5cbn1cblxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vXG4vLyBoZWxwZXIgZnVuY3Rpb25zXG4vL1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuZnVuY3Rpb24gY3JlYXRlVXVpZCAoKSB7XG4gICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDUwMzQvY3JlYXRlLWd1aWQtdXVpZC1pbi1qYXZhc2NyaXB0XG4gICAgdmFyIHV1aWQgPSAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjKSB7XG4gICAgICAgIHZhciByID0gTWF0aC5yYW5kb20oKSoxNnwwLCB2ID0gYyA9PSAneCcgPyByIDogKHImMHgzfDB4OCk7XG4gICAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcbiAgICB9KTtcbiAgICByZXR1cm4gaGFzU3ltYm9sID8gU3ltYm9sKHV1aWQpIDogdXVpZDtcbn1cblxuZnVuY3Rpb24gY2FuVXNlU3ltYm9sICgpIHtcbiAgICByZXR1cm4gdHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCc7XG59XG5cbmZ1bmN0aW9uIGNhblVzZU1hcCAoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBNYXAgIT09ICd1bmRlZmluZWQnO1xufVxuXG5mdW5jdGlvbiBkZWZpbmVQdWJsaWNQcm9wZXJ0eVJPIChvYmosIG5hbWUsIHZhbHVlKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgbmFtZSwge1xuICAgICAgICB2YWx1ZSAgICAgICAgOiB2YWx1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlIDogdHJ1ZSxcbiAgICAgICAgZW51bWVyYWJsZSAgIDogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIGRlZmluZVB1YmxpY1Byb3BlcnRpZXNSTyAob2JqLCBhdHRycykge1xuICAgIHZhciBpLCBrZXlzID0gT2JqZWN0LmtleXMoYXR0cnMpO1xuICAgIGZvciAoaSA9IGtleXMubGVuZ3RoOyBpLS07KSB7XG4gICAgICAgIGRlZmluZVB1YmxpY1Byb3BlcnR5Uk8ob2JqLCBrZXlzW2ldLCBhdHRyc1trZXlzW2ldXSk7XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIGRlZmluZUhpZGRlblByb3BlcnR5Uk8gKG9iaiwgbmFtZSwgdmFsdWUpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBuYW1lLCB7XG4gICAgICAgIHZhbHVlICAgICAgICA6IHZhbHVlLFxuICAgICAgICBjb25maWd1cmFibGUgOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIG9iajtcbn1cblxuXG4vLyAtLS0gZW5kXG4vL1xubW9kdWxlLmV4cG9ydHMgPSBldmVudGl6ZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9Ac3BlYXJ3b2xmL2V2ZW50aXplL3NyYy9ldmVudGl6ZS5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nconst SG_NODE_TYPE = 0;\n\nconst DEFAULT_PRIORITY = 0;\n\nexports.SG_NODE_TYPE = SG_NODE_TYPE;\nexports.DEFAULT_PRIORITY = DEFAULT_PRIORITY;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NlbmVfZ3JhcGgvY29uc3RhbnRzLmpzPzJjMjkiXSwibmFtZXMiOlsiU0dfTk9ERV9UWVBFIiwiREVGQVVMVF9QUklPUklUWSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0EsTUFBTUEsZUFBZSxDQUFyQjs7QUFFQSxNQUFNQyxtQkFBbUIsQ0FBekI7O1FBR0lELFksR0FBQUEsWTtRQUNBQyxnQixHQUFBQSxnQiIsImZpbGUiOiIyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG5jb25zdCBTR19OT0RFX1RZUEUgPSAwO1xuXG5jb25zdCBERUZBVUxUX1BSSU9SSVRZID0gMDtcblxuZXhwb3J0IHtcbiAgICBTR19OT0RFX1RZUEUsXG4gICAgREVGQVVMVF9QUklPUklUWVxufTtcblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3NjZW5lX2dyYXBoL2NvbnN0YW50cy5qcyJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function () {\n    let d = new Date().getTime();\n    const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = (d + Math.random() * 16) % 16 | 0;\n        d = Math.floor(d / 16);\n        return (c == 'x' ? r : r & 0x3 | 0x8).toString(16);\n    });\n    return uuid;\n};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMvZ2VuZXJhdGVfdXVpZC5qcz9hZjU2Il0sIm5hbWVzIjpbImQiLCJEYXRlIiwiZ2V0VGltZSIsInV1aWQiLCJyZXBsYWNlIiwiYyIsInIiLCJNYXRoIiwicmFuZG9tIiwiZmxvb3IiLCJ0b1N0cmluZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O2tCQUVlLFlBQVk7QUFDdkIsUUFBSUEsSUFBSSxJQUFJQyxJQUFKLEdBQVdDLE9BQVgsRUFBUjtBQUNBLFVBQU1DLE9BQU8sdUNBQXVDQyxPQUF2QyxDQUErQyxPQUEvQyxFQUF3RCxVQUFTQyxDQUFULEVBQVk7QUFDN0UsWUFBSUMsSUFBSSxDQUFDTixJQUFJTyxLQUFLQyxNQUFMLEtBQWMsRUFBbkIsSUFBdUIsRUFBdkIsR0FBNEIsQ0FBcEM7QUFDQVIsWUFBSU8sS0FBS0UsS0FBTCxDQUFXVCxJQUFFLEVBQWIsQ0FBSjtBQUNBLGVBQU8sQ0FBQ0ssS0FBRyxHQUFILEdBQVNDLENBQVQsR0FBY0EsSUFBRSxHQUFGLEdBQU8sR0FBdEIsRUFBNEJJLFFBQTVCLENBQXFDLEVBQXJDLENBQVA7QUFDSCxLQUpZLENBQWI7QUFLQSxXQUFPUCxJQUFQO0FBQ0gsQyIsImZpbGUiOiIzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG4vLyBodHRwczovL2pzZmlkZGxlLm5ldC9icmlndXkzNy8yTVZGZC9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICgpIHtcbiAgICBsZXQgZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIGNvbnN0IHV1aWQgPSAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uKGMpIHtcbiAgICAgICAgdmFyIHIgPSAoZCArIE1hdGgucmFuZG9tKCkqMTYpJTE2IHwgMDtcbiAgICAgICAgZCA9IE1hdGguZmxvb3IoZC8xNik7XG4gICAgICAgIHJldHVybiAoYz09J3gnID8gciA6IChyJjB4MyB8MHg4KSkudG9TdHJpbmcoMTYpO1xuICAgIH0pO1xuICAgIHJldHVybiB1dWlkO1xufVxuXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdXRpbHMvZ2VuZXJhdGVfdXVpZC5qcyJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _s_g_node = __webpack_require__(0);\n\nvar _s_g_node2 = _interopRequireDefault(_s_g_node);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst node = new _s_g_node2.default();\n\nconsole.log(\"hello, hello\", node.name);\n\n// based on https://github.com/paulirish/webgl-boilerplate\n\nvar canvas,\n    gl,\n    buffer,\n    vertex_shader,\n    fragment_shader,\n    currentProgram,\n    vertex_position,\n    timeLocation,\n    resolutionLocation,\n    parameters = {\n    start_time: new Date().getTime(),\n    time: 0,\n    screenWidth: 0,\n    screenHeight: 0 };\n\ninit();\nanimate();\n\nfunction init() {\n\n    vertex_shader = document.getElementById('vs').textContent;\n    fragment_shader = document.getElementById('fs').textContent;\n    canvas = document.querySelector('canvas');\n\n    // Initialise WebGL\n\n    try {\n\n        gl = canvas.getContext('experimental-webgl');\n    } catch (error) {}\n\n    if (!gl) {\n\n        throw \"cannot create webgl context\";\n    }\n\n    // Create Vertex buffer (2 triangles)\n\n    buffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1.0, -1.0, 1.0, -1.0, -1.0, 1.0, 1.0, -1.0, 1.0, 1.0, -1.0, 1.0]), gl.STATIC_DRAW);\n\n    // Create Program\n\n    currentProgram = createProgram(vertex_shader, fragment_shader);\n\n    timeLocation = gl.getUniformLocation(currentProgram, 'time');\n    resolutionLocation = gl.getUniformLocation(currentProgram, 'resolution');\n}\n\nfunction createProgram(vertex, fragment) {\n\n    var program = gl.createProgram();\n\n    var vs = createShader(vertex, gl.VERTEX_SHADER);\n    var fs = createShader('#ifdef GL_ES\\nprecision highp float;\\n#endif\\n\\n' + fragment, gl.FRAGMENT_SHADER);\n\n    if (vs == null || fs == null) return null;\n\n    gl.attachShader(program, vs);\n    gl.attachShader(program, fs);\n\n    gl.deleteShader(vs);\n    gl.deleteShader(fs);\n\n    gl.linkProgram(program);\n\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n\n        alert(\"ERROR:\\n\" + \"VALIDATE_STATUS: \" + gl.getProgramParameter(program, gl.VALIDATE_STATUS) + \"\\n\" + \"ERROR: \" + gl.getError() + \"\\n\\n\" + \"- Vertex Shader -\\n\" + vertex + \"\\n\\n\" + \"- Fragment Shader -\\n\" + fragment);\n\n        return null;\n    }\n\n    return program;\n}\n\nfunction createShader(src, type) {\n\n    var shader = gl.createShader(type);\n\n    gl.shaderSource(shader, src);\n    gl.compileShader(shader);\n\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n\n        alert((type == gl.VERTEX_SHADER ? \"VERTEX\" : \"FRAGMENT\") + \" SHADER:\\n\" + gl.getShaderInfoLog(shader));\n        return null;\n    }\n\n    return shader;\n}\n\nfunction resizeCanvas(event) {\n\n    if (canvas.width != canvas.clientWidth || canvas.height != canvas.clientHeight) {\n\n        canvas.width = canvas.clientWidth;\n        canvas.height = canvas.clientHeight;\n\n        parameters.screenWidth = canvas.width;\n        parameters.screenHeight = canvas.height;\n\n        gl.viewport(0, 0, canvas.width, canvas.height);\n    }\n}\n\nfunction animate() {\n\n    resizeCanvas();\n    render();\n    requestAnimationFrame(animate);\n}\n\nfunction render() {\n\n    if (!currentProgram) return;\n\n    parameters.time = new Date().getTime() - parameters.start_time;\n\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n    // Load program into GPU\n\n    gl.useProgram(currentProgram);\n\n    // Set values to program variables\n\n    gl.uniform1f(timeLocation, parameters.time / 1000);\n    gl.uniform2f(resolutionLocation, parameters.screenWidth, parameters.screenHeight);\n\n    // Render geometry\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    gl.vertexAttribPointer(vertex_position, 2, gl.FLOAT, false, 0, 0);\n    gl.enableVertexAttribArray(vertex_position);\n    gl.drawArrays(gl.TRIANGLES, 0, 6);\n    gl.disableVertexAttribArray(vertex_position);\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWJnbC1ib2lsZXJwbGF0ZS9zcmMvaW5kZXguanM/ZDZjZCJdLCJuYW1lcyI6WyJub2RlIiwiY29uc29sZSIsImxvZyIsIm5hbWUiLCJjYW52YXMiLCJnbCIsImJ1ZmZlciIsInZlcnRleF9zaGFkZXIiLCJmcmFnbWVudF9zaGFkZXIiLCJjdXJyZW50UHJvZ3JhbSIsInZlcnRleF9wb3NpdGlvbiIsInRpbWVMb2NhdGlvbiIsInJlc29sdXRpb25Mb2NhdGlvbiIsInBhcmFtZXRlcnMiLCJzdGFydF90aW1lIiwiRGF0ZSIsImdldFRpbWUiLCJ0aW1lIiwic2NyZWVuV2lkdGgiLCJzY3JlZW5IZWlnaHQiLCJpbml0IiwiYW5pbWF0ZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ0ZXh0Q29udGVudCIsInF1ZXJ5U2VsZWN0b3IiLCJnZXRDb250ZXh0IiwiZXJyb3IiLCJjcmVhdGVCdWZmZXIiLCJiaW5kQnVmZmVyIiwiQVJSQVlfQlVGRkVSIiwiYnVmZmVyRGF0YSIsIkZsb2F0MzJBcnJheSIsIlNUQVRJQ19EUkFXIiwiY3JlYXRlUHJvZ3JhbSIsImdldFVuaWZvcm1Mb2NhdGlvbiIsInZlcnRleCIsImZyYWdtZW50IiwicHJvZ3JhbSIsInZzIiwiY3JlYXRlU2hhZGVyIiwiVkVSVEVYX1NIQURFUiIsImZzIiwiRlJBR01FTlRfU0hBREVSIiwiYXR0YWNoU2hhZGVyIiwiZGVsZXRlU2hhZGVyIiwibGlua1Byb2dyYW0iLCJnZXRQcm9ncmFtUGFyYW1ldGVyIiwiTElOS19TVEFUVVMiLCJhbGVydCIsIlZBTElEQVRFX1NUQVRVUyIsImdldEVycm9yIiwic3JjIiwidHlwZSIsInNoYWRlciIsInNoYWRlclNvdXJjZSIsImNvbXBpbGVTaGFkZXIiLCJnZXRTaGFkZXJQYXJhbWV0ZXIiLCJDT01QSUxFX1NUQVRVUyIsImdldFNoYWRlckluZm9Mb2ciLCJyZXNpemVDYW52YXMiLCJldmVudCIsIndpZHRoIiwiY2xpZW50V2lkdGgiLCJoZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJ2aWV3cG9ydCIsInJlbmRlciIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNsZWFyIiwiQ09MT1JfQlVGRkVSX0JJVCIsIkRFUFRIX0JVRkZFUl9CSVQiLCJ1c2VQcm9ncmFtIiwidW5pZm9ybTFmIiwidW5pZm9ybTJmIiwidmVydGV4QXR0cmliUG9pbnRlciIsIkZMT0FUIiwiZW5hYmxlVmVydGV4QXR0cmliQXJyYXkiLCJkcmF3QXJyYXlzIiwiVFJJQU5HTEVTIiwiZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5Il0sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7QUFFQSxNQUFNQSxPQUFPLHdCQUFiOztBQUVBQyxRQUFRQyxHQUFSLENBQVksY0FBWixFQUE0QkYsS0FBS0csSUFBakM7O0FBRUE7O0FBRUEsSUFBSUMsTUFBSjtBQUFBLElBQ0lDLEVBREo7QUFBQSxJQUVJQyxNQUZKO0FBQUEsSUFHSUMsYUFISjtBQUFBLElBR21CQyxlQUhuQjtBQUFBLElBSUlDLGNBSko7QUFBQSxJQUtJQyxlQUxKO0FBQUEsSUFNSUMsWUFOSjtBQUFBLElBT0lDLGtCQVBKO0FBQUEsSUFRSUMsYUFBYTtBQUNUQyxnQkFBYyxJQUFJQyxJQUFKLEdBQVdDLE9BQVgsRUFETDtBQUVUQyxVQUFjLENBRkw7QUFHVEMsaUJBQWMsQ0FITDtBQUlUQyxrQkFBYyxDQUpMLEVBUmpCOztBQWNBQztBQUNBQzs7QUFFQSxTQUFTRCxJQUFULEdBQWdCOztBQUVaYixvQkFBZ0JlLFNBQVNDLGNBQVQsQ0FBd0IsSUFBeEIsRUFBOEJDLFdBQTlDO0FBQ0FoQixzQkFBa0JjLFNBQVNDLGNBQVQsQ0FBd0IsSUFBeEIsRUFBOEJDLFdBQWhEO0FBQ0FwQixhQUFTa0IsU0FBU0csYUFBVCxDQUF3QixRQUF4QixDQUFUOztBQUVBOztBQUVBLFFBQUk7O0FBRUFwQixhQUFLRCxPQUFPc0IsVUFBUCxDQUFtQixvQkFBbkIsQ0FBTDtBQUVILEtBSkQsQ0FJRSxPQUFPQyxLQUFQLEVBQWUsQ0FBRzs7QUFF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QUE3RCxFQUFnRSxDQUFoRTtBQUNBdkUsT0FBR3dFLHVCQUFILENBQTRCbkUsZUFBNUI7QUFDQUwsT0FBR3lFLFVBQUgsQ0FBZXpFLEdBQUcwRSxTQUFsQixFQUE2QixDQUE3QixFQUFnQyxDQUFoQztBQUNBMUUsT0FBRzJFLHdCQUFILENBQTZCdEUsZUFBN0I7QUFFSCIsImZpbGUiOiI0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNHTm9kZSBmcm9tICcuLi8uLi9zcmMvc2NlbmVfZ3JhcGgvc19nX25vZGUnO1xuXG5jb25zdCBub2RlID0gbmV3IFNHTm9kZTtcblxuY29uc29sZS5sb2coXCJoZWxsbywgaGVsbG9cIiwgbm9kZS5uYW1lKTtcblxuLy8gYmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL3BhdWxpcmlzaC93ZWJnbC1ib2lsZXJwbGF0ZVxuXG52YXIgY2FudmFzLFxuICAgIGdsLFxuICAgIGJ1ZmZlcixcbiAgICB2ZXJ0ZXhfc2hhZGVyLCBmcmFnbWVudF9zaGFkZXIsXG4gICAgY3VycmVudFByb2dyYW0sXG4gICAgdmVydGV4X3Bvc2l0aW9uLFxuICAgIHRpbWVMb2NhdGlvbixcbiAgICByZXNvbHV0aW9uTG9jYXRpb24sXG4gICAgcGFyYW1ldGVycyA9IHtcbiAgICAgICAgc3RhcnRfdGltZSAgOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcbiAgICAgICAgdGltZSAgICAgICAgOiAwLFxuICAgICAgICBzY3JlZW5XaWR0aCA6IDAsXG4gICAgICAgIHNjcmVlbkhlaWdodDogMCB9O1xuXG5pbml0KCk7XG5hbmltYXRlKCk7XG5cbmZ1bmN0aW9uIGluaXQoKSB7XG5cbiAgICB2ZXJ0ZXhfc2hhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZzJykudGV4dENvbnRlbnQ7XG4gICAgZnJhZ21lbnRfc2hhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZzJykudGV4dENvbnRlbnQ7XG4gICAgY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJ2NhbnZhcycgKTtcblxuICAgIC8vIEluaXRpYWxpc2UgV2ViR0xcblxuICAgIHRyeSB7XG5cbiAgICAgICAgZ2wgPSBjYW52YXMuZ2V0Q29udGV4dCggJ2V4cGVyaW1lbnRhbC13ZWJnbCcgKTtcblxuICAgIH0gY2F0Y2goIGVycm9yICkgeyB9XG5cbiAgICBpZiAoICFnbCApIHtcblxuICAgICAgICB0aHJvdyBcImNhbm5vdCBjcmVhdGUgd2ViZ2wgY29udGV4dFwiO1xuXG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIFZlcnRleCBidWZmZXIgKDIgdHJpYW5nbGVzKVxuXG4gICAgYnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgZ2wuYmluZEJ1ZmZlciggZ2wuQVJSQVlfQlVGRkVSLCBidWZmZXIgKTtcbiAgICBnbC5idWZmZXJEYXRhKCBnbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkoIFsgLSAxLjAsIC0gMS4wLCAxLjAsIC0gMS4wLCAtIDEuMCwgMS4wLCAxLjAsIC0gMS4wLCAxLjAsIDEuMCwgLSAxLjAsIDEuMCBdICksIGdsLlNUQVRJQ19EUkFXICk7XG5cbiAgICAvLyBDcmVhdGUgUHJvZ3JhbVxuXG4gICAgY3VycmVudFByb2dyYW0gPSBjcmVhdGVQcm9ncmFtKCB2ZXJ0ZXhfc2hhZGVyLCBmcmFnbWVudF9zaGFkZXIgKTtcblxuICAgIHRpbWVMb2NhdGlvbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbiggY3VycmVudFByb2dyYW0sICd0aW1lJyApO1xuICAgIHJlc29sdXRpb25Mb2NhdGlvbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbiggY3VycmVudFByb2dyYW0sICdyZXNvbHV0aW9uJyApO1xuXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVByb2dyYW0oIHZlcnRleCwgZnJhZ21lbnQgKSB7XG5cbiAgICB2YXIgcHJvZ3JhbSA9IGdsLmNyZWF0ZVByb2dyYW0oKTtcblxuICAgIHZhciB2cyA9IGNyZWF0ZVNoYWRlciggdmVydGV4LCBnbC5WRVJURVhfU0hBREVSICk7XG4gICAgdmFyIGZzID0gY3JlYXRlU2hhZGVyKCAnI2lmZGVmIEdMX0VTXFxucHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbiNlbmRpZlxcblxcbicgKyBmcmFnbWVudCwgZ2wuRlJBR01FTlRfU0hBREVSICk7XG5cbiAgICBpZiAoIHZzID09IG51bGwgfHwgZnMgPT0gbnVsbCApIHJldHVybiBudWxsO1xuXG4gICAgZ2wuYXR0YWNoU2hhZGVyKCBwcm9ncmFtLCB2cyApO1xuICAgIGdsLmF0dGFjaFNoYWRlciggcHJvZ3JhbSwgZnMgKTtcblxuICAgIGdsLmRlbGV0ZVNoYWRlciggdnMgKTtcbiAgICBnbC5kZWxldGVTaGFkZXIoIGZzICk7XG5cbiAgICBnbC5saW5rUHJvZ3JhbSggcHJvZ3JhbSApO1xuXG4gICAgaWYgKCAhZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlciggcHJvZ3JhbSwgZ2wuTElOS19TVEFUVVMgKSApIHtcblxuICAgICAgICBhbGVydCggXCJFUlJPUjpcXG5cIiArXG4gICAgICAgICAgICBcIlZBTElEQVRFX1NUQVRVUzogXCIgKyBnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKCBwcm9ncmFtLCBnbC5WQUxJREFURV9TVEFUVVMgKSArIFwiXFxuXCIgK1xuICAgICAgICAgICAgXCJFUlJPUjogXCIgKyBnbC5nZXRFcnJvcigpICsgXCJcXG5cXG5cIiArXG4gICAgICAgICAgICBcIi0gVmVydGV4IFNoYWRlciAtXFxuXCIgKyB2ZXJ0ZXggKyBcIlxcblxcblwiICtcbiAgICAgICAgICAgIFwiLSBGcmFnbWVudCBTaGFkZXIgLVxcblwiICsgZnJhZ21lbnQgKTtcblxuICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgIH1cblxuICAgIHJldHVybiBwcm9ncmFtO1xuXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVNoYWRlciggc3JjLCB0eXBlICkge1xuXG4gICAgdmFyIHNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlciggdHlwZSApO1xuXG4gICAgZ2wuc2hhZGVyU291cmNlKCBzaGFkZXIsIHNyYyApO1xuICAgIGdsLmNvbXBpbGVTaGFkZXIoIHNoYWRlciApO1xuXG4gICAgaWYgKCAhZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKCBzaGFkZXIsIGdsLkNPTVBJTEVfU1RBVFVTICkgKSB7XG5cbiAgICAgICAgYWxlcnQoICggdHlwZSA9PSBnbC5WRVJURVhfU0hBREVSID8gXCJWRVJURVhcIiA6IFwiRlJBR01FTlRcIiApICsgXCIgU0hBREVSOlxcblwiICsgZ2wuZ2V0U2hhZGVySW5mb0xvZyggc2hhZGVyICkgKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICB9XG5cbiAgICByZXR1cm4gc2hhZGVyO1xuXG59XG5cbmZ1bmN0aW9uIHJlc2l6ZUNhbnZhcyggZXZlbnQgKSB7XG5cbiAgICBpZiAoIGNhbnZhcy53aWR0aCAhPSBjYW52YXMuY2xpZW50V2lkdGggfHxcbiAgICAgICAgY2FudmFzLmhlaWdodCAhPSBjYW52YXMuY2xpZW50SGVpZ2h0ICkge1xuXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IGNhbnZhcy5jbGllbnRXaWR0aDtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGNhbnZhcy5jbGllbnRIZWlnaHQ7XG5cbiAgICAgICAgcGFyYW1ldGVycy5zY3JlZW5XaWR0aCA9IGNhbnZhcy53aWR0aDtcbiAgICAgICAgcGFyYW1ldGVycy5zY3JlZW5IZWlnaHQgPSBjYW52YXMuaGVpZ2h0O1xuXG4gICAgICAgIGdsLnZpZXdwb3J0KCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQgKTtcblxuICAgIH1cblxufVxuXG5mdW5jdGlvbiBhbmltYXRlKCkge1xuXG4gICAgcmVzaXplQ2FudmFzKCk7XG4gICAgcmVuZGVyKCk7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCBhbmltYXRlICk7XG5cbn1cblxuZnVuY3Rpb24gcmVuZGVyKCkge1xuXG4gICAgaWYgKCAhY3VycmVudFByb2dyYW0gKSByZXR1cm47XG5cbiAgICBwYXJhbWV0ZXJzLnRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHBhcmFtZXRlcnMuc3RhcnRfdGltZTtcblxuICAgIGdsLmNsZWFyKCBnbC5DT0xPUl9CVUZGRVJfQklUIHwgZ2wuREVQVEhfQlVGRkVSX0JJVCApO1xuXG4gICAgLy8gTG9hZCBwcm9ncmFtIGludG8gR1BVXG5cbiAgICBnbC51c2VQcm9ncmFtKCBjdXJyZW50UHJvZ3JhbSApO1xuXG4gICAgLy8gU2V0IHZhbHVlcyB0byBwcm9ncmFtIHZhcmlhYmxlc1xuXG4gICAgZ2wudW5pZm9ybTFmKCB0aW1lTG9jYXRpb24sIHBhcmFtZXRlcnMudGltZSAvIDEwMDAgKTtcbiAgICBnbC51bmlmb3JtMmYoIHJlc29sdXRpb25Mb2NhdGlvbiwgcGFyYW1ldGVycy5zY3JlZW5XaWR0aCwgcGFyYW1ldGVycy5zY3JlZW5IZWlnaHQgKTtcblxuICAgIC8vIFJlbmRlciBnZW9tZXRyeVxuXG4gICAgZ2wuYmluZEJ1ZmZlciggZ2wuQVJSQVlfQlVGRkVSLCBidWZmZXIgKTtcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKCB2ZXJ0ZXhfcG9zaXRpb24sIDIsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCApO1xuICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KCB2ZXJ0ZXhfcG9zaXRpb24gKTtcbiAgICBnbC5kcmF3QXJyYXlzKCBnbC5UUklBTkdMRVMsIDAsIDYgKTtcbiAgICBnbC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoIHZlcnRleF9wb3NpdGlvbiApO1xuXG59XG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3dlYmdsLWJvaWxlcnBsYXRlL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ })
/******/ ]);