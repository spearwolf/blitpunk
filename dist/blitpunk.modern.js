webpackJsonpblitpunk([2],{

/***/ 8:
/***/ (function(module, exports, __webpack_require__) {

!function(t,e){ true?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.blitpunk=e():t.blitpunk=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=48)}([function(t,e,r){"use strict";e.__esModule=!0;const n=e.DOM_ELEM_CANVAS="blitpunk-canvas",i=e.DOM_ELEM_SCENE="blitpunk-scene",s=e.DOM_ELEM_SPRITE_GROUP="blitpunk-sprite-group",a=e.DOM_ELEM_TEXTURE_ATLAS="blitpunk-texture-atlas";e.NODE_NAME_CANVAS=n.toUpperCase(),e.NODE_NAME_SCENE=i.toUpperCase(),e.NODE_NAME_SPRITE_GROUP=s.toUpperCase(),e.NODE_NAME_TEXTURE_ATLAS=a.toUpperCase(),e.COMP_PRIO_PROJECTION=1e3,e.COMP_PRIO_BLEND_BEFORE=500,e.COMP_PRIO_CHILDREN=100,e.COMP_PRIO_BLEND_AFTER=-500,e.ATTR_ALPHA="alpha",e.ATTR_ANTIALIAS="antialias",e.ATTR_BLEND_MODE="blend-mode",e.ATTR_CAPACITY="capacity",e.ATTR_CLEAR_COLOR="clear-color",e.ATTR_DEPTH="depth",e.ATTR_DESCRIPTOR="descriptor",e.ATTR_FLIP_Y="flip-y",e.ATTR_FRAGMENT_SHADER="fragment-shader",e.ATTR_MODULE_SRC="module-src",e.ATTR_NEAREST="nearest",e.ATTR_PREMULTIPLIED_ALPHA="premultiplied-alpha",e.ATTR_PREMULTIPLY_ALPHA="premultiply-alpha",e.ATTR_PRESERVE_DRAW="preserve-drawing-buffer",e.ATTR_PRIMITIVE="primitive",e.ATTR_PROJECTION="projection",e.ATTR_REPEATABLE="repeatable",e.ATTR_SRC="src",e.ATTR_STENCIL="stencil",e.ATTR_TEXTURE_MAP="texture-map",e.ATTR_VERTEX_SHADER="vertex-shader",e.ATTR_VO_NEW="vo-new",e.ATTR_VO_ZERO="vo-zero"},function(t,e,r){"use strict";function n(t){function e(){return++l.lastCallbackId}function r(t,e){return t.prio!==e.prio?e.prio-t.prio:t.id-e.id}function i(t){if(t)return-1===l.boundObjects.indexOf(t)&&l.boundObjects.push(t),t}function s(t,e,r){var i,s,a,o;for(s in r)r.hasOwnProperty(s)&&"function"==typeof(a=e[s])&&(i=r[s],Array.isArray(i)?(o=i[0],i=i[1]):o=n.PRIO_DEFAULT,t.on(i,o,a));return t}function c(t,e,r){function i(){var e,n,i;if(f)for(e=0;e<f;e++)"function"==typeof(i=(n=l.boundObjects[e])[t])?r(i,n):n[h]&&r(null,n)}if(!(b.silenced||b.off.indexOf(t)>=0)){var s,a,o,u=l.callbacks[t],c=l.callbacks[d],f=l.boundObjects.length,p=!1;if(u||c.length)for(a=(u=u?u.concat(c):c).length,s=0;s<a;s++)o=u[s],!p&&o&&o.prio<n.PRIO_DEFAULT&&(i(),p=!0),e(o);p||i()}}if(t[h])return t;var l={lastCallbackId:0,callbacks:{},boundObjects:[]};l.callbacks[d]=[];var b=o({},{silenced:!1,off:[]});return u(t,h,b),void 0===n.PRIO_DEFAULT&&o(n,{PRIO_MAX:Number.POSITIVE_INFINITY,PRIO_A:1e9,PRIO_B:1e7,PRIO_C:1e5,PRIO_DEFAULT:0,PRIO_LOW:-1e5,PRIO_MIN:Number.NEGATIVE_INFINITY}),t.on=function(t,i,s){var u=arguments.length;if(0!==u){var c;if(1===u){if("string"==typeof t)return void((c=b.off.indexOf(t))>=0&&b.off.splice(c,1));if("object"!=typeof t&&"function"!=typeof t)return void(f&&console.warn(p,".on() called with insufficient arguments!",arguments));s=t,t=d,i=n.PRIO_DEFAULT}2===u&&(s=i,i=n.PRIO_DEFAULT);var h=l.callbacks,g=h[t]||(h[t]=[]),m=e(),_=o({},{id:m,fn:s,prio:"number"!=typeof i?n.PRIO_DEFAULT:i,isFunction:"function"==typeof s});return g.push(_),g.sort(r),m}b.silenced&&(a(b,"silenced",!1),b.off.length=0)},t.once=function(e,r,i){var s=arguments.length;if(s&&!(s>3)){1===s?(i=e,e=d,r=n.PRIO_DEFAULT):2===s&&(i=r,r=n.PRIO_DEFAULT);var a=t.on(e,r,function(){var e=i.apply(this,arguments);return t.off(a),e});return a}f&&console.warn(p,".once() called with insufficient arguments!",arguments)},t.off=function(t){if(0!==arguments.length)if("string"!=typeof t){var e,r,n,i,s,o=l.callbacks,u="object"==typeof t;if("number"==typeof t||"function"==typeof t||u)for(s=Object.keys(o),n=0;n<s.length;n++)for(i=o[s[n]],r=0;r<i.length;r++)if(((e=i[r]).id===t||e.fn===t)&&(i.splice(r,1),!u))return;u&&(r=l.boundObjects.indexOf(t))>=0&&l.boundObjects.splice(r,1)}else-1===b.off.indexOf(t)&&b.off.push(t);else b.silenced||(a(b,"silenced",!0),b.off.length=0)},t.connect=function(t,e){var r=arguments.length;return 1===r?i(t):2===r?s(this,t,e):void(f&&console.warn(p,".connect() called with insufficient arguments!",arguments))},t.emit=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];var r,n,i,s=this;t.length>1&&"string"!=typeof t[0]&&"string"==typeof t[1]?(n=t.shift(),r=t.shift(),t[t.length-1]=n,i=t):(r=t.shift(),i=t.concat([s])),c(r,function(e){if(e.isFunction)e.fn.apply(s,t);else{var n=e.fn[r];"function"==typeof n?n.apply(e.fn,i):e.fn[h]&&e.fn.emit.apply(e.fn,[r].concat(t))}},function(t,e){t?t.apply(e,i):e.emit.apply(e,[s,r].concat(i))})},t.emitReduce=function(){function t(t){void 0!==t&&(n=t)}for(var e=new Array(arguments.length),r=0;r<e.length;++r)e[r]=arguments[r];var n,i=e.shift();0===e.length?(n={},e.push(n)):t(e[0]);var s=this,a=[i].concat(e),o=e.concat([s]);return c(i,function(r){if(r.isFunction)e[0]=n,t(r.fn.apply(s,e));else{var u=r.fn[i];"function"==typeof u?(o[0]=n,t(u.apply(r.fn,o))):r.fn[h]&&(a[1]=n,t(r.fn.emitReduce.apply(r.fn,a)))}},function(e,r){e&&(o[0]=n,t(e.apply(r,o)))}),n},t.from=function(t,e){var r=this;return new e(function(e){var n=r.on(t,function(t){e.next(t)});return function(){r.off(n)}})},t.subscribe=function(t,e,r,n){var i=this;return t.subscribe(function(t){i.emit(e,t)},r?function(t){i.emit(r,t)}:void 0,n?function(t){i.emit(n,t)}:void 0)},t}function i(t,e){var r=("string"==typeof t||"symbol"==typeof t)&&t||s(),i=n({}),o=!(!e||!e.replace),c=function(t){a(i,b,t)},l=function(t){return function(e){t.apply(i,e)}}(i.emit);return u(i,"events",[]),a(i,"id",r),i.collect=function(){return i[b]!==m&&c(m),i},i.emit=function(){var t,e=new Array(arguments.length);for(t=0;t<e.length;++t)e[t]=arguments[t];if(i[b]===g)l(e);else{if(o){var r,n=e[0];for(t=0,r=i.events.length;t<r;t++)if(i.events[t][0]===n)return void(i.events[t]=e)}i.events.push(e)}},i.play=function(){return i[b]!==g&&(c(g),i.events.forEach(l),i.events.length=0),i},i.toggle=function(){return i[b]!==g?i.play():i.collect()},i.play()}function s(){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)});return l?Symbol(t):t}function a(t,e,r){return Object.defineProperty(t,e,{value:r,configurable:!0,enumerable:!0}),t}function o(t,e){var r,n=Object.keys(e);for(r=n.length;r--;)a(t,n[r],e[n[r]]);return t}function u(t,e,r){return Object.defineProperty(t,e,{value:r,configurable:!0}),t}var c="undefined"!=typeof Map,l="undefined"!=typeof Symbol,f="undefined"!=typeof console,h=l?(Symbol.eventize||(Symbol.eventize=Symbol("eventize")),Symbol.eventize):"@@eventize",d="*",p="[eventize.js]";n.is=function(t){return!(!t||!t[h])},u(n,"EventizeNamespace",h),u(n,"queues",c?new Map:{}),n.queue=function(t){var e,r,s=arguments.length;return s>=1&&("object"==typeof t&&2!==s||(e=c?n.queues.get(t):n.queues[t]),2===s?r=arguments[1]:1===s&&"object"==typeof t&&(r=t)),e||(e=i(t,r),c?n.queues.set(e.id,e):n.queues[e.id]=e),e};var b="state",g="play",m="collect";t.exports=n},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){"object"==typeof t&&(t.destroyed||(n.is(t)&&"function"==typeof t.off&&t.off(),Object.keys(t).forEach(e=>{delete t[e]}),Object.defineProperty(t,"destroyed",{value:!0})))};const n=r(1)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r.d(e,"ARRAY_TYPE",function(){return i}),e.setMatrixArrayType=function(t){i=t},e.toRadian=function(t){return t*a},e.equals=function(t,e){return Math.abs(t-e)<=n*Math.max(1,Math.abs(t),Math.abs(e))};const n=1e-6;e.EPSILON=n;let i="undefined"!=typeof Float32Array?Float32Array:Array;const s=Math.random;e.RANDOM=s;const a=Math.PI/180},function(t,e,r){"use strict";e.__esModule=!0;const n=r(55);e.default=n},function(t,e){var r=Array.isArray;t.exports=r},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(4)),s=n(r(61));class a{constructor(t,e={}){this.resource=t,this.hints=e,this.id=e.id||(0,i.default)(),this.serial=new s.default("number"==typeof e.serial?e.serial:1)}isSynced(t){const{value:e}=this.serial;return e>0&&e===t.serial.value}needSync(t){return!this.isSynced(t)}sync(t,e){this.needSync(t)&&(e(this.resource),this.serial.value=t.serial.value)}}e.default=a},function(t,e,r){"use strict";e.__esModule=!0;const n=Object.freeze({float32:4,int16:2,int32:4,int8:1,uint16:2,uint32:4,uint8:1}),i=Object.freeze({float32:Float32Array,int16:Int16Array,int32:Int32Array,int8:Int8Array,uint16:Uint16Array,uint32:Uint32Array,uint8:Uint8Array}),s=Object.freeze({float32:t=>t.float32Array,int32:t=>t.int32Array,int16:t=>t.int16Array,int8:t=>t.int8Array,uint32:t=>t.uint32Array,uint16:t=>t.uint16Array,uint8:t=>t.uint8Array}),a=Object.freeze({float32:"FLOAT",int16:"SHORT",int32:"INT",int8:"BYTE",uint16:"UNSIGNED_SHORT",uint32:"UNSIGNED_INT",uint8:"UNSIGNED_BYTE"});e.BYTES_PER_ELEMENT=n,e.TYPED_ARRAY_CONSTRUCTOR=i,e.TYPED_ARRAY_GETTER=s,e.GL_ITEM_TYPES=a},function(t,e,r){"use strict";e.__esModule=!0;class n{constructor(t,e,r){this.name=t,this.type=e,this._value=r,this.serial=0}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,++this.serial)}touch(){++this.serial}}e.default=n,n.TYPE=Object.freeze({UNIFORM:"uniform",ATTRIB:"attrib",TEXTURE_2D:"tex2d"})},function(t,e,r){var n=r(20).Symbol;t.exports=n},function(t,e,r){var n=r(5),i=r(139),s=r(140),a=r(19);t.exports=function(t,e){return n(t)?t:i(t,e)?[t]:s(a(t))}},function(t,e,r){var n=r(24)(Object,"create");t.exports=n},function(t,e,r){var n=r(44);t.exports=function(t,e){for(var r=t.length;r--;)if(n(t[r][0],e))return r;return-1}},function(t,e,r){var n=r(165);t.exports=function(t,e){var r=t.__data__;return n(e)?r["string"==typeof e?"string":"hash"]:r.map}},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(6)),i=r(7);class s{constructor(t,e,r,a=s.USAGE.DYNAMIC,o){this.resourceRef=new n.default(this,{usage:a}),this.descriptor=t,this.capacity=e,r instanceof ArrayBuffer?this.float32Array=new Float32Array(r):r instanceof DataView?this.float32Array=new Float32Array(r.buffer,r.byteOffset,r.byteLength/4):r instanceof Float32Array?this.float32Array=r:this.float32Array=new Float32Array(new ArrayBuffer(e*t.bytesPerVO)),this.resourceRef.hints.typedArray=this.float32Array;const{buffer:u,bufferByteOffset:c,bufferByteLength:l}=this;t.typeList.filter(t=>"float32"!==t).forEach(t=>{this[`${t}Array`]=new i.TYPED_ARRAY_CONSTRUCTOR[t](u,c,l/i.BYTES_PER_ELEMENT[t])}),this.enableAutotouch="boolean"==typeof o?o:a===s.USAGE.DYNAMIC,Object.freeze(this)}touch(){this.resourceRef.serial.touch()}get buffer(){return this.float32Array.buffer}get bufferByteOffset(){return this.float32Array.byteOffset}get bufferByteLength(){return this.float32Array.byteLength}copy(t,e){let r=0;void 0===e&&(r=e*(this.descriptor.bytesPerVO>>2)),this.float32Array.set(t.float32Array,r)}subarray(t,e=1){return new s(this.descriptor,e,new DataView(this.buffer,this.bufferByteOffset+t*this.descriptor.bytesPerVO,e*this.descriptor.bytesPerVO))}}e.default=s,s.USAGE=Object.freeze({STATIC:"static",DYNAMIC:"dynamic"})},function(t,e,r){"use strict";function n(t,e,r){if(t.attrNames){let e=t.attrNames[r];if(void 0!==e)return e}return e+"_"+r}function i(t,e){return function(r){return t(this.voArray)[e+r]}}function s(t,e,r,n,i){return function(){const s=t(this.voArray);let a,o;for(a=0;a<r;++a)for(o=0;o<e;++o)s[a*n+i+o]=arguments[o]}}function a(t,e){return function(){return t(this.voArray)[e]}}function o(t,e,r,n,i){return function(){const s=t(this.voArray);let a,o;for(a=0;a<r;++a)for(o=0;o<e;++o)s[a*n+i+o]=arguments[a*e+o]}}function u(t,e,r,n){return function(i){const s=t(this.voArray);for(let t=0;t<e;++t)s[t*r+n]=i}}function c(t){return t[0].toUpperCase()+t.substr(1)}e.__esModule=!0;var l=r(7);class f{constructor(t,e,r,n,i,s,a){this.name=t,this.type=e,this.size=r,this.uniform=s,this.attrNames=a,this.bytesPerElement=l.BYTES_PER_ELEMENT[this.type],this.bytesPerVertex=this.bytesPerElement*r,this.byteOffset="number"!=typeof i?n*this.bytesPerElement:i,this.offset="number"!=typeof n?i/this.bytesPerElement:n}vertexAttrCount(t){return t.bytesPerVertex/this.bytesPerElement}static defineProperties(t,e,r){const{name:f}=t,h=l.TYPED_ARRAY_GETTER[t.type],d=r.vertexCount,p=t.vertexAttrCount(r),b=t.byteOffset/t.bytesPerElement;let g,m;if(1===t.size)if(t.uniform){const r=a(h,b),n=u(h,d,p,b);t.getValue=(t=>r.call(t)),t.setValue=((t,e)=>n.call(t,e)),e[f]={get:r,set:n,enumerable:!0}}else{const n=o(h,1,d,p,b);t.setValue=((t,e)=>n.apply(t,e)),e["set"+c(f)]={value:n,enumerable:!0};const i=[];for(g=0;g<r.vertexCount;++g){const t=a(h,b+g*p);i.push(t),e[f+g]={get:t,set:o(h,1,1,0,b+g*p),enumerable:!0}}t.getValue=function(t,e){return i[e].call(t)}}else if(t.size>=2)if(t.uniform){const r=i(h,b),o=s(h,t.size,d,p,b);for(t.getValue=((t,e,n)=>r.call(t,n)),t.setValue=((t,e)=>o.apply(t,e)),e["get"+c(f)]={value:r,enumerable:!0},e["set"+c(f)]={value:o,enumerable:!0},g=0;g<t.size;++g)e[n(t,f,g)]={get:a(h,b+g),set:u(h,d,p,b+g),enumerable:!0}}else{const i=o(h,t.size,d,p,b);t.setValue=((t,e)=>i.apply(t,e)),e["set"+c(f)]={value:i,enumerable:!0};const s=[];for(g=0;g<r.vertexCount;++g){const r=[];for(m=0;m<t.size;++m){const i=n(t,f,m)+g,s=a(h,b+g*p+m);r.push(s),e[i]={get:s,set:o(h,1,1,0,b+g*p+m),enumerable:!0}}s.push(r)}t.getValue=function(t,e,r){return s[e][r].call(t)}}}}e.default=f},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(30)),s=n(r(6));const a=(t,e,r)=>null!=t&&void 0!==t[e]?t[e]:r;class o{constructor(t,e,r,n=0,i=0,u){if(t instanceof o)this.parent=t,this.image=null;else{if(!("object"==typeof t&&"width"in t&&"height"in t))throw new Error("new Texture() panic: unexpected source argument!");this.image=t,this.parent=null,this._resourceRef=new s.default(this,{flipY:a(u,"flipY",!1),repeatable:a(u,"repeatable",!1),premultiplyAlpha:a(u,"premultiplyAlpha",!0),nearest:a(u,"nearest",!1)}),"origWidth"in t&&"origHeight"in t&&(e=t.origWidth,r=t.origHeight)}this._width=e,this._height=r,this.x=n,this.y=i}get root(){return this.parent&&this.parent.root||this}get imgEl(){const{root:t}=this;return t.image.imgEl||t.image}get resourceRef(){return this._resourceRef||this.root.resourceRef}get width(){return"number"==typeof this._width?this._width:this.image?this.image.width:this.parent?this.root.width:0}set width(t){this._width=t}get height(){return"number"==typeof this._height?this._height:this.image?this.image.height:this.parent?this.root.height:0}set height(t){this._height=t}get minS(){let t=this.x,e=this;for(;null!=(e=e.parent);)t+=e.x;return t/this.root.image.width}get minT(){let t=this.y,e=this;for(;null!=(e=e.parent);)t+=e.y;return t/this.root.image.height}get maxS(){let t=this.x+this.width,e=this;for(;null!=(e=e.parent);)t+=e.x;return t/this.root.image.width}get maxT(){let t=this.y+this.height,e=this;for(;null!=(e=e.parent);)t+=e.y;return t/this.root.image.height}static load(t,e){return new i.default(t).complete.then(t=>new o(t,void 0,void 0,0,0,e))}}e.default=o},function(t,e,r){"use strict";e.__esModule=!0;class n{constructor(t){this.shaderVars=t}pushVar(t){this.shaderVars.forEach(t.pushVar.bind(t))}popVar(t){this.shaderVars.forEach(t.popVar.bind(t))}}e.default=n},function(t,e,r){"use strict";function n(t){const e=t.length;if(e>=2&&t.startsWith('"')&&t.endsWith('"'))return t.substr(1,t.length-2);if(e>=2&&t.startsWith("{")&&t.endsWith("}"))return JSON.parse(t);if(e>=2&&t.startsWith("[")&&t.endsWith("]"))return JSON.parse(t);if(e>=2&&t.startsWith("'")&&t.endsWith("'"))return t.substr(1,t.length-2);if(e>0&&u.exec(t))return parseFloat(t);let r=c.exec(t);if(r)return new URL(r[1].trim());if(r=l.exec(t))return new Float32Array(r.slice(1,3).map(parseFloat));if(r=f.exec(t))return new Float32Array(r.slice(1,4).map(parseFloat));if(r=h.exec(t))return new Float32Array(r.slice(1,5).map(parseFloat));switch(t){case"null":return null;case"undefined":return;case"true":return!0;case"false":return!1;default:return t}}function i(t,e){const r=t.length;let n=e;if(n>=r)return r;do{if(" "!==t[n]&&"\t"!==t[n])return n;++n}while(n<r);return r}function s(t,e,r=";"){const n=t.length;let i=e,s=null;do{if(null===s)switch(t[i]){case r:return i;case"'":s="'",++i;break;case'"':s='"',++i;break;case"(":s=")",++i;break;case"{":s="}",++i;break;case"\\":i+=2;break;default:++i}else t[i]===s?(s=null,++i):"\\"===t[i]?i+=2:++i}while(i<n);return n}function a(t){if("string"!=typeof t||!t)return;const e=[],r=t.length;let n=i(t,0);do{const r=s(t,n,";");r>n&&e.push(t.slice(n,r)),n=i(t,r+1)}while(n<r);return e}function o(t){const e=a(t);if(e)return e.map(t=>{if(d.exec(t))return{value:t.trim()};const e=t.indexOf(":");return-1===e?{value:t.trim()}:{key:t.slice(0,e).trim(),value:t.substr(e+1).trim()}}).filter(t=>!(""===t.key&&""===t.value))}e.__esModule=!0;const u=/^[-+]?(\d+\.|\.)?\d+(e\d+|e[-+]\d+)?$/,c=/^url\(\s*([^)]+)\)$/,l=/^vec2\(\s*([-+\d.e]+)\s*,\s*([-+\d.e]+)\s*\)$/,f=/^vec3\(\s*([-+\d.e]+)\s*,\s*([-+\d.e]+)\s*,\s*([-+\d.e]+)\s*\)$/,h=/^vec4\(\s*([-+\d.e]+)\s*,\s*([-+\d.e]+)\s*,\s*([-+\d.e]+)\s*,\s*([-+\d.e]+)\s*\)$/,d=/^\s*[a-zA-Z]+\(\s*[^)]+\)\s*$/;e.default=function(t){if("string"!=typeof t)return t;const e=t.trim();if(e.startsWith("{")&&e.endsWith("}"))return JSON.parse(e);const r=o(e);if(r&&0!==r.length){if("key"in r[0]){const t={};return r.forEach(({key:e,value:r})=>{t[e]=n(r)}),t}{const t=r.map(({value:t})=>n(t));return 1===t.length?t[0]:t}}},e.splitIntoPropTokens=a,e.splitIntoProps=o,e.indexOfNextNonWhitespace=i,e.indexOfNextSeperator=s,e.parseValue=n},function(t,e,r){var n=r(110);t.exports=function(t){return null==t?"":n(t)}},function(t,e,r){var n=r(111),i="object"==typeof self&&self&&self.Object===Object&&self,s=n||i||Function("return this")();t.exports=s},function(t,e,r){var n=r(22),i=r(23),s="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||i(t)&&n(t)==s}},function(t,e,r){var n=r(9),i=r(113),s=r(114),a="[object Null]",o="[object Undefined]",u=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?o:a:u&&u in Object(t)?i(t):s(t)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,r){var n=r(147),i=r(152);t.exports=function(t,e){var r=i(t,e);return n(r)?r:void 0}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,r){var n=r(21),i=1/0;t.exports=function(t){if("string"==typeof t||n(t))return t;var e=t+"";return"0"==e&&1/t==-i?"-0":e}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(49)),s=n(r(32)),a=r(0),o=n(r(39));customElements.get(a.DOM_ELEM_CANVAS)?(0,o.default)("custom elements for <blitpunk> already defined!"):((0,o.default)("defining custom elements for <blitpunk> .."),(0,i.default)());const u={utils:{sample:s.default}},c=customElements.whenDefined(a.DOM_ELEM_CANVAS).then(()=>((0,o.default)(".. <blitpunk> elements are defined!"),u));e.default=(()=>c)},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(4));class i{constructor(t,e){this.id=(0,n.default)(),this.type=t,this.source=e instanceof HTMLElement?e.textContent:e}}e.default=i,i.VERTEX_SHADER="VERTEX_SHADER",i.FRAGMENT_SHADER="FRAGMENT_SHADER"},function(t,e,r){"use strict";function n(t,e){t.imgEl=(0,s.isPowerOf2)(e.width)&&(0,s.isPowerOf2)(e.height)?e:i(e),t.origWidth=e.width,t.origHeight=e.height}function i(t){const e=(0,s.findNextPowerOf2)(t.width),r=(0,s.findNextPowerOf2)(t.height),n=document.createElement("canvas");return n.width=e,n.height=r,n.getContext("2d").drawImage(t,0,0),n}e.__esModule=!0;var s=r(76);class a{constructor(t){let e;"string"==typeof t?(e=new window.Image).src=t:e=t,!1===e.complete||0===e.width&&0===e.height?(this.imgEl=null,this.complete=new Promise(t=>{const r=e.onload;e.onload=(()=>{r&&r.call(e),n(this,e),t(this)})})):(n(this,e),this.complete=Promise.resolve(this))}get isComplete(){return null!=this.imgEl}get width(){return this.imgEl&&this.imgEl.width||0}get height(){return this.imgEl&&this.imgEl.height||0}}e.default=a},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(16)),s=n(r(78)),a=n(r(32));class o{constructor(t,e=null){this.rootTexture=t,this.spec=e,this.frames=new Map}addFrame(t,e,r,n,s){this.frames.set(t,new i.default(this.rootTexture,e,r,n,s))}getFrame(t){return this.frames.get(t)}getRandomFrame(){return(0,a.default)(Array.from(this.frames.values()))}getRandomFrameName(){return(0,a.default)(this.frameNames())}frameNames(){return Array.from(this.frames.keys())}static load(t,e=null,r=null,n){return s.default.load(t,e||{}).then(t=>t.createTextureAtlas(r||t.imageUrl,n))}}e.default=o},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){return t[Math.random()*t.length|0]}},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(8));class i extends n.default{constructor(t,e){super(t,n.default.TYPE.TEXTURE_2D,e),this.texture=null}syncTextureAndValue(t){if(null!=this.texture){const e=t.syncTexture(this.texture);this.value=e.bind()}}}e.default=i},function(t,e,r){"use strict";e.__esModule=!0;class n{constructor(t,e=n.ARRAY_BUFFER,r=n.STATIC_DRAW){this.glx=t;const{gl:i}=t;this.target=i[e],this.usage=i[r],this.glBuffer=i.createBuffer()}bindBuffer(){this.glx.bindBuffer(this.target,this.glBuffer)}bufferData(t){this.bindBuffer(),this.glx.gl.bufferData(this.target,t,this.usage)}}e.default=n,n.ARRAY_BUFFER="ARRAY_BUFFER",n.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",n.STATIC_DRAW="STATIC_DRAW",n.DYNAMIC_DRAW="DYNAMIC_DRAW"},function(t,e,r){var n;!function(i){function s(t,e){if(t=t||"",e=e||{},t instanceof s)return t;if(!(this instanceof s))return new s(t,e);var r=a(t);this._originalInput=t,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=q(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=q(this._r)),this._g<1&&(this._g=q(this._g)),this._b<1&&(this._b=q(this._b)),this._ok=r.ok,this._tc_id=Y++}function a(t){var e={r:0,g:0,b:0},r=1,n=null,i=null,s=null,a=!1,u=!1;return"string"==typeof t&&(t=V(t)),"object"==typeof t&&(U(t.r)&&U(t.g)&&U(t.b)?(e=o(t.r,t.g,t.b),a=!0,u="%"===String(t.r).substr(-1)?"prgb":"rgb"):U(t.h)&&U(t.s)&&U(t.v)?(n=k(t.s),i=k(t.v),e=f(t.h,n,i),a=!0,u="hsv"):U(t.h)&&U(t.s)&&U(t.l)&&(n=k(t.s),s=k(t.l),e=c(t.h,n,s),a=!0,u="hsl"),t.hasOwnProperty("a")&&(r=t.a)),r=O(r),{ok:a,format:t.format||u,r:G(255,H(e.r,0)),g:G(255,H(e.g,0)),b:G(255,H(e.b,0)),a:r}}function o(t,e,r){return{r:255*S(t,255),g:255*S(e,255),b:255*S(r,255)}}function u(t,e,r){t=S(t,255),e=S(e,255),r=S(r,255);var n,i,s=H(t,e,r),a=G(t,e,r),o=(s+a)/2;if(s==a)n=i=0;else{var u=s-a;switch(i=o>.5?u/(2-s-a):u/(s+a),s){case t:n=(e-r)/u+(e<r?6:0);break;case e:n=(r-t)/u+2;break;case r:n=(t-e)/u+4}n/=6}return{h:n,s:i,l:o}}function c(t,e,r){function n(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}var i,s,a;if(t=S(t,360),e=S(e,100),r=S(r,100),0===e)i=s=a=r;else{var o=r<.5?r*(1+e):r+e-r*e,u=2*r-o;i=n(u,o,t+1/3),s=n(u,o,t),a=n(u,o,t-1/3)}return{r:255*i,g:255*s,b:255*a}}function l(t,e,r){t=S(t,255),e=S(e,255),r=S(r,255);var n,i,s=H(t,e,r),a=G(t,e,r),o=s,u=s-a;if(i=0===s?0:u/s,s==a)n=0;else{switch(s){case t:n=(e-r)/u+(e<r?6:0);break;case e:n=(r-t)/u+2;break;case r:n=(t-e)/u+4}n/=6}return{h:n,s:i,v:o}}function f(t,e,r){t=6*S(t,360),e=S(e,100),r=S(r,100);var n=i.floor(t),s=t-n,a=r*(1-e),o=r*(1-s*e),u=r*(1-(1-s)*e),c=n%6;return{r:255*[r,o,a,a,u,r][c],g:255*[u,r,r,o,a,a][c],b:255*[a,a,u,r,r,o][c]}}function h(t,e,r,n){var i=[I(q(t).toString(16)),I(q(e).toString(16)),I(q(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function d(t,e,r,n,i){var s=[I(q(t).toString(16)),I(q(e).toString(16)),I(q(r).toString(16)),I(D(n))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function p(t,e,r,n){return[I(D(n)),I(q(t).toString(16)),I(q(e).toString(16)),I(q(r).toString(16))].join("")}function b(t,e){e=0===e?0:e||10;var r=s(t).toHsl();return r.s-=e/100,r.s=P(r.s),s(r)}function g(t,e){e=0===e?0:e||10;var r=s(t).toHsl();return r.s+=e/100,r.s=P(r.s),s(r)}function m(t){return s(t).desaturate(100)}function _(t,e){e=0===e?0:e||10;var r=s(t).toHsl();return r.l+=e/100,r.l=P(r.l),s(r)}function y(t,e){e=0===e?0:e||10;var r=s(t).toRgb();return r.r=H(0,G(255,r.r-q(-e/100*255))),r.g=H(0,G(255,r.g-q(-e/100*255))),r.b=H(0,G(255,r.b-q(-e/100*255))),s(r)}function M(t,e){e=0===e?0:e||10;var r=s(t).toHsl();return r.l-=e/100,r.l=P(r.l),s(r)}function v(t,e){var r=s(t).toHsl(),n=(r.h+e)%360;return r.h=n<0?360+n:n,s(r)}function x(t){var e=s(t).toHsl();return e.h=(e.h+180)%360,s(e)}function A(t){var e=s(t).toHsl(),r=e.h;return[s(t),s({h:(r+120)%360,s:e.s,l:e.l}),s({h:(r+240)%360,s:e.s,l:e.l})]}function E(t){var e=s(t).toHsl(),r=e.h;return[s(t),s({h:(r+90)%360,s:e.s,l:e.l}),s({h:(r+180)%360,s:e.s,l:e.l}),s({h:(r+270)%360,s:e.s,l:e.l})]}function T(t){var e=s(t).toHsl(),r=e.h;return[s(t),s({h:(r+72)%360,s:e.s,l:e.l}),s({h:(r+216)%360,s:e.s,l:e.l})]}function R(t,e,r){e=e||6,r=r||30;var n=s(t).toHsl(),i=360/r,a=[s(t)];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,a.push(s(n));return a}function w(t,e){e=e||6;for(var r=s(t).toHsv(),n=r.h,i=r.s,a=r.v,o=[],u=1/e;e--;)o.push(s({h:n,s:i,v:a})),a=(a+u)%1;return o}function O(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function S(t,e){L(t)&&(t="100%");var r=N(t);return t=G(e,H(0,parseFloat(t))),r&&(t=parseInt(t*e,10)/100),i.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function P(t){return G(1,H(0,t))}function C(t){return parseInt(t,16)}function L(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function N(t){return"string"==typeof t&&-1!=t.indexOf("%")}function I(t){return 1==t.length?"0"+t:""+t}function k(t){return t<=1&&(t=100*t+"%"),t}function D(t){return i.round(255*parseFloat(t)).toString(16)}function F(t){return C(t)/255}function U(t){return!!Z.CSS_UNIT.exec(t)}function V(t){t=t.replace(z,"").replace(B,"").toLowerCase();var e=!1;if(W[t])t=W[t],e=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=Z.rgb.exec(t))?{r:r[1],g:r[2],b:r[3]}:(r=Z.rgba.exec(t))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Z.hsl.exec(t))?{h:r[1],s:r[2],l:r[3]}:(r=Z.hsla.exec(t))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Z.hsv.exec(t))?{h:r[1],s:r[2],v:r[3]}:(r=Z.hsva.exec(t))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Z.hex8.exec(t))?{r:C(r[1]),g:C(r[2]),b:C(r[3]),a:F(r[4]),format:e?"name":"hex8"}:(r=Z.hex6.exec(t))?{r:C(r[1]),g:C(r[2]),b:C(r[3]),format:e?"name":"hex"}:(r=Z.hex4.exec(t))?{r:C(r[1]+""+r[1]),g:C(r[2]+""+r[2]),b:C(r[3]+""+r[3]),a:F(r[4]+""+r[4]),format:e?"name":"hex8"}:!!(r=Z.hex3.exec(t))&&{r:C(r[1]+""+r[1]),g:C(r[2]+""+r[2]),b:C(r[3]+""+r[3]),format:e?"name":"hex"}}function j(t){var e,r;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),r=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA"),"small"!==r&&"large"!==r&&(r="small"),{level:e,size:r}}var z=/^\s+/,B=/\s+$/,Y=0,q=i.round,G=i.min,H=i.max,$=i.random;s.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,r,n,s,a,o=this.toRgb();return t=o.r/255,e=o.g/255,r=o.b/255,n=t<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4),s=e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4),a=r<=.03928?r/12.92:i.pow((r+.055)/1.055,2.4),.2126*n+.7152*s+.0722*a},setAlpha:function(t){return this._a=O(t),this._roundA=q(100*this._a)/100,this},toHsv:function(){var t=l(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=l(this._r,this._g,this._b),e=q(360*t.h),r=q(100*t.s),n=q(100*t.v);return 1==this._a?"hsv("+e+", "+r+"%, "+n+"%)":"hsva("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=u(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=u(this._r,this._g,this._b),e=q(360*t.h),r=q(100*t.s),n=q(100*t.l);return 1==this._a?"hsl("+e+", "+r+"%, "+n+"%)":"hsla("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return h(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return d(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:q(this._r),g:q(this._g),b:q(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+q(this._r)+", "+q(this._g)+", "+q(this._b)+")":"rgba("+q(this._r)+", "+q(this._g)+", "+q(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:q(100*S(this._r,255))+"%",g:q(100*S(this._g,255))+"%",b:q(100*S(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+q(100*S(this._r,255))+"%, "+q(100*S(this._g,255))+"%, "+q(100*S(this._b,255))+"%)":"rgba("+q(100*S(this._r,255))+"%, "+q(100*S(this._g,255))+"%, "+q(100*S(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(X[h(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+p(this._r,this._g,this._b,this._a),r=e,n=this._gradientType?"GradientType = 1, ":"";if(t){var i=s(t);r="#"+p(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+r+")"},toString:function(t){var e=!!t;t=t||this._format;var r=!1,n=this._a<1&&this._a>=0;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(r=this.toRgbString()),"prgb"===t&&(r=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(r=this.toHexString()),"hex3"===t&&(r=this.toHexString(!0)),"hex4"===t&&(r=this.toHex8String(!0)),"hex8"===t&&(r=this.toHex8String()),"name"===t&&(r=this.toName()),"hsl"===t&&(r=this.toHslString()),"hsv"===t&&(r=this.toHsvString()),r||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return s(this.toString())},_applyModification:function(t,e){var r=t.apply(null,[this].concat([].slice.call(e)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(_,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(M,arguments)},desaturate:function(){return this._applyModification(b,arguments)},saturate:function(){return this._applyModification(g,arguments)},greyscale:function(){return this._applyModification(m,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(R,arguments)},complement:function(){return this._applyCombination(x,arguments)},monochromatic:function(){return this._applyCombination(w,arguments)},splitcomplement:function(){return this._applyCombination(T,arguments)},triad:function(){return this._applyCombination(A,arguments)},tetrad:function(){return this._applyCombination(E,arguments)}},s.fromRatio=function(t,e){if("object"==typeof t){var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]="a"===n?t[n]:k(t[n]));t=r}return s(t,e)},s.equals=function(t,e){return!(!t||!e)&&s(t).toRgbString()==s(e).toRgbString()},s.random=function(){return s.fromRatio({r:$(),g:$(),b:$()})},s.mix=function(t,e,r){r=0===r?0:r||50;var n=s(t).toRgb(),i=s(e).toRgb(),a=r/100;return s({r:(i.r-n.r)*a+n.r,g:(i.g-n.g)*a+n.g,b:(i.b-n.b)*a+n.b,a:(i.a-n.a)*a+n.a})},s.readability=function(t,e){var r=s(t),n=s(e);return(i.max(r.getLuminance(),n.getLuminance())+.05)/(i.min(r.getLuminance(),n.getLuminance())+.05)},s.isReadable=function(t,e,r){var n,i,a=s.readability(t,e);switch(i=!1,(n=j(r)).level+n.size){case"AAsmall":case"AAAlarge":i=a>=4.5;break;case"AAlarge":i=a>=3;break;case"AAAsmall":i=a>=7}return i},s.mostReadable=function(t,e,r){var n,i,a,o,u=null,c=0;i=(r=r||{}).includeFallbackColors,a=r.level,o=r.size;for(var l=0;l<e.length;l++)(n=s.readability(t,e[l]))>c&&(c=n,u=s(e[l]));return s.isReadable(t,u,{level:a,size:o})||!i?u:(r.includeFallbackColors=!1,s.mostReadable(t,["#fff","#000"],r))};var W=s.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},X=s.hexNames=function(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}(W),Z=function(){var t="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",e="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+e),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+e),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+e),hsva:new RegExp("hsva"+r),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();void 0!==t&&t.exports?t.exports=s:void 0!==(n=function(){return s}.call(e,r,e,t))&&(t.exports=n)}(Math)},function(t,e,r){"use strict";function n(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=r[0],d=r[1],p=r[2],b=r[3],g=r[4],m=r[5],_=r[6],y=r[7],M=r[8];return t[0]=h*n+d*a+p*c,t[1]=h*i+d*o+p*l,t[2]=h*s+d*u+p*f,t[3]=b*n+g*a+m*c,t[4]=b*i+g*o+m*l,t[5]=b*s+g*u+m*f,t[6]=_*n+y*a+M*c,t[7]=_*i+y*o+M*l,t[8]=_*s+y*u+M*f,t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new s.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},e.clone=function(t){let e=new s.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromValues=function(t,e,r,n,i,a,o,u,c){let l=new s.ARRAY_TYPE(9);return l[0]=t,l[1]=e,l[2]=r,l[3]=n,l[4]=i,l[5]=a,l[6]=o,l[7]=u,l[8]=c,l},e.set=function(t,e,r,n,i,s,a,o,u,c){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=s,t[5]=a,t[6]=o,t[7]=u,t[8]=c,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,e){if(t===e){let r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},e.invert=function(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],u=e[6],c=e[7],l=e[8],f=l*a-o*c,h=-l*s+o*u,d=c*s-a*u,p=r*f+n*h+i*d;return p?(p=1/p,t[0]=f*p,t[1]=(-l*n+i*c)*p,t[2]=(o*n-i*a)*p,t[3]=h*p,t[4]=(l*r-i*u)*p,t[5]=(-o*r+i*s)*p,t[6]=d*p,t[7]=(-c*r+n*u)*p,t[8]=(a*r-n*s)*p,t):null},e.adjoint=function(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],u=e[6],c=e[7],l=e[8];return t[0]=a*l-o*c,t[1]=i*c-n*l,t[2]=n*o-i*a,t[3]=o*u-s*l,t[4]=r*l-i*u,t[5]=i*s-r*o,t[6]=s*c-a*u,t[7]=n*u-r*c,t[8]=r*a-n*s,t},e.determinant=function(t){let e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],a=t[5],o=t[6],u=t[7],c=t[8];return e*(c*s-a*u)+r*(-c*i+a*o)+n*(u*i-s*o)},e.multiply=n,e.translate=function(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=r[0],d=r[1];return t[0]=n,t[1]=i,t[2]=s,t[3]=a,t[4]=o,t[5]=u,t[6]=h*n+d*a+c,t[7]=h*i+d*o+l,t[8]=h*s+d*u+f,t},e.rotate=function(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=Math.sin(r),d=Math.cos(r);return t[0]=d*n+h*a,t[1]=d*i+h*o,t[2]=d*s+h*u,t[3]=d*a-h*n,t[4]=d*o-h*i,t[5]=d*u-h*s,t[6]=c,t[7]=l,t[8]=f,t},e.scale=function(t,e,r){let n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},e.fromRotation=function(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},e.fromQuat=function(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=r+r,o=n+n,u=i+i,c=r*a,l=n*a,f=n*o,h=i*a,d=i*o,p=i*u,b=s*a,g=s*o,m=s*u;return t[0]=1-f-p,t[3]=l-m,t[6]=h+g,t[1]=l+m,t[4]=1-c-p,t[7]=d-b,t[2]=h-g,t[5]=d+b,t[8]=1-c-f,t},e.normalFromMat4=function(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],p=e[12],b=e[13],g=e[14],m=e[15],_=r*o-n*a,y=r*u-i*a,M=r*c-s*a,v=n*u-i*o,x=n*c-s*o,A=i*c-s*u,E=l*b-f*p,T=l*g-h*p,R=l*m-d*p,w=f*g-h*b,O=f*m-d*b,S=h*m-d*g,P=_*S-y*O+M*w+v*R-x*T+A*E;return P?(P=1/P,t[0]=(o*S-u*O+c*w)*P,t[1]=(u*R-a*S-c*T)*P,t[2]=(a*O-o*R+c*E)*P,t[3]=(i*O-n*S-s*w)*P,t[4]=(r*S-i*R+s*T)*P,t[5]=(n*R-r*O-s*E)*P,t[6]=(b*A-g*x+m*v)*P,t[7]=(g*M-p*A-m*y)*P,t[8]=(p*x-b*M+m*_)*P,t):null},e.projection=function(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t},e.subtract=i,e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},e.equals=function(t,e){let r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=e[0],d=e[1],p=e[2],b=e[3],g=e[4],m=e[5],_=e[6],y=e[7],M=e[8];return Math.abs(r-h)<=s.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(n-d)<=s.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(i-p)<=s.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-b)<=s.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(o-g)<=s.EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(u-m)<=s.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-_)<=s.EPSILON*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(l-y)<=s.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(f-M)<=s.EPSILON*Math.max(1,Math.abs(f),Math.abs(M))};var s=r(3);const a=n;e.mul=a;const o=i;e.sub=o},function(t,e,r){"use strict";function n(){let t=new p.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function i(t){let e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function s(t,e,r){let n=new p.ARRAY_TYPE(3);return n[0]=t,n[1]=e,n[2]=r,n}function a(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function o(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function u(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function c(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)}function l(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}function f(t){let e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function h(t,e){let r=e[0],n=e[1],i=e[2],s=r*r+n*n+i*i;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t}function d(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}Object.defineProperty(e,"__esModule",{value:!0}),e.create=n,e.clone=function(t){var e=new p.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=i,e.fromValues=s,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},e.subtract=a,e.multiply=o,e.divide=u,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},e.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},e.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t},e.distance=c,e.squaredDistance=l,e.squaredLength=f,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=h,e.dot=d,e.cross=function(t,e,r){let n=e[0],i=e[1],s=e[2],a=r[0],o=r[1],u=r[2];return t[0]=i*u-s*o,t[1]=s*a-n*u,t[2]=n*o-i*a,t},e.lerp=function(t,e,r,n){let i=e[0],s=e[1],a=e[2];return t[0]=i+n*(r[0]-i),t[1]=s+n*(r[1]-s),t[2]=a+n*(r[2]-a),t},e.hermite=function(t,e,r,n,i,s){let a=s*s,o=a*(2*s-3)+1,u=a*(s-2)+s,c=a*(s-1),l=a*(3-2*s);return t[0]=e[0]*o+r[0]*u+n[0]*c+i[0]*l,t[1]=e[1]*o+r[1]*u+n[1]*c+i[1]*l,t[2]=e[2]*o+r[2]*u+n[2]*c+i[2]*l,t},e.bezier=function(t,e,r,n,i,s){let a=1-s,o=a*a,u=s*s,c=o*a,l=3*s*o,f=3*u*a,h=u*s;return t[0]=e[0]*c+r[0]*l+n[0]*f+i[0]*h,t[1]=e[1]*c+r[1]*l+n[1]*f+i[1]*h,t[2]=e[2]*c+r[2]*l+n[2]*f+i[2]*h,t},e.random=function(t,e){e=e||1;let r=2*p.RANDOM()*Math.PI,n=2*p.RANDOM()-1,i=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=n*e,t},e.transformMat4=function(t,e,r){let n=e[0],i=e[1],s=e[2],a=r[3]*n+r[7]*i+r[11]*s+r[15];return a=a||1,t[0]=(r[0]*n+r[4]*i+r[8]*s+r[12])/a,t[1]=(r[1]*n+r[5]*i+r[9]*s+r[13])/a,t[2]=(r[2]*n+r[6]*i+r[10]*s+r[14])/a,t},e.transformMat3=function(t,e,r){let n=e[0],i=e[1],s=e[2];return t[0]=n*r[0]+i*r[3]+s*r[6],t[1]=n*r[1]+i*r[4]+s*r[7],t[2]=n*r[2]+i*r[5]+s*r[8],t},e.transformQuat=function(t,e,r){let n=e[0],i=e[1],s=e[2],a=r[0],o=r[1],u=r[2],c=r[3],l=c*n+o*s-u*i,f=c*i+u*n-a*s,h=c*s+a*i-o*n,d=-a*n-o*i-u*s;return t[0]=l*c+d*-a+f*-u-h*-o,t[1]=f*c+d*-o+h*-a-l*-u,t[2]=h*c+d*-u+l*-o-f*-a,t},e.rotateX=function(t,e,r,n){let i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[0],s[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),s[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t},e.rotateY=function(t,e,r,n){let i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),s[1]=i[1],s[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t},e.rotateZ=function(t,e,r,n){let i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),s[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),s[2]=i[2],t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t},e.angle=function(t,e){let r=s(t[0],t[1],t[2]),n=s(e[0],e[1],e[2]);h(r,r),h(n,n);let i=d(r,n);return i>1?0:i<-1?Math.PI:Math.acos(i)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){let r=t[0],n=t[1],i=t[2],s=e[0],a=e[1],o=e[2];return Math.abs(r-s)<=p.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-a)<=p.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-o)<=p.EPSILON*Math.max(1,Math.abs(i),Math.abs(o))};var p=r(3);const b=a;e.sub=b;const g=o;e.mul=g;const m=u;e.div=m;const _=c;e.dist=_;const y=l;e.sqrDist=y;const M=i;e.len=M;const v=f;e.sqrLen=v;const x=function(){let t=n();return function(e,r,n,i,s,a){let o,u;for(r||(r=3),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,o=n;o<u;o+=r)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],s(t,t,a),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2];return e}}();e.forEach=x},function(t,e,r){"use strict";function n(){let t=new d.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function s(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function a(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function o(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function u(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],s=e[3]-t[3];return Math.sqrt(r*r+n*n+i*i+s*s)}function c(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],s=e[3]-t[3];return r*r+n*n+i*i+s*s}function l(t){let e=t[0],r=t[1],n=t[2],i=t[3];return Math.sqrt(e*e+r*r+n*n+i*i)}function f(t){let e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}function h(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=r*r+n*n+i*i+s*s;return a>0&&(a=1/Math.sqrt(a),t[0]=r*a,t[1]=n*a,t[2]=i*a,t[3]=s*a),t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=n,e.clone=function(t){let e=new d.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.fromValues=function(t,e,r,n){let i=new d.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.set=function(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},e.subtract=i,e.multiply=s,e.divide=a,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},e.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t},e.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},e.scale=o,e.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},e.distance=u,e.squaredDistance=c,e.length=l,e.squaredLength=f,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},e.normalize=h,e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},e.lerp=function(t,e,r,n){let i=e[0],s=e[1],a=e[2],o=e[3];return t[0]=i+n*(r[0]-i),t[1]=s+n*(r[1]-s),t[2]=a+n*(r[2]-a),t[3]=o+n*(r[3]-o),t},e.random=function(t,e){return e=e||1,t[0]=d.RANDOM(),t[1]=d.RANDOM(),t[2]=d.RANDOM(),t[3]=d.RANDOM(),h(t,t),o(t,t,e),t},e.transformMat4=function(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*s+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*s+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*s+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*s+r[15]*a,t},e.transformQuat=function(t,e,r){let n=e[0],i=e[1],s=e[2],a=r[0],o=r[1],u=r[2],c=r[3],l=c*n+o*s-u*i,f=c*i+u*n-a*s,h=c*s+a*i-o*n,d=-a*n-o*i-u*s;return t[0]=l*c+d*-a+f*-u-h*-o,t[1]=f*c+d*-o+h*-a-l*-u,t[2]=h*c+d*-u+l*-o-f*-a,t[3]=e[3],t},e.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){let r=t[0],n=t[1],i=t[2],s=t[3],a=e[0],o=e[1],u=e[2],c=e[3];return Math.abs(r-a)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-o)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-u)<=d.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(s-c)<=d.EPSILON*Math.max(1,Math.abs(s),Math.abs(c))};var d=r(3);const p=i;e.sub=p;const b=s;e.mul=b;const g=a;e.div=g;const m=u;e.dist=m;const _=c;e.sqrDist=_;const y=l;e.len=y;const M=f;e.sqrLen=M;const v=function(){let t=n();return function(e,r,n,i,s,a){let o,u;for(r||(r=4),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,o=n;o<u;o+=r)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],t[3]=e[o+3],s(t,t,a),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2],e[o+3]=t[3];return e}}();e.forEach=v},function(t,e,r){"use strict";e.__esModule=!0;const n="undefined"!=typeof console?"function"==typeof console.debug?(...t)=>console.debug(...t):(...t)=>console.log(...t):()=>1,i="undefined"!=typeof console?"function"==typeof console.error?(...t)=>console.error(...t):(...t)=>console.log(...t):()=>1;e.default=n,e.error=i},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e,r){if(!t.hasAttribute(e))return r;switch(t.getAttribute(e).toLowerCase()){case"true":case"yes":case"on":case"":case e:return!0}return!1}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,...e){const r=t.parentElement;if(!r||1!==r.nodeType)return;const{nodeName:i}=r;if(e.includes(i))return r;if(!n.includes(i))return r};const n=["BODY","HTML"]},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.default=function(t){t.blitpunkCanvas=(0,i.default)(t),t.blitpunk=t.blitpunkCanvas.blitpunk,t.entityManager=t.blitpunk.entityManager,t.entity=t.entityManager.createEntity(),t.entity.on(t),t.parentSceneElement=(0,s.default)(t,"scene"),t.parentScene=t.parentSceneElement.scene,t.parentScene.children.appendChild(t.entity)};var i=n(r(121)),s=n(r(122))},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){t.parentScene.children.removeChild(t.entity),t.parentScene=null,t.parentSceneElement=null,t.entity.off(t),t.entityManager.destroyEntity(t.entity),t.entity=null,t.blitpunk=null,t.blitpunkCanvas=null}},function(t,e){t.exports=function(t,e){return t===e||t!==t&&e!==e}},function(t,e,r){var n=r(24),i=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e){var r=9007199254740991,n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,r){var n=r(175),i=r(23),s=Object.prototype,a=s.hasOwnProperty,o=s.propertyIsEnumerable,u=n(function(){return arguments}())?n:function(t){return i(t)&&a.call(t,"callee")&&!o.call(t,"callee")};t.exports=u},function(t,e,r){t.exports=r(27)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.default=function(){window.customElements.define(u.DOM_ELEM_CANVAS,i.default),window.customElements.define(u.DOM_ELEM_SCENE,s.default),window.customElements.define(u.DOM_ELEM_TEXTURE_ATLAS,a.default),window.customElements.define(u.DOM_ELEM_SPRITE_GROUP,o.default)};var i=n(r(50)),s=n(r(119)),a=n(r(120)),o=n(r(124)),u=r(0);r(193)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(51)),s=n(r(27)),a=n(r(40)),o=r(0);const u=r(1),c=t=>({alpha:(0,a.default)(t,o.ATTR_ALPHA,!1),depth:(0,a.default)(t,o.ATTR_DEPTH,!0),stencil:(0,a.default)(t,o.ATTR_STENCIL,!1),antialias:(0,a.default)(t,o.ATTR_ANTIALIAS,!1),premultipliedAlpha:(0,a.default)(t,o.ATTR_PREMULTIPLIED_ALPHA,!1),preserveDrawingBuffer:(0,a.default)(t,o.ATTR_PRESERVE_DRAW,!1)});class l extends HTMLElement{constructor(t){const e=super(t);return u(e),e.blitpunk=new i.default,e.blitpunk.entity.on(e),e}get blitpunkApi(){return s.default}get blitpunkNodeName(){return o.NODE_NAME_CANVAS}get canvas(){return this.blitpunk.canvas}get width(){return this.blitpunk.width}get height(){return this.blitpunk.height}get glx(){return this.blitpunk.glx}get renderer(){return this.blitpunk.renderer}get time(){return this.blitpunk.time}get startTime(){return this.blitpunk.startTime}get frameNo(){return this.blitpunk.frameNo}get componentRegistry(){return this.blitpunk.componentRegistry}get entityManager(){return this.blitpunk.entityManager}get resourceLibrary(){return this.blitpunk.resourceLibrary}get textureLibrary(){return this.blitpunk.textureLibrary}get scene(){return this.blitpunk.entity}static get observedAttributes(){return[o.ATTR_BLEND_MODE,o.ATTR_CLEAR_COLOR,o.ATTR_PROJECTION]}onKeydown(t){t.ctrlKey&&"d"===t.key&&(console.group("<blitpunk/>","frameNo",this.frameNo),console.log(this),console.log(this.blitpunk),this.blitpunk.entity.emit("debug",this),this.renderer.emit("debug",this.renderer),console.groupEnd())}set clearColor(t){this.blitpunk.clearColor=t}get clearColor(){const t=this.blitpunk.clearColor;if(t)return 1===t.getAlpha()?t.toHexString():t.toRgbString()}connectedCallback(){this.blitpunk.contextAttributes=Object.freeze(c(this)),this.onKeydown=this.onKeydown.bind(this),document.body.addEventListener("keydown",this.onKeydown),this.blitpunk.start(this)}disconnectedCallback(){this.blitpunk.destroy(),document.body.removeEventListener("keydown",this.onKeydown)}attributeChangedCallback(t,e,r){switch(t){case o.ATTR_CLEAR_COLOR:this.clearColor=r;break;case o.ATTR_BLEND_MODE:case o.ATTR_PROJECTION:this.blitpunk.componentRegistry.createOrUpdateComponent(this.blitpunk.entity,t,r)}}}e.default=l},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){let r;try{r=t.getContext("webgl",e)}catch(t){(0,d.error)(t)}if(!r)try{r=t.getContext("experimental-webgl",e)}catch(t){(0,d.error)(t)}if(!r)throw new Error("cannot create webgl1 context");return r}e.__esModule=!0;var s=n(r(52)),a=n(r(53)),o=n(r(58)),u=n(r(75)),c=n(r(79)),l=n(r(88)),f=n(r(90)),h=n(r(2)),d=r(39);const p=r(1),b=r(35),g=()=>window.performance.now()/1e3,m=(t,e,r)=>t&&e in t?t[e]:"function"==typeof r?r():r;class _{constructor(t){p(this);const e=m.bind(null,t);this.componentRegistry=e("componentRegistry",()=>new s.default),this.entityManager=e("entityManager",()=>new a.default),this.resourceLibrary=e("resourceLibrary",()=>new o.default),this.textureLibrary=e("textureLibrary",()=>new u.default),this.canvas=e("canvas",()=>document.createElement("canvas")),this.contextAttributes={alpha:e("alpha",!1),depth:e("depth",!1),stencil:e("stencil",!1),antialias:e("antialias",!1),premultipliedAlpha:e("premultipliedAlpha",!1),preserveDrawingBuffer:e("preserveDrawingBuffer",!1)},this.time=e("time",0),this.lastFrameTime=0,this.timeFrameOffset=0,this.frameNo=e("frameNo",0),this.clearColor=e("clearColor"),this.createGlContext=e("createGlContext",()=>()=>i(this.canvas,this.contextAttributes)),(0,f.default)(this.componentRegistry),this.entity=this.entityManager.createEntity(),this.entity.setComponent("blitpunk",this),this.entity.setComponent("resourceLibrary",this.resourceLibrary),this.entity.setComponent("textureLibrary",this.textureLibrary),this.componentRegistry.createComponent(this.entity,"children"),this.el=null,this.started=!1,this.stopped=!1,this.destroyed=!1}get clearColor(){return this.renderer?this.renderer.clearColor:this._clearColor}set clearColor(t){this._clearColor=null==t?t:b(t),this.renderer&&this.renderer.setClearColor(this._clearColor)}get canStart(){return(!this.started||this.started&&this.stopped)&&!this.destroyed}start(t=this){if(this.canStart){if(this.stopped)return this.stopped=!1,this.resize(),void this.requestAnimate();this.el=t,this.started=!0,this.glx=new c.default(this.createGlContext()),this.renderer=new l.default(this.glx),this._clearColor&&this.renderer.setClearColor(this._clearColor),this.startTime=g(),this.el.appendChild(this.canvas),this.resize(),this.requestAnimate()}}requestAnimate(){this.rafSubscription=window.requestAnimationFrame(()=>this.animate())}cancelAnimate(){window.cancelAnimationFrame(this.rafSubscription)}get canStop(){return this.started&&!this.stopped&&!this.destroyed}stop(){this.canStop&&(this.stopped=!0,this.cancelAnimate())}destroy(){if(!this.destroyed){this.cancelAnimate();try{this.glx.destroy()}catch(t){(0,d.error)("blitpunk->destroy(WebGlContext) panic!",t)}try{this.renderer.destroy()}catch(t){(0,d.error)("blitpunk->destroy(WebGlRenderer) panic!",t)}try{this.textureLibrary.destroy()}catch(t){(0,d.error)("blitpunk->destroy(TextureLibrary) panic!",t)}try{this.resourceLibrary.destroy()}catch(t){(0,d.error)("blitpunk->destroy(ResourceLibrary) panic!",t)}try{this.entityManager.destroy()}catch(t){(0,d.error)("blitpunk->destroy(EntityManager) panic!",t)}this.el.removeChild(this.canvas),(0,h.default)(this)}}get canAnimate(){return this.started&&!this.stopped&&!this.destroyed}animate(){this.canAnimate&&(this.renderFrame(),this.requestAnimate())}renderFrame(){++this.frameNo,this.time=g()-this.startTime,this.lastFrameTime&&(this.timeFrameOffset=this.time-this.lastFrameTime),this.lastFrameTime=this.time,this.resize(),this.renderer.renderFrame(this.entity,this)}resize(){const t="inline"===window.getComputedStyle(this.el,null).display?this.el.parentNode:this.el,{canvas:e}=this,r=window.devicePixelRatio||1;let n=t.clientWidth,i=t.clientHeight;e.style.width=n+"px",e.style.height=i+"px";const s=Math.round(n*r),a=Math.round(i*r);s===e.width&&a===e.height||(e.width=s,e.height=a),s===this.width&&a===this.height||(this.width=s,this.height=a,this.glx.gl.viewport(0,0,s,a))}}e.default=_},function(t,e,r){"use strict";e.__esModule=!0;class n{constructor(){this.registry=new Map}registerComponent(t,e){return this.registry.set(t,e),this}createComponent(t,e,r){const n=this.registry.get(e).create(t,r);return t.setComponent(e,n),this}updateComponent(t,e,r){const n=t[e];return this.registry.get(e).update(n,r),this}createOrUpdateComponent(t,e,r){return null!=t[e]?this.updateComponent(t,e,r):this.createComponent(t,e,r),this}}e.default=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(54)),s=n(r(2));class a{constructor(){this.entities=new Map}createEntity(){const t=new i.default;return this.entities.set(t.id,t),t}getEntity(t){return this.entities.get(t)}destroyEntity(t){const e=this.entities.get(t);return!!e&&(e.destroy(),this.entities.delete(t),!0)}destroyAllEntities(){for(const t of this.entities.keys())this.destroyEntity(t)}destroy(){this.destroyAllEntities(),this.entities.clear(),(0,s.default)(this)}}e.default=a},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(4));const i=r(1),s=t=>{for(const e of t.components.keys())t.destroyComponent(e)};class a{constructor(){this.components=new Map,this.id=(0,n.default)(),i(this)}hasComponent(t){return this.components.has(t)}setComponent(t,e){if(this[t])throw new Error(`Component name "${t}" is already assigned!`);return this.components.set(t,e),this[t]=e,e.connectedEntity&&e.connectedEntity(this),this}destroyComponent(t){if(this.components.delete(t)){const e=this[t];delete this[t],e.disconnectedEntity&&e.disconnectedEntity(this)}return this}destroy(){this.emit("destroy",this),s(this)}}e.default=a},function(t,e,r){var n=r(56),i=r(57);t.exports=function(t,e,r){var s=e&&r||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var o=0;o<16;++o)e[s+o]=a[o];return e||i(a)}},function(t,e,r){(function(e){var r,n=e.crypto||e.msCrypto;if(n&&n.getRandomValues){var i=new Uint8Array(16);r=function(){return n.getRandomValues(i),i}}if(!r){var s=new Array(16);r=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),s[e]=t>>>((3&e)<<3)&255;return s}}t.exports=r}).call(e,r(28))},function(t,e){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,i=r;return i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(59)),s=n(r(29)),a=n(r(2)),o=n(r(66));class u{constructor(){this.descriptors=new Map,this.vertexShaders=new Map,this.fragmentShaders=new Map,(0,o.default)(this)}destroy(){this.descriptors.clear(),this.vertexShaders.clear(),this.fragmentShaders.clear(),(0,a.default)(this)}addDescriptor(t,e){return this.descriptors.set(t,new i.default(e)),this}addVertexShader(t,e){return this.vertexShaders.set(t,new s.default(s.default.VERTEX_SHADER,e)),this}addFragmentShader(t,e){return this.fragmentShaders.set(t,new s.default(s.default.FRAGMENT_SHADER,e)),this}findDescriptor(t){return this.descriptors.get(t)}findVertexShader(t){return this.vertexShaders.get(t)}findFragmentShader(t){return this.fragmentShaders.get(t)}}e.default=u},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(60),s=n(r(14)),a=n(r(62)),o=n(r(63)),u=n(r(64)),c=n(r(65));class l{constructor({vertexCount:t,attributes:e,aliases:r,proto:n}){this.vertexCount=parseInt(t,10),(0,u.default)(this,e),(0,c.default)(this,r),(0,a.default)(this,n),(0,o.default)(this),Object.keys(this.attr).forEach(t=>Object.freeze(this.attr[t])),Object.freeze(this.attr),Object.freeze(this)}createVOArray(t=1,e){return new s.default(this,t,null,e)}createVO(t){return(0,i.createVO)(Object.create(this.voPrototype),this,t)}hasAttribute(t,e){const r=this.attr[t];return r&&r.size===e}get maxIndexedVOPoolSize(){return Math.floor(65536/this.vertexCount)}}e.default=l},function(t,e,r){"use strict";e.__esModule=!0,e.createVO=function(t,e,r){if(t.descriptor=e||(r?r.descriptor:null),!t.descriptor)throw new Error("could not detect VODescriptor!");if(t.voArray=r||t.descriptor.createVOArray(),t.descriptor!==t.voArray.descriptor&&(t.descriptor.vertexCount!==t.voArray.descriptor.vertexCount||t.descriptor.vertexAttrCount!==t.voArray.descriptor.vertexAttrCount))throw new Error("Incompatible vertex object descriptors!");return t}},function(t,e,r){"use strict";e.__esModule=!0;class n{constructor(t=1){this.value=t}touch(){++this.value}}e.default=n},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e){const r={toArray:{value:function(e){const r=[],n=Array.isArray(e)?e.map(e=>t.attr[e]):t.attrList,i=n.length;for(let e=0;e<t.vertexCount;++e)for(let t=0;t<i;++t){const i=n[t];for(let t=0;t<i.size;++t)r.push(i.getValue(this,e,t))}return r}}};Object.keys(t.attr).forEach(e=>{const i=t.attr[e];n.default.defineProperties(i,r,t)}),t.voPrototype=Object.create("object"==typeof e?e:{},r)};var n=function(t){return t&&t.__esModule?t:{default:t}}(r(15))},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){t.typedArrays={float32:!1,int16:!1,int32:!1,int8:!1,uint16:!1,uint32:!1,uint8:!1},Object.keys(t.attr).forEach(e=>{t.typedArrays[t.attr[e].type]=!0}),Object.freeze(t.typedArrays),t.typeList=Object.keys(t.typedArrays).filter(e=>t.typedArrays[e]).sort()}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e){if(t.attr={},t.attrNames=[],Array.isArray(e)){let r=0,s=0;for(let a=0;a<e.length;++a){const o=e[a];if(void 0===o.size)throw new Error("vertex object attribute descriptor has no size!");const u=o.type||"float32";void 0!==o.name&&(t.attrNames.push(o.name),t.attr[o.name]=new i.default(o.name,u,o.size,r,s,!!o.uniform,o.attrNames)),r+=o.size,s+=n.BYTES_PER_ELEMENT[u]*o.size}t.rightPadBytesPerVertex=s%4>0?4-s%4:0,t.bytesPerVertex=s+t.rightPadBytesPerVertex,t.bytesPerVO=t.bytesPerVertex*t.vertexCount,t.vertexAttrCount=r}t.attrList=t.attrNames.map(e=>t.attr[e])};var n=r(7),i=function(t){return t&&t.__esModule?t:{default:t}}(r(15))},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e){"object"==typeof e&&Object.keys(e).forEach(r=>{let i=e[r];"string"==typeof i?void 0!==(i=t.attr[i])&&(t.attr[r]=i):t.attr[r]=new n.default(r,i.type,i.size,i.offset,i.byteOffset,!!i.uniform,i.attrNames)})};var n=function(t){return t&&t.__esModule?t:{default:t}}(r(15))},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){t.addDescriptor("simple",n.description).addVertexShader("simple",n.vertexShader).addFragmentShader("simple",n.fragmentShader)};var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(67))},function(t,e,r){"use strict";e.__esModule=!0,e.description=e.fragmentShader=e.vertexShader=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(68));e.vertexShader=[`\n\n  attribute vec2 pos2d;\n  attribute float posZ;\n  attribute vec2 uv;\n  attribute vec2 translate;\n  attribute float rotate;\n  attribute float scale;\n  attribute float opacity;\n\n  uniform mat4 viewMatrix;\n\n  varying vec4 vTextureCoordScaleOpacity;\n\n  `,(0,n.default)("rotateZ",0,0,1),`\n\n  void main(void)\n  {\n    mat4 rotationMatrix = rotateZ(rotate);\n    gl_Position = viewMatrix * ((rotationMatrix * (vec4(scale, scale, scale, 1.0) * vec4(pos2d.xy, posZ, 1.0))) + vec4(translate.xy, 0.0, 0.0));\n    vTextureCoordScaleOpacity = vec4(uv.xy, opacity, 0.0);\n  }\n`],e.fragmentShader=`\n\n  precision mediump float;\n\n  varying vec4 vTextureCoordScaleOpacity;\n  uniform sampler2D tex;\n\n  void main(void) {\n    gl_FragColor = vTextureCoordScaleOpacity.z * texture2D(tex, vec2(vTextureCoordScaleOpacity.s, vTextureCoordScaleOpacity.t));\n  }\n\n`,e.description={vertexCount:4,attributes:[{name:"position",type:"float32",size:3,attrNames:["x","y","z"]},{name:"rotate",type:"float32",size:1,uniform:!0},{name:"texCoords",type:"float32",size:2,attrNames:["s","t"]},{name:"translate",type:"float32",size:2,attrNames:["tx","ty"],uniform:!0},{name:"scale",type:"float32",size:1,uniform:!0},{name:"opacity",type:"float32",size:1,uniform:!0}],aliases:{pos2d:{size:2,type:"float32",offset:0},posZ:{size:1,type:"float32",offset:2,uniform:!0},uv:"texCoords"},proto:{setTexCoordsByViewport(t,e,r,n){let i=0===t.x?0:t.x/e,s=(t.x+t.width)/e,a=1-(t.y+t.height)/r,o=0===t.y?1:1-t.y/r;void 0!==n&&(i*=n,s*=n,a*=n,o*=n),this.setTexCoords(i,a,s,a,s,o,i,o)},setTexCoordsByTexture(t){const e=t.minS,r=t.minT,n=t.maxS,i=t.maxT;this.setTexCoords(e,r,n,r,n,i,e,i)},setSize(t,e){const r=.5*t,n=.5*(null==e?t:e);this.setPos2d(-r,n,r,n,r,-n,-r,-n)},get width(){return this.x1-this.x3},get height(){return this.y0-this.y2},get rotateDegree(){return 180*this.rotate/Math.PI},set rotateDegree(t){this.rotate=t*(Math.PI/180)},get z(){return this.z0},set z(t){this.z0=t,this.z1=t,this.z2=t,this.z3=t}}}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.default=function(t="rotate",e=0,r=0,n=1){return[`mat4 ${t}(float angle) {`,"float s = sin(angle);","float c = cos(angle);","float oc = 1.0 - c;",(0,i.default)((0,s.default)((0,u.default)((0,a.default)("oc",e*e),"c"),(0,o.default)((0,a.default)("oc",e*r),(0,a.default)(n,"s")),(0,u.default)((0,a.default)("oc",n*e),(0,a.default)(r,"s")),0,(0,u.default)((0,a.default)("oc",e*r),(0,a.default)(n,"s")),(0,u.default)((0,a.default)("oc",r*r),"c"),(0,o.default)((0,a.default)("oc",r*n),(0,a.default)(e,"s")),0,(0,o.default)((0,a.default)("oc",n*e),(0,a.default)(r,"s")),(0,u.default)((0,a.default)("oc",r*n),(0,a.default)(e,"s")),(0,u.default)((0,a.default)("oc",n*n),"c"))),"}"]};var i=n(r(69)),s=n(r(70)),a=n(r(72)),o=n(r(73)),u=n(r(74))},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){return`return ${t};`}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t=0,e=0,r=0,i=0,s=0,a=0,o=0,u=0,c=0,l=0,f=0,h=0,d=0,p=0,b=0,g=1,m=n.default){const _=m||(t=>t+"");return`mat4(${_(t)}, ${_(e)}, ${_(r)}, ${_(i)}, ${_(s)}, ${_(a)}, ${_(o)}, ${_(u)}, ${_(c)}, ${_(l)}, ${_(f)}, ${_(h)}, ${_(d)}, ${_(p)}, ${_(b)}, ${_(g)})`};var n=function(t){return t&&t.__esModule?t:{default:t}}(r(71))},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){const e=(t+"").trim();return e.match(/^[0-9]+$/)?e+".0":e}},function(t,e,r){"use strict";function n(t){return"number"==typeof t}e.__esModule=!0,e.default=((t,e)=>{if(n(e)&&n(t))return t*e;if(n(t))switch(t){case 0:return 0;case 1:return e;default:return`${t} * ${e}`}else{if(!n(e))return`${t} * ${e}`;switch(e){case 0:return 0;case 1:return t;default:return`${t} * ${e}`}}})},function(t,e,r){"use strict";function n(t){return"number"==typeof t}e.__esModule=!0,e.default=function(t,e){if(n(t)&&n(e))return t-e;if(n(t))switch(t){case 0:return`-${e}`;default:return`${t} - ${e}`}else{if(!n(e))return`${t} - ${e}`;switch(e){case 0:return t;default:return`${t} - ${e}`}}}},function(t,e,r){"use strict";function n(t){return"number"==typeof t}e.__esModule=!0,e.default=function(t,e){if(n(t)&&n(e))return t+e;if(n(t))switch(t){case 0:return e;default:return`${t} + ${e}`}else{if(!n(e))return`${t} + ${e}`;switch(e){case 0:return t;default:return`${t} + ${e}`}}}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(16)),s=n(r(77)),a=n(r(31)),o=n(r(33)),u=n(r(2));class c{constructor(){this.states=new Map,this.shaderVars=new Map}destroy(){this.states.clear(),this.shaderVars.clear(),(0,u.default)(this)}loadTexture(t,e=t,r){const n=new s.default(i.default.load(e,r));return this.states.set(t,n),n.promise}loadTextureAtlas(t,e=t,r){const n=a.default.load(e,null,null,r),i=new s.default(n.then(t=>(i.atlas=t,t.rootTexture)));return this.states.set(t,i),n}getTextureAtlas(t){return this.states.get(t).atlas}whenLoaded(t,e,r){const n=this.states.get(t);if(void 0===n||!n.isReady)return;let i=this.shaderVars.get(e);void 0===i&&(i=new o.default(e),this.shaderVars.set(e,i)),i.texture=n.texture,r(i)}}e.default=c},function(t,e,r){"use strict";e.__esModule=!0;e.maxOf=((t,e)=>t>e?t:e),e.findNextPowerOf2=function(t){let e=1;for(;t>e;)e<<=1;return e},e.isPowerOf2=(t=>0!==t&&0==(t&t-1))},function(t,e,r){"use strict";e.__esModule=!0;class n{constructor(t,e){this.texture=null,this.atlas=null,this.promise=Promise.resolve(t).then(t=>(this.texture=t,t)).catch(t=>{console.error("TextureState error:",t)}),Promise.resolve(e).then(t=>{this.atlas=t})}get isReady(){return null!=this.texture}}e.default=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(16)),s=n(r(31)),a=n(r(30));class o{constructor(t){this.jsonDef=t,this.frameNames=Object.keys(t.frames)}get frames(){return this.jsonDef.frames}get meta(){return this.jsonDef.meta}get imageUrl(){return this.meta.image}createTextureAtlas(t=null,e){return Promise.resolve(t).then(t=>{if("function"==typeof t)return Promise.resolve(t(this)).then(t=>"string"==typeof t?new a.default(t).complete:t);if("string"==typeof t)return new a.default(t).complete;if(t)return t;throw new Error("TextureAtlasSpec.createTextureAtlas(): no image found!")}).then(t=>{const r=new i.default(t,void 0,void 0,0,0,e),n=new s.default(r,this);for(let t of Object.keys(this.frames)){const{frame:e}=this.frames[t];n.addFrame(t,e.w,e.h,e.x,e.y)}return n})}static load(t,e){return window.fetch(t,e).then(t=>t.json()).then(t=>new o(t))}}e.default=o},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){const{gl:e}=t;t.DEPTH_BITS=e.getParameter(e.DEPTH_BITS),t.MAX_TEXTURE_IMAGE_UNITS=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}e.__esModule=!0;var s=n(r(80)),a=n(r(87)),o=n(r(2));class u{constructor(t){Object.defineProperty(this,"gl",{value:t}),i(this),this.resourceLibrary=new s.default(this),this.boundBuffers=new Map,this.currentProgram=0,this.enabledVertexAttribLocations=[],this.textureManager=new a.default(this),this.boundTextures=new Array(this.MAX_TEXTURE_IMAGE_UNITS);for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]={TEXTURE_2D:null};this.readCurrentState(),this.activeTexture(0)}destroy(){this.textureManager.destroy(),this.boundBuffers.clear(),this.resourceLibrary.destroy(),(0,o.default)(this)}blend(t){const{gl:e}=this;t.enable?(this.blendEnabled||(e.enable(e.BLEND),this.blendEnabled=!0),e.blendFunc(e[t.sfactor],e[t.dfactor])):this.blendEnabled&&(e.disable(e.BLEND),this.blendEnabled=!1)}activeTexture(t){const{gl:e}=this,r=e.TEXTURE0+t;this.activeTexUnit!==r&&(this.activeTexUnit=r,e.activeTexture(this.activeTexUnit))}bindTexture2d(t){const{gl:e}=this,r=this.boundTextures[this.activeTexUnit-e.TEXTURE0];r.TEXTURE_2D!==t&&(r.TEXTURE_2D=t,e.bindTexture(e.TEXTURE_2D,t))}readCurrentState(){const{gl:t}=this;this.boundBuffers.set(t.ARRAY_BUFFER,t.getParameter(t.ARRAY_BUFFER_BINDING)),this.boundBuffers.set(t.ELEMENT_ARRAY_BUFFER,t.getParameter(t.ELEMENT_ARRAY_BUFFER_BINDING)),this.currentProgram=t.getParameter(t.CURRENT_PROGRAM),this.blendEnabled=t.getParameter(t.BLEND)}bindBuffer(t,e){this.boundBuffers.get(t)!==e&&(this.gl.bindBuffer(t,e),this.boundBuffers.set(t,e))}useProgram(t){return this.currentProgram!==t&&(this.gl.useProgram(t),this.currentProgram=t,!0)}enableVertexAttribArrays(t){const{gl:e}=this;this.enabledVertexAttribLocations.filter(e=>-1===t.indexOf(e)).forEach(r=>{e.disableVertexAttribArray(r),this.enabledVertexAttribLocations.splice(t.indexOf(r),1)}),t.forEach(t=>{-1===this.enabledVertexAttribLocations.indexOf(t)&&(e.enableVertexAttribArray(t),this.enabledVertexAttribLocations.push(t))})}}e.default=u},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(6)),s=n(r(81)),a=n(r(83)),o=n(r(34)),u=n(r(86)),c=n(r(2));const l=Object.freeze({static:o.default.STATIC_DRAW,dynamic:o.default.DYNAMIC_DRAW});class f{constructor(t){Object.defineProperty(this,"glx",{value:t}),this.vertexShader=new Map,this.fragmentShader=new Map,this.shaderProgram=new Map,this.buffer=new Map,this.texture=new Map}destroy(){this.texture.clear(),this.buffer.clear(),this.shaderProgram.clear(),this.fragmentShader.clear(),this.vertexShader.clear(),(0,c.default)(this)}loadVertexShader(t){let e=this.vertexShader.get(t.id);return e||(e=new s.default(this.glx,t),this.vertexShader.set(t.id,e)),e}loadFragementShader(t){let e=this.fragmentShader.get(t.id);return e||(e=new s.default(this.glx,t),this.vertexShader.set(t.id,e)),e}loadProgram(t){let e=this.shaderProgram.get(t.id);return e||(e=new a.default(this.glx,t),this.shaderProgram.set(t.id,e)),e}loadBuffer(t){let e=this.buffer.get(t.id);if(!e){const r=t.hints.target||o.default.ARRAY_BUFFER,n=new o.default(this.glx,r,l[t.hints.usage]);e=new i.default(n,{id:t.id,serial:0}),this.buffer.set(t.id,e)}return e}findBuffer(t){return this.buffer.get(t.id)}loadTexture(t){let e=this.texture.get(t.id);if(!e){const r=new u.default(this.glx,t.resource.imgEl,t.hints.flipY,t.hints.repeatable,t.hints.premultiplyAlpha,t.hints.nearest);e=new i.default(r,{id:t.id,serial:0}),this.texture.set(t.id,e)}return e}}e.default=f},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){const{gl:e}=t.glx,{glShader:r,source:n}=t,i=(0,a.default)({glx:t.glx},n.source);if(e.shaderSource(r,i),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){const i=e.getShaderInfoLog(r);console.error(i),console.group("shader-info"),console.debug("shaderSource",t),console.log(n),console.groupEnd();const s=new Error("WebGlShader compile panic!");throw s.webGlShader=t,s.shaderInfoLog=i,s}}e.__esModule=!0;var s=n(r(29)),a=n(r(82));class o{constructor(t,e){if(this.glx=t,!(e instanceof s.default))throw new Error("WebGlShader panic! source must be an instance of ShaderSource!");this.source=e;const{gl:r}=t;this.shaderType=r[e.type],this.glShader=r.createShader(this.shaderType),i(this),Object.freeze(this)}}e.default=o},function(t,e,r){"use strict";function n(t,e){return"string"==typeof e?e:"function"==typeof e?n(t,e(t)):Array.isArray(e)?e.map(n.bind(null,t)).join("\n"):e+""}e.__esModule=!0,e.default=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){const{gl:e}=t.glx,r=e.getProgramParameter(t.glProgram,e.ACTIVE_ATTRIBUTES);t.attributes={},t.attributeNames=[],t.attributeLocations=[];for(let e=0;e<r;++e){const r=new u.default(t,e);t.attributes[r.name]=r,t.attributeNames.push(r.name),t.attributeLocations.push(r.location)}Object.freeze(t.attributes)}function s(t){const{gl:e}=t.glx,r=e.getProgramParameter(t.glProgram,e.ACTIVE_UNIFORMS);t.uniforms={},t.uniformNames=[];for(let e=0;e<r;++e){const r=new o.default(t,e);t.uniforms[r.name]=r,t.uniformNames.push(r.name)}Object.freeze(t.uniforms)}function a(t,e,r){const{gl:n}=t.glx,{glProgram:i}=t;if(n.attachShader(i,e),n.attachShader(i,r),n.linkProgram(i),!n.getProgramParameter(i,n.LINK_STATUS)){const e=new Error("WebGlProgram link panic!");throw e.webGlProgram=t,e}}e.__esModule=!0;var o=n(r(84)),u=n(r(85));class c{constructor(t,e){this.glx=t,this.vertexShader=t.resourceLibrary.loadVertexShader(e.vertexShader),this.fragmentShader=t.resourceLibrary.loadFragementShader(e.fragmentShader);const{gl:r}=t;this.glProgram=r.createProgram(),a(this,this.vertexShader.glShader,this.fragmentShader.glShader),s(this),i(this),Object.freeze(this)}use(){const{glx:t}=this;return!!t.useProgram(this.glProgram)&&(t.enableVertexAttribArrays(this.attributeLocations),!0)}loadUniforms(t,e){this.uniformNames.forEach(r=>{let n=t.curUniform(r);null==n&&(null==(n=t.curTex2d(r))&&console.error("[WebGlProgram] could not load uniform:",r),n.syncTextureAndValue(e)),this.uniforms[r].setValue(n.value)})}loadAttributes(t,e){this.attributeNames.forEach(r=>{const n=t.curAttrib(r).value;e.syncBuffer(n).bindBuffer(),this.attributes[r].vertexAttribPointer(n.descriptor)})}}e.default=c},function(t,e,r){"use strict";function n(t){const{type:e,location:r}=t,{gl:n}=t.glx;switch(e){case n.FLOAT:return t=>n.uniform1f(r,t);case n.FLOAT_VEC2:return t=>n.uniform2f(r,t[0],t[1]);case n.FLOAT_VEC3:return t=>n.uniform3f(r,t[0],t[1],t[2]);case n.FLOAT_VEC4:return t=>n.uniform4f(r,t[0],t[1],t[2],t[3]);case n.FLOAT_MAT4:return t=>n.uniformMatrix4fv(r,n.FALSE,t.mat4);case n.SAMPLER_2D:return t=>n.uniform1i(r,t)}const i=new Error(`WebGlUniform unknown uniform type:${e}`);throw i.webGlUniform=t,i}e.__esModule=!0;class i{constructor(t,e){this.program=t,this.glx=t.glx;const{gl:r}=t.glx,{glProgram:i}=t,{name:s,size:a,type:o}=r.getActiveUniform(i,e);this.name=s,this.size=a,this.type=o,this.location=r.getUniformLocation(i,s),this.setValue=n(this),Object.freeze(this)}}e.default=i},function(t,e,r){"use strict";e.__esModule=!0;var n=r(7);const i=(t,e)=>t[n.GL_ITEM_TYPES[e]];class s{constructor(t,e){this.program=t,this.glx=t.glx;const{gl:r}=t.glx,{glProgram:n}=t,{name:i,size:s,type:a}=r.getActiveAttrib(n,e);this.name=i,this.size=s,this.type=a,this.location=r.getAttribLocation(n,i),Object.freeze(this)}vertexAttribPointer(t){const{gl:e}=this.glx,r=t.attr[this.name],n=i(e,r.type);e.vertexAttribPointer(this.location,r.size,n,!1,t.bytesPerVertex,r.byteOffset)}}e.default=s},function(t,e,r){"use strict";function n(t){t.bind();const{gl:e}=t.glx;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha);const r=t.repeatable?e.REPEAT:e.CLAMP_TO_EDGE;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,r);const n=t.nearest?e.NEAREST:e.LINEAR;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.imgEl.width,t.imgEl.height,0,e.RGBA,e.UNSIGNED_BYTE,null)}e.__esModule=!0;class i{constructor(t,e,r=!1,n=!1,i=!1,s=!1){this.glx=t,this.imgEl=e,this.flipY=r,this.repeatable=n,this.premultiplyAlpha=i,this.nearest=s,this.isInitialized=!1,this.glTexObj=t.gl.createTexture(),this.texUnit=-1}bind(){return this.glx.textureManager.bindWebGlTexture(this)}uploadImageData(){if(null==this.imgEl)return;this.isInitialized||(n(this),this.isInitialized=!0),this.bind();const{gl:t}=this.glx;t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.imgEl)}}e.default=i},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(2));class i{constructor(t){Object.defineProperty(this,"glx",{value:t}),this.boundTextures=new Array(t.MAX_TEXTURE_IMAGE_UNITS);for(let t=0;t<this.boundTextures.length;++t)this.boundTextures[t]=null;this.lastBoundTexUnit=0}destroy(){this.boundTextures.length=0,(0,n.default)(this)}bindWebGlTexture(t){let e=this.boundTextures.indexOf(t);if(e<0){for(let r=0;r<this.boundTextures.length;++r)if(!this.boundTextures[r]){e=r,this.boundTextures[r]=t;break}if(e<0){e=this.lastBoundTexUnit;let t=this.boundTextures[e];t&&(t.texUnit=-1),this.lastBoundTexUnit=(this.lastBoundTexUnit+1)%this.glx.MAX_TEXTURE_IMAGE_UNITS}this.glx.activeTexture(e),this.glx.bindTexture2d(t.glTexObj),t.texUnit=e}return e}}e.default=i},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(89)),s=n(r(2));const a=r(1),o=r(35),u=(t,e)=>{const{resource:r}=e;r.enableAutotouch&&(t.autotouchResources.has(e.id)||(t.autotouchResources.set(e.id,!0),r.touch()))},c=t=>{const e=t.blendStack[t.blendStack.length-1]||t.initialBlendMode;e&&!e.isEqual(t.currentBlendMode)&&(t.glx.blend(e),t.currentBlendMode=e)};class l{constructor(t){Object.defineProperty(this,"glx",{value:t}),this.shaderContext=new i.default,this.autotouchResources=new Map,this.clearColor=null,this.blendStack=[],this.initialBlendMode=null,this.currentBlendMode=null,a(this)}destroy(){this.shaderContext.destroy(),this.autotouchResources.clear(),this.blendStack.length=0,(0,s.default)(this)}setClearColor(t){this.clearColor=o(t)}setInitialBlendMode(t){this.initialBlendMode=t}renderFrame(t,e){this.shaderContext.clear(),t.emit("animateFrame",e),this.beginRenderFrame(),t.emit("renderFrame",this,e),this.endRenderFrame()}beginRenderFrame(){this.clearFrameBuffer()}endRenderFrame(){this.autotouchResources.clear()}clearFrameBuffer(){const{gl:t}=this.glx;let e=t.COLOR_BUFFER_BIT;if(this.glx.DEPTH_BITS>0&&(e|=t.DEPTH_BUFFER_BIT),null!==this.clearColor){const e=this.clearColor.toRgb();t.clearColor(e.r/255,e.g/255,e.b/255,e.a)}t.clear(e)}pushBlendMode(t){this.blendStack.push(t)}popBlendMode(){this.blendStack.pop()}useShaderProgram(t){const e=this.glx.resourceLibrary.loadProgram(t),{shaderContext:r}=this;e.use(r),e.loadUniforms(r,this),e.loadAttributes(r,this)}drawArrays(t,e,r=0){c(this);const{gl:n}=this.glx;n.drawArrays(n[t],r,e)}drawIndexed(t,e,r,n=0){c(this),this.syncBuffer(e).bindBuffer();const{gl:i}=this.glx;i.drawElements(i[t],r||e.length,i.UNSIGNED_SHORT,n*e.array.BYTES_PER_ELEMENT)}syncBuffer(t){const{resourceRef:e}=t;u(this,e);const r=this.glx.resourceLibrary.loadBuffer(e);return r.sync(e,t=>t.bufferData(e.hints.typedArray)),r.resource}syncTexture(t){const e=t.resourceRef,r=this.glx.resourceLibrary.loadTexture(e);return r.sync(e,t=>t.uploadImageData()),r.resource}}e.default=l},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){switch(e){case a.default.TYPE.UNIFORM:return t.uniform;case a.default.TYPE.ATTRIB:return t.attrib;case a.default.TYPE.TEXTURE_2D:return t.tex2d}}function s(t,e,r){const n=i(t,e);let s=n.get(r);return s||(s=[],n.set(r,s)),s}e.__esModule=!0;var a=n(r(8)),o=n(r(17)),u=n(r(2));class c{constructor(){this.uniform=new Map,this.attrib=new Map,this.tex2d=new Map}clear(){this.uniform.clear(),this.attrib.clear(),this.tex2d.clear()}destroy(){this.clear(),(0,u.default)(this)}pushVar(t){t instanceof o.default?t.pushVar(this):s(this,t.type,t.name).push(t)}popVar(t){if(t instanceof o.default)t.popVar(this);else{const e=s(this,t.type,t.name),r=e.length;for(let n=0;n<r;++n)if(e[n]===t)return void(e.length=n)}}curVar(t){const e=i(this,t.type).get(t.name);return e&&e.length?e[e.length-1]:null}curUniform(t){const e=this.uniform.get(t);return e&&e.length?e[e.length-1]:null}curAttrib(t){const e=this.attrib.get(t);return e&&e.length?e[e.length-1]:null}curTex2d(t){const e=this.tex2d.get(t);return e&&e.length?e[e.length-1]:null}}e.default=c},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.default=function(t){t.registerComponent("projection",u(s.default)),t.registerComponent("children",u(a.default)),t.registerComponent("blend-mode",u(o.default))};var i=n(r(18)),s=n(r(91)),a=n(r(101)),o=n(r(102));const u=t=>({create:(e,r)=>new t(e,(0,i.default)(r)),update(t,e){t.update((0,i.default)(e))}})},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(92)),i=r(0);class s{constructor(t,e){this.projection=new n.default(e),t.on("*",i.COMP_PRIO_PROJECTION,this)}animateFrame(t){this.projection.update(t.width,t.height)}renderFrame(t){t.shaderContext.pushVar(this.projection.uniform)}debug(){console.dir(this.projection)}update(t){console.log("TODO ProjectionComponent.update(",t,")")}disconnectedEntity(t){console.log("ProjectionComponent.disconnectedEntity(",t,")"),t.off(this)}}e.default=s},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(93)),s=n(r(100));const a="viewMatrix";class o{constructor({desiredWidth:t,desiredHeight:e,pixelRatio:r,sizeFit:n,uniformName:o}){this.desiredWidth=t,this.desiredHeight=e,this.pixelRatio=r,this.sizeFit=n,this.uniform=new s.default(o||a,new i.default),this.width=0,this.height=0}updateOrtho(t,e){t===this.width&&e===this.height||(this.width=t,this.height=e,this.uniform.value.perspective(t,e,100),this.uniform.touch())}update(t,e){if("fill"===this.sizeFit&&this.desiredWidth>0&&this.desiredHeight>0)this.updateOrtho(this.desiredWidth,this.desiredHeight);else if(("cover"===this.sizeFit||"contain"===this.sizeFit)&&this.desiredWidth>=0&&this.desiredHeight>=0){const r=e/t,n=this.desiredHeight/this.desiredWidth,i="cover"===this.sizeFit;let s=this.desiredWidth,a=this.desiredHeight;if(0===this.desiredWidth&&this.desiredHeight||r<n){if(s=this.desiredHeight/e*t,i){const t=this.desiredWidth/s;s*=t,a*=t}}else if((this.desiredWidth&&0===this.desiredHeight||r>n)&&(a=this.desiredWidth/t*e,i)){const t=this.desiredHeight/a;s*=t,a*=t}this.updateOrtho(s,a)}}}e.default=o},function(t,e,r){"use strict";e.__esModule=!0;const{mat4:n}=r(94),i=Math.PI/180;class s{constructor(){this.mat4=n.create(),Object.freeze(this)}identity(){n.identity(this.mat4)}ortho(t,e,r=Math.pow(2,16)){const i=t>>1,s=e>>1,a=r>>1;n.ortho(this.mat4,-i,i,-s,s,-a,a)}perspective(t,e,r=100){const i=t/e,s=e/2,a=2*Math.atan(s/r);n.perspective(this.mat4,a,i,0,2e3),n.translate(this.mat4,this.mat4,[0,0,-r])}translate(t,e,r=0){n.translate(this.mat4,this.mat4,[t,e,r])}scale(t,e,r=1){n.scale(this.mat4,this.mat4,[t,e,r])}rotateX(t){n.rotateX(this.mat4,this.mat4,t*i)}rotateY(t){n.rotateY(this.mat4,this.mat4,t*i)}rotateZ(t){n.rotateZ(this.mat4,this.mat4,t*i)}multiply(t,e){n.multiply(this.mat4,t.mat4,e.mat4)}copy(t){n.copy(this.mat4,t.mat4)}clone(){const t=new s;return t.copy(this),t}get x(){return this.mat4[12]}set x(t){this.mat4[12]=t}get y(){return this.mat4[13]}set y(t){this.mat4[13]=t}get z(){return this.mat4[14]}set z(t){this.mat4[14]=t}get sx(){return this.mat4[0]}set sx(t){this.mat4[0]=t}get sy(){return this.mat4[5]}set sy(t){this.mat4[5]=t}get sz(){return this.mat4[10]}set sz(t){this.mat4[10]=t}}e.default=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3),i=r(95),s=r(96),a=r(36),o=r(97),u=r(98),c=r(99),l=r(37),f=r(38);r.d(e,"glMatrix",function(){return n}),r.d(e,"mat2",function(){return i}),r.d(e,"mat2d",function(){return s}),r.d(e,"mat3",function(){return a}),r.d(e,"mat4",function(){return o}),r.d(e,"quat",function(){return u}),r.d(e,"vec2",function(){return c}),r.d(e,"vec3",function(){return l}),r.d(e,"vec4",function(){return f})},function(t,e,r){"use strict";function n(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],o=r[0],u=r[1],c=r[2],l=r[3];return t[0]=n*o+s*u,t[1]=i*o+a*u,t[2]=n*c+s*l,t[3]=i*c+a*l,t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new s.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.clone=function(t){let e=new s.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.fromValues=function(t,e,r,n){let i=new s.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i},e.set=function(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t},e.transpose=function(t,e){if(t===e){let r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},e.invert=function(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=r*s-i*n;return a?(a=1/a,t[0]=s*a,t[1]=-n*a,t[2]=-i*a,t[3]=r*a,t):null},e.adjoint=function(t,e){let r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t},e.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},e.multiply=n,e.rotate=function(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],o=Math.sin(r),u=Math.cos(r);return t[0]=n*u+s*o,t[1]=i*u+a*o,t[2]=n*-o+s*u,t[3]=i*-o+a*u,t},e.scale=function(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],o=r[0],u=r[1];return t[0]=n*o,t[1]=i*o,t[2]=s*u,t[3]=a*u,t},e.fromRotation=function(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},e.LDU=function(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},e.subtract=i,e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){let r=t[0],n=t[1],i=t[2],a=t[3],o=e[0],u=e[1],c=e[2],l=e[3];return Math.abs(r-o)<=s.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-u)<=s.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-c)<=s.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(a-l)<=s.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))},e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t};var s=r(3);const a=n;e.mul=a;const o=i;e.sub=o},function(t,e,r){"use strict";function n(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],u=e[5],c=r[0],l=r[1],f=r[2],h=r[3],d=r[4],p=r[5];return t[0]=n*c+s*l,t[1]=i*c+a*l,t[2]=n*f+s*h,t[3]=i*f+a*h,t[4]=n*d+s*p+o,t[5]=i*d+a*p+u,t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new s.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.clone=function(t){let e=new s.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.fromValues=function(t,e,r,n,i,a){let o=new s.ARRAY_TYPE(6);return o[0]=t,o[1]=e,o[2]=r,o[3]=n,o[4]=i,o[5]=a,o},e.set=function(t,e,r,n,i,s,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=s,t[5]=a,t},e.invert=function(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],u=r*s-n*i;return u?(u=1/u,t[0]=s*u,t[1]=-n*u,t[2]=-i*u,t[3]=r*u,t[4]=(i*o-s*a)*u,t[5]=(n*a-r*o)*u,t):null},e.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},e.multiply=n,e.rotate=function(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],u=e[5],c=Math.sin(r),l=Math.cos(r);return t[0]=n*l+s*c,t[1]=i*l+a*c,t[2]=n*-c+s*l,t[3]=i*-c+a*l,t[4]=o,t[5]=u,t},e.scale=function(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],u=e[5],c=r[0],l=r[1];return t[0]=n*c,t[1]=i*c,t[2]=s*l,t[3]=a*l,t[4]=o,t[5]=u,t},e.translate=function(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],u=e[5],c=r[0],l=r[1];return t[0]=n,t[1]=i,t[2]=s,t[3]=a,t[4]=n*c+s*l+o,t[5]=i*c+a*l+u,t},e.fromRotation=function(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t},e.subtract=i,e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},e.equals=function(t,e){let r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],u=t[5],c=e[0],l=e[1],f=e[2],h=e[3],d=e[4],p=e[5];return Math.abs(r-c)<=s.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-l)<=s.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(i-f)<=s.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(a-h)<=s.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(o-d)<=s.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(u-p)<=s.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))};var s=r(3);const a=n;e.mul=a;const o=i;e.sub=o},function(t,e,r){"use strict";function n(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],d=e[10],p=e[11],b=e[12],g=e[13],m=e[14],_=e[15],y=r[0],M=r[1],v=r[2],x=r[3];return t[0]=y*n+M*o+v*f+x*b,t[1]=y*i+M*u+v*h+x*g,t[2]=y*s+M*c+v*d+x*m,t[3]=y*a+M*l+v*p+x*_,y=r[4],M=r[5],v=r[6],x=r[7],t[4]=y*n+M*o+v*f+x*b,t[5]=y*i+M*u+v*h+x*g,t[6]=y*s+M*c+v*d+x*m,t[7]=y*a+M*l+v*p+x*_,y=r[8],M=r[9],v=r[10],x=r[11],t[8]=y*n+M*o+v*f+x*b,t[9]=y*i+M*u+v*h+x*g,t[10]=y*s+M*c+v*d+x*m,t[11]=y*a+M*l+v*p+x*_,y=r[12],M=r[13],v=r[14],x=r[15],t[12]=y*n+M*o+v*f+x*b,t[13]=y*i+M*u+v*h+x*g,t[14]=y*s+M*c+v*d+x*m,t[15]=y*a+M*l+v*p+x*_,t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new s.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.clone=function(t){let e=new s.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.fromValues=function(t,e,r,n,i,a,o,u,c,l,f,h,d,p,b,g){let m=new s.ARRAY_TYPE(16);return m[0]=t,m[1]=e,m[2]=r,m[3]=n,m[4]=i,m[5]=a,m[6]=o,m[7]=u,m[8]=c,m[9]=l,m[10]=f,m[11]=h,m[12]=d,m[13]=p,m[14]=b,m[15]=g,m},e.set=function(t,e,r,n,i,s,a,o,u,c,l,f,h,d,p,b,g){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=s,t[5]=a,t[6]=o,t[7]=u,t[8]=c,t[9]=l,t[10]=f,t[11]=h,t[12]=d,t[13]=p,t[14]=b,t[15]=g,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.transpose=function(t,e){if(t===e){let r=e[1],n=e[2],i=e[3],s=e[6],a=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=s,t[11]=e[14],t[12]=i,t[13]=a,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},e.invert=function(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],p=e[12],b=e[13],g=e[14],m=e[15],_=r*o-n*a,y=r*u-i*a,M=r*c-s*a,v=n*u-i*o,x=n*c-s*o,A=i*c-s*u,E=l*b-f*p,T=l*g-h*p,R=l*m-d*p,w=f*g-h*b,O=f*m-d*b,S=h*m-d*g,P=_*S-y*O+M*w+v*R-x*T+A*E;return P?(P=1/P,t[0]=(o*S-u*O+c*w)*P,t[1]=(i*O-n*S-s*w)*P,t[2]=(b*A-g*x+m*v)*P,t[3]=(h*x-f*A-d*v)*P,t[4]=(u*R-a*S-c*T)*P,t[5]=(r*S-i*R+s*T)*P,t[6]=(g*M-p*A-m*y)*P,t[7]=(l*A-h*M+d*y)*P,t[8]=(a*O-o*R+c*E)*P,t[9]=(n*R-r*O-s*E)*P,t[10]=(p*x-b*M+m*_)*P,t[11]=(f*M-l*x-d*_)*P,t[12]=(o*T-a*w-u*E)*P,t[13]=(r*w-n*T+i*E)*P,t[14]=(b*y-p*v-g*_)*P,t[15]=(l*v-f*y+h*_)*P,t):null},e.adjoint=function(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],p=e[12],b=e[13],g=e[14],m=e[15];return t[0]=o*(h*m-d*g)-f*(u*m-c*g)+b*(u*d-c*h),t[1]=-(n*(h*m-d*g)-f*(i*m-s*g)+b*(i*d-s*h)),t[2]=n*(u*m-c*g)-o*(i*m-s*g)+b*(i*c-s*u),t[3]=-(n*(u*d-c*h)-o*(i*d-s*h)+f*(i*c-s*u)),t[4]=-(a*(h*m-d*g)-l*(u*m-c*g)+p*(u*d-c*h)),t[5]=r*(h*m-d*g)-l*(i*m-s*g)+p*(i*d-s*h),t[6]=-(r*(u*m-c*g)-a*(i*m-s*g)+p*(i*c-s*u)),t[7]=r*(u*d-c*h)-a*(i*d-s*h)+l*(i*c-s*u),t[8]=a*(f*m-d*b)-l*(o*m-c*b)+p*(o*d-c*f),t[9]=-(r*(f*m-d*b)-l*(n*m-s*b)+p*(n*d-s*f)),t[10]=r*(o*m-c*b)-a*(n*m-s*b)+p*(n*c-s*o),t[11]=-(r*(o*d-c*f)-a*(n*d-s*f)+l*(n*c-s*o)),t[12]=-(a*(f*g-h*b)-l*(o*g-u*b)+p*(o*h-u*f)),t[13]=r*(f*g-h*b)-l*(n*g-i*b)+p*(n*h-i*f),t[14]=-(r*(o*g-u*b)-a*(n*g-i*b)+p*(n*u-i*o)),t[15]=r*(o*h-u*f)-a*(n*h-i*f)+l*(n*u-i*o),t},e.determinant=function(t){let e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],a=t[5],o=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11],d=t[12],p=t[13],b=t[14],g=t[15];return(e*a-r*s)*(f*g-h*b)-(e*o-n*s)*(l*g-h*p)+(e*u-i*s)*(l*b-f*p)+(r*o-n*a)*(c*g-h*d)-(r*u-i*a)*(c*b-f*d)+(n*u-i*o)*(c*p-l*d)},e.multiply=n,e.translate=function(t,e,r){let n,i,s,a,o,u,c,l,f,h,d,p,b=r[0],g=r[1],m=r[2];return e===t?(t[12]=e[0]*b+e[4]*g+e[8]*m+e[12],t[13]=e[1]*b+e[5]*g+e[9]*m+e[13],t[14]=e[2]*b+e[6]*g+e[10]*m+e[14],t[15]=e[3]*b+e[7]*g+e[11]*m+e[15]):(n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],d=e[10],p=e[11],t[0]=n,t[1]=i,t[2]=s,t[3]=a,t[4]=o,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=h,t[10]=d,t[11]=p,t[12]=n*b+o*g+f*m+e[12],t[13]=i*b+u*g+h*m+e[13],t[14]=s*b+c*g+d*m+e[14],t[15]=a*b+l*g+p*m+e[15]),t},e.scale=function(t,e,r){let n=r[0],i=r[1],s=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.rotate=function(t,e,r,n){let i,a,o,u,c,l,f,h,d,p,b,g,m,_,y,M,v,x,A,E,T,R,w,O,S=n[0],P=n[1],C=n[2],L=Math.sqrt(S*S+P*P+C*C);return Math.abs(L)<s.EPSILON?null:(L=1/L,S*=L,P*=L,C*=L,i=Math.sin(r),a=Math.cos(r),o=1-a,u=e[0],c=e[1],l=e[2],f=e[3],h=e[4],d=e[5],p=e[6],b=e[7],g=e[8],m=e[9],_=e[10],y=e[11],M=S*S*o+a,v=P*S*o+C*i,x=C*S*o-P*i,A=S*P*o-C*i,E=P*P*o+a,T=C*P*o+S*i,R=S*C*o+P*i,w=P*C*o-S*i,O=C*C*o+a,t[0]=u*M+h*v+g*x,t[1]=c*M+d*v+m*x,t[2]=l*M+p*v+_*x,t[3]=f*M+b*v+y*x,t[4]=u*A+h*E+g*T,t[5]=c*A+d*E+m*T,t[6]=l*A+p*E+_*T,t[7]=f*A+b*E+y*T,t[8]=u*R+h*w+g*O,t[9]=c*R+d*w+m*O,t[10]=l*R+p*w+_*O,t[11]=f*R+b*w+y*O,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},e.rotateX=function(t,e,r){let n=Math.sin(r),i=Math.cos(r),s=e[4],a=e[5],o=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+c*n,t[5]=a*i+l*n,t[6]=o*i+f*n,t[7]=u*i+h*n,t[8]=c*i-s*n,t[9]=l*i-a*n,t[10]=f*i-o*n,t[11]=h*i-u*n,t},e.rotateY=function(t,e,r){let n=Math.sin(r),i=Math.cos(r),s=e[0],a=e[1],o=e[2],u=e[3],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-c*n,t[1]=a*i-l*n,t[2]=o*i-f*n,t[3]=u*i-h*n,t[8]=s*n+c*i,t[9]=a*n+l*i,t[10]=o*n+f*i,t[11]=u*n+h*i,t},e.rotateZ=function(t,e,r){let n=Math.sin(r),i=Math.cos(r),s=e[0],a=e[1],o=e[2],u=e[3],c=e[4],l=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+c*n,t[1]=a*i+l*n,t[2]=o*i+f*n,t[3]=u*i+h*n,t[4]=c*i-s*n,t[5]=l*i-a*n,t[6]=f*i-o*n,t[7]=h*i-u*n,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,e,r){let n,i,a,o=r[0],u=r[1],c=r[2],l=Math.sqrt(o*o+u*u+c*c);return Math.abs(l)<s.EPSILON?null:(l=1/l,o*=l,u*=l,c*=l,n=Math.sin(e),i=Math.cos(e),a=1-i,t[0]=o*o*a+i,t[1]=u*o*a+c*n,t[2]=c*o*a-u*n,t[3]=0,t[4]=o*u*a-c*n,t[5]=u*u*a+i,t[6]=c*u*a+o*n,t[7]=0,t[8]=o*c*a+u*n,t[9]=u*c*a-o*n,t[10]=c*c*a+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},e.fromXRotation=function(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=function(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],o=n+n,u=i+i,c=s+s,l=n*o,f=n*u,h=n*c,d=i*u,p=i*c,b=s*c,g=a*o,m=a*u,_=a*c;return t[0]=1-(d+b),t[1]=f+_,t[2]=h-m,t[3]=0,t[4]=f-_,t[5]=1-(l+b),t[6]=p+g,t[7]=0,t[8]=h+m,t[9]=p-g,t[10]=1-(l+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},e.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},e.getScaling=function(t,e){let r=e[0],n=e[1],i=e[2],s=e[4],a=e[5],o=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.sqrt(r*r+n*n+i*i),t[1]=Math.sqrt(s*s+a*a+o*o),t[2]=Math.sqrt(u*u+c*c+l*l),t},e.getRotation=function(t,e){let r=e[0]+e[5]+e[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t},e.fromRotationTranslationScale=function(t,e,r,n){let i=e[0],s=e[1],a=e[2],o=e[3],u=i+i,c=s+s,l=a+a,f=i*u,h=i*c,d=i*l,p=s*c,b=s*l,g=a*l,m=o*u,_=o*c,y=o*l,M=n[0],v=n[1],x=n[2];return t[0]=(1-(p+g))*M,t[1]=(h+y)*M,t[2]=(d-_)*M,t[3]=0,t[4]=(h-y)*v,t[5]=(1-(f+g))*v,t[6]=(b+m)*v,t[7]=0,t[8]=(d+_)*x,t[9]=(b-m)*x,t[10]=(1-(f+p))*x,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,e,r,n,i){let s=e[0],a=e[1],o=e[2],u=e[3],c=s+s,l=a+a,f=o+o,h=s*c,d=s*l,p=s*f,b=a*l,g=a*f,m=o*f,_=u*c,y=u*l,M=u*f,v=n[0],x=n[1],A=n[2],E=i[0],T=i[1],R=i[2];return t[0]=(1-(b+m))*v,t[1]=(d+M)*v,t[2]=(p-y)*v,t[3]=0,t[4]=(d-M)*x,t[5]=(1-(h+m))*x,t[6]=(g+_)*x,t[7]=0,t[8]=(p+y)*A,t[9]=(g-_)*A,t[10]=(1-(h+b))*A,t[11]=0,t[12]=r[0]+E-(t[0]*E+t[4]*T+t[8]*R),t[13]=r[1]+T-(t[1]*E+t[5]*T+t[9]*R),t[14]=r[2]+R-(t[2]*E+t[6]*T+t[10]*R),t[15]=1,t},e.fromQuat=function(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=r+r,o=n+n,u=i+i,c=r*a,l=n*a,f=n*o,h=i*a,d=i*o,p=i*u,b=s*a,g=s*o,m=s*u;return t[0]=1-f-p,t[1]=l+m,t[2]=h-g,t[3]=0,t[4]=l-m,t[5]=1-c-p,t[6]=d+b,t[7]=0,t[8]=h+g,t[9]=d-b,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,e,r,n,i,s,a){let o=1/(r-e),u=1/(i-n),c=1/(s-a);return t[0]=2*s*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*u,t[6]=0,t[7]=0,t[8]=(r+e)*o,t[9]=(i+n)*u,t[10]=(a+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*s*2*c,t[15]=0,t},e.perspective=function(t,e,r,n,i){let s=1/Math.tan(e/2),a=1/(n-i);return t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*a,t[15]=0,t},e.perspectiveFromFieldOfView=function(t,e,r,n){let i=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+o),c=2/(i+s);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-o)*u*.5,t[9]=(i-s)*c*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},e.ortho=function(t,e,r,n,i,s,a){let o=1/(e-r),u=1/(n-i),c=1/(s-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*o,t[13]=(i+n)*u,t[14]=(a+s)*c,t[15]=1,t},e.lookAt=function(t,e,r,n){let i,a,o,u,c,l,f,h,d,p,b=e[0],g=e[1],m=e[2],_=n[0],y=n[1],M=n[2],v=r[0],x=r[1],A=r[2];return Math.abs(b-v)<s.EPSILON&&Math.abs(g-x)<s.EPSILON&&Math.abs(m-A)<s.EPSILON?mat4.identity(t):(f=b-v,h=g-x,d=m-A,p=1/Math.sqrt(f*f+h*h+d*d),f*=p,h*=p,d*=p,i=y*d-M*h,a=M*f-_*d,o=_*h-y*f,(p=Math.sqrt(i*i+a*a+o*o))?(i*=p=1/p,a*=p,o*=p):(i=0,a=0,o=0),u=h*o-d*a,c=d*i-f*o,l=f*a-h*i,(p=Math.sqrt(u*u+c*c+l*l))?(u*=p=1/p,c*=p,l*=p):(u=0,c=0,l=0),t[0]=i,t[1]=u,t[2]=f,t[3]=0,t[4]=a,t[5]=c,t[6]=h,t[7]=0,t[8]=o,t[9]=l,t[10]=d,t[11]=0,t[12]=-(i*b+a*g+o*m),t[13]=-(u*b+c*g+l*m),t[14]=-(f*b+h*g+d*m),t[15]=1,t)},e.targetTo=function(t,e,r,n){let i=e[0],s=e[1],a=e[2],o=n[0],u=n[1],c=n[2],l=i-r[0],f=s-r[1],h=a-r[2],d=l*l+f*f+h*h;d>0&&(l*=d=1/Math.sqrt(d),f*=d,h*=d);let p=u*h-c*f,b=c*l-o*h,g=o*f-u*l;return t[0]=p,t[1]=b,t[2]=g,t[3]=0,t[4]=f*g-h*b,t[5]=h*p-l*g,t[6]=l*b-f*p,t[7]=0,t[8]=l,t[9]=f,t[10]=h,t[11]=0,t[12]=i,t[13]=s,t[14]=a,t[15]=1,t},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t},e.subtract=i,e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},e.equals=function(t,e){let r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=t[9],d=t[10],p=t[11],b=t[12],g=t[13],m=t[14],_=t[15],y=e[0],M=e[1],v=e[2],x=e[3],A=e[4],E=e[5],T=e[6],R=e[7],w=e[8],O=e[9],S=e[10],P=e[11],C=e[12],L=e[13],N=e[14],I=e[15];return Math.abs(r-y)<=s.EPSILON*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(n-M)<=s.EPSILON*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(i-v)<=s.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(a-x)<=s.EPSILON*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-A)<=s.EPSILON*Math.max(1,Math.abs(o),Math.abs(A))&&Math.abs(u-E)<=s.EPSILON*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(c-T)<=s.EPSILON*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(l-R)<=s.EPSILON*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(f-w)<=s.EPSILON*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(h-O)<=s.EPSILON*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(d-S)<=s.EPSILON*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(p-P)<=s.EPSILON*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(b-C)<=s.EPSILON*Math.max(1,Math.abs(b),Math.abs(C))&&Math.abs(g-L)<=s.EPSILON*Math.max(1,Math.abs(g),Math.abs(L))&&Math.abs(m-N)<=s.EPSILON*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(_-I)<=s.EPSILON*Math.max(1,Math.abs(_),Math.abs(I))};var s=r(3);const a=n;e.mul=a;const o=i;e.sub=o},function(t,e,r){"use strict";function n(){let t=new u.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function i(t,e,r){r*=.5;let n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function s(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],o=r[0],u=r[1],c=r[2],l=r[3];return t[0]=n*l+a*o+i*c-s*u,t[1]=i*l+a*u+s*o-n*c,t[2]=s*l+a*c+n*u-i*o,t[3]=a*l-n*o-i*u-s*c,t}function a(t,e,r,n){let i,s,a,o,u,c=e[0],l=e[1],f=e[2],h=e[3],d=r[0],p=r[1],b=r[2],g=r[3];return(s=c*d+l*p+f*b+h*g)<0&&(s=-s,d=-d,p=-p,b=-b,g=-g),1-s>1e-6?(i=Math.acos(s),a=Math.sin(i),o=Math.sin((1-n)*i)/a,u=Math.sin(n*i)/a):(o=1-n,u=n),t[0]=o*c+u*d,t[1]=o*l+u*p,t[2]=o*f+u*b,t[3]=o*h+u*g,t}function o(t,e){let r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{let n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);let i=(n+1)%3,s=(n+2)%3;r=Math.sqrt(e[3*n+n]-e[3*i+i]-e[3*s+s]+1),t[n]=.5*r,r=.5/r,t[3]=(e[3*i+s]-e[3*s+i])*r,t[i]=(e[3*i+n]+e[3*n+i])*r,t[s]=(e[3*s+n]+e[3*n+s])*r}return t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=n,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},e.setAxisAngle=i,e.getAxisAngle=function(t,e){let r=2*Math.acos(e[3]),n=Math.sin(r/2);return 0!=n?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r},e.multiply=s,e.rotateX=function(t,e,r){r*=.5;let n=e[0],i=e[1],s=e[2],a=e[3],o=Math.sin(r),u=Math.cos(r);return t[0]=n*u+a*o,t[1]=i*u+s*o,t[2]=s*u-i*o,t[3]=a*u-n*o,t},e.rotateY=function(t,e,r){r*=.5;let n=e[0],i=e[1],s=e[2],a=e[3],o=Math.sin(r),u=Math.cos(r);return t[0]=n*u-s*o,t[1]=i*u+a*o,t[2]=s*u+n*o,t[3]=a*u-i*o,t},e.rotateZ=function(t,e,r){r*=.5;let n=e[0],i=e[1],s=e[2],a=e[3],o=Math.sin(r),u=Math.cos(r);return t[0]=n*u+i*o,t[1]=i*u-n*o,t[2]=s*u+a*o,t[3]=a*u-s*o,t},e.calculateW=function(t,e){let r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t},e.slerp=a,e.invert=function(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=r*r+n*n+i*i+s*s,o=a?1/a:0;return t[0]=-r*o,t[1]=-n*o,t[2]=-i*o,t[3]=s*o,t},e.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},e.fromMat3=o,e.fromEuler=function(t,e,r,n){let i=.5*Math.PI/180;e*=i,r*=i,n*=i;let s=Math.sin(e),a=Math.cos(e),o=Math.sin(r),u=Math.cos(r),c=Math.sin(n),l=Math.cos(n);return t[0]=s*u*l-a*o*c,t[1]=a*o*l+s*u*c,t[2]=a*u*c-s*o*l,t[3]=a*u*l+s*o*c,t},e.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var u=r(3),c=r(36),l=r(37),f=r(38);const h=f.clone;e.clone=h;const d=f.fromValues;e.fromValues=d;const p=f.copy;e.copy=p;const b=f.set;e.set=b;const g=f.add;e.add=g;const m=s;e.mul=m;const _=f.scale;e.scale=_;const y=f.dot;e.dot=y;const M=f.lerp;e.lerp=M;const v=f.length;e.length=v;const x=v;e.len=x;const A=f.squaredLength;e.squaredLength=A;const E=A;e.sqrLen=E;const T=f.normalize;e.normalize=T;const R=f.exactEquals;e.exactEquals=R;const w=f.equals;e.equals=w;const O=function(){let t=l.create(),e=l.fromValues(1,0,0),r=l.fromValues(0,1,0);return function(n,s,a){let o=l.dot(s,a);return o<-.999999?(l.cross(t,e,s),l.len(t)<1e-6&&l.cross(t,r,s),l.normalize(t,t),i(n,t,Math.PI),n):o>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(l.cross(t,s,a),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+o,T(n,n))}}();e.rotationTo=O;const S=function(){let t=n(),e=n();return function(r,n,i,s,o,u){return a(t,n,o,u),a(e,i,s,u),a(r,t,e,2*u*(1-u)),r}}();e.sqlerp=S;const P=function(){let t=c.create();return function(e,r,n,i){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],T(e,o(e,t))}}();e.setAxes=P},function(t,e,r){"use strict";function n(){let t=new f.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function s(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function a(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function o(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}function u(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function c(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}function l(t){var e=t[0],r=t[1];return e*e+r*r}Object.defineProperty(e,"__esModule",{value:!0}),e.create=n,e.clone=function(t){let e=new f.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){let r=new f.ARRAY_TYPE(2);return r[0]=t,r[1]=e,r},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,r){return t[0]=e,t[1]=r,t},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t},e.subtract=i,e.multiply=s,e.divide=a,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t},e.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},e.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t},e.distance=o,e.squaredDistance=u,e.length=c,e.squaredLength=l,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},e.lerp=function(t,e,r,n){var i=e[0],s=e[1];return t[0]=i+n*(r[0]-i),t[1]=s+n*(r[1]-s),t},e.random=function(t,e){e=e||1;var r=2*f.RANDOM()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t},e.transformMat2=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t},e.transformMat2d=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t},e.transformMat3=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t},e.transformMat4=function(t,e,r){let n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){let r=t[0],n=t[1],i=e[0],s=e[1];return Math.abs(r-i)<=f.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-s)<=f.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))};var f=r(3);const h=c;e.len=h;const d=i;e.sub=d;const p=s;e.mul=p;const b=a;e.div=b;const g=o;e.dist=g;const m=u;e.sqrDist=m;const _=l;e.sqrLen=_;const y=function(){let t=n();return function(e,r,n,i,s,a){let o,u;for(r||(r=2),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,o=n;o<u;o+=r)t[0]=e[o],t[1]=e[o+1],s(t,t,a),e[o]=t[0],e[o+1]=t[1];return e}}();e.forEach=y},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(8));class i extends n.default{constructor(t,e){super(t,n.default.TYPE.UNIFORM,e)}}e.default=i},function(t,e,r){"use strict";e.__esModule=!0;var n=r(0);const i=r(1),s=n.COMP_PRIO_CHILDREN+1,a=n.COMP_PRIO_CHILDREN-1;class o{constructor(t){this.entity=t}renderFrame(t){this.entity.emit("renderFrameBeforeChildren",t)}}class u{constructor(t){this.entity=t}renderFrame(t){this.entity.emit("renderFrameAfterChildren",t)}}class c{constructor(t){i(this),this.beforeChildren=new o(t),this.afterChildren=new u(t),t.on("*",n.COMP_PRIO_CHILDREN,this),t.on("*",s,this.beforeChildren),t.on("*",a,this.afterChildren)}renderFrameBeforeChildren(){}renderFrameAfterChildren(){}appendChild(t){t.hasComponent("parentEntity")&&t.destroyComponent("parentEntity"),t.setComponent("parentEntity",this),this.on(t)}removeChild(t){this.off(t),t.destroyComponent("parentEntity")}disconnectedEntity(t){console.log("ChildrenComponent.disconnectedEntity(",t,")"),t.off(this.afterChildren),t.off(this.beforeChildren),t.off(this)}}e.default=c},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(103)),i=r(0);const s=t=>({enable:"object"==typeof t&&(void 0===t.enable||!!t.enable),sfactor:"object"==typeof t&&"string"==typeof t.sfactor?t.sfactor:"",dfactor:"object"==typeof t&&"string"==typeof t.dfactor?t.dfactor:""});class a{constructor(t){this.blendMode=t}renderFrame(t){t.pushBlendMode(this.blendMode)}}class o{renderFrame(t){t.popBlendMode()}}class u{constructor(t,e){const{enable:r,sfactor:u,dfactor:c}=s(e);this.blendMode=new n.default(r,u,c),this.beforeChildren=new a(this.blendMode),this.afterChildren=new o,t.on("*",i.COMP_PRIO_BLEND_BEFORE,this.beforeChildren),t.on("*",i.COMP_PRIO_BLEND_AFTER,this.afterChildren),t.on("debug",this)}debug(){console.dir(this.blendMode)}update(t){const{enable:e,sfactor:r,dfactor:n}=s(t);this.blendMode.enable=e,this.blendMode.sfactor=r,this.blendMode.dfactor=n}disconnectedEntity(t){console.log("BlendModeComponent.disconnectedEntity(",t,")"),t.off(this.afterChildren),t.off(this.beforeChildren),t.off(this)}}e.default=u},function(t,e,r){"use strict";e.__esModule=!0;const n=r(104);class i{constructor(t,e=null,r=null){this.enable=t,this.sfactor=e,this.dfactor=r}set sfactor(t){this._sfactor="string"==typeof t?n(t).toUpperCase():void 0}get sfactor(){return this._sfactor}set dfactor(t){this._dfactor="string"==typeof t?n(t).toUpperCase():void 0}get dfactor(){return this._dfactor}isEqual(t){return t&&this.enable===t.enable&&this._sfactor===t._sfactor&&this._dfactor===t._dfactor}}e.default=i},function(t,e,r){var n=r(105)(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()});t.exports=n},function(t,e,r){var n=r(106),i=r(107),s=r(115),a=RegExp("['’]","g");t.exports=function(t){return function(e){return n(s(i(e).replace(a,"")),t,"")}}},function(t,e){t.exports=function(t,e,r,n){var i=-1,s=null==t?0:t.length;for(n&&s&&(r=t[++i]);++i<s;)r=e(r,t[i],i,t);return r}},function(t,e,r){var n=r(108),i=r(19),s=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");t.exports=function(t){return(t=i(t))&&t.replace(s,n).replace(a,"")}},function(t,e,r){var n=r(109)({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"});t.exports=n},function(t,e){t.exports=function(t){return function(e){return null==t?void 0:t[e]}}},function(t,e,r){function n(t){if("string"==typeof t)return t;if(a(t))return s(t,n)+"";if(o(t))return l?l.call(t):"";var e=t+"";return"0"==e&&1/t==-u?"-0":e}var i=r(9),s=r(112),a=r(5),o=r(21),u=1/0,c=i?i.prototype:void 0,l=c?c.toString:void 0;t.exports=n},function(t,e,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(e,r(28))},function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}},function(t,e,r){var n=r(9),i=Object.prototype,s=i.hasOwnProperty,a=i.toString,o=n?n.toStringTag:void 0;t.exports=function(t){var e=s.call(t,o),r=t[o];try{t[o]=void 0;var n=!0}catch(t){}var i=a.call(t);return n&&(e?t[o]=r:delete t[o]),i}},function(t,e){var r=Object.prototype.toString;t.exports=function(t){return r.call(t)}},function(t,e,r){var n=r(116),i=r(117),s=r(19),a=r(118);t.exports=function(t,e,r){return t=s(t),void 0===(e=r?void 0:e)?i(t)?a(t):n(t):t.match(e)||[]}},function(t,e){var r=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;t.exports=function(t){return t.match(r)||[]}},function(t,e){var r=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;t.exports=function(t){return r.test(t)}},function(t,e){var r="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",n="["+r+"]",i="[a-z\\xdf-\\xf6\\xf8-\\xff]",s="[^\\ud800-\\udfff"+r+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",u="[A-Z\\xc0-\\xd6\\xd8-\\xde]",c="(?:"+i+"|"+s+")",l="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",f="[\\ufe0e\\ufe0f]?"+l+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",a,o].join("|")+")[\\ufe0e\\ufe0f]?"+l+")*"),h="(?:"+["[\\u2700-\\u27bf]",a,o].join("|")+")"+f,d=RegExp([u+"?"+i+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[n,u,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[n,u+c,"$"].join("|")+")",u+"?"+c+"+(?:['’](?:d|ll|m|re|s|t|ve))?",u+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)","\\d+",h].join("|"),"g");t.exports=function(t){return t.match(d)||[]}},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(41)),i=r(0);const s=r(1);class a extends HTMLElement{constructor(t){const e=super(t);return s(e)}get blitpunkNodeName(){return i.NODE_NAME_SCENE}get blitpunk(){return this.blitpunkCanvas.blitpunk}connectedCallback(){this.blitpunkCanvas=(0,n.default)(this,i.NODE_NAME_CANVAS)}disconnectedCallback(){this.blitpunkCanvas=null}}e.default=a},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(42)),s=n(r(43)),a=n(r(123)),o=r(0);const u=r(1);class c extends HTMLElement{static get observedAttributes(){return[o.ATTR_SRC]}constructor(t){const e=super(t);return u(e)}get blitpunkNodeName(){return o.NODE_NAME_TEXTURE_ATLAS}get textureId(){return this.entity&&this.entity.id}loadTextureAtlas(t){if(t&&this.entity&&this.prevUrl!==t)return this.prevUrl=t,this.textureHints=(0,a.default)(this),this.textureAtlasPromise=this.textureLibrary.loadTextureAtlas(this.textureId,t,this.textureHints).then(t=>(this.textureAtlas=t,t)),this.textureAtlasPromise}debug(){console.log(this.textureAtlas)}connectedCallback(){(0,i.default)(this),this.textureLibrary=this.parentSceneElement.textureLibrary,this.loadTextureAtlas(this.getAttribute(o.ATTR_SRC))}disconnectedCallback(){this.textureAtlas=null,this.textureLibrary=null,(0,s.default)(this)}attributeChangedCallback(t,e,r){t===o.ATTR_SRC&&this.loadTextureAtlas(r)}}e.default=c},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){return(0,n.default)(t,i.NODE_NAME_CANVAS)};var n=function(t){return t&&t.__esModule?t:{default:t}}(r(41)),i=r(0)},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e,r){const i=t.parentElement;if(!i||1!==i.nodeType)return;const{nodeName:s}=i;if(!n.includes(s))return null==r&&i[e]||null!=r&&i[e],i};const n=["BODY","HTML"]},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){return{flipY:(0,n.default)(t,i.ATTR_FLIP_Y,!1),repeatable:(0,n.default)(t,i.ATTR_REPEATABLE,!1),premultiplyAlpha:(0,n.default)(t,i.ATTR_PREMULTIPLY_ALPHA,!0),nearest:(0,n.default)(t,i.ATTR_NEAREST,!1)}};var n=function(t){return t&&t.__esModule?t:{default:t}}(r(40)),i=r(0)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(125)),s=n(r(18)),a=n(r(189)),o=n(r(190)),u=n(r(191)),c=n(r(42)),l=n(r(43)),f=n(r(192)),h=r(0);const d=r(1),p=({descriptor:t,capacity:e,vertexShader:r,fragmentShader:n,primitive:i,voNew:s,voZero:o})=>({descriptor:t,vertexShader:r,fragmentShader:n,primitive:i,capacity:parseInt(e,10),voNew:(0,a.default)(s),voZero:(0,a.default)(o)}),b=t=>p({descriptor:t.getAttribute(h.ATTR_DESCRIPTOR),vertexShader:t.getAttribute(h.ATTR_VERTEX_SHADER),fragmentShader:t.getAttribute(h.ATTR_FRAGMENT_SHADER),primitive:t.getAttribute(h.ATTR_PRIMITIVE),capacity:t.getAttribute(h.ATTR_CAPACITY),voNew:t.getAttribute(h.ATTR_VO_NEW),voZero:t.getAttribute(h.ATTR_VO_ZERO)}),g=t=>(0,o.default)(t.descriptor)&&(0,o.default)(t.vertexShader)&&(0,o.default)(t.fragmentShader)&&(0,o.default)(t.primitive)&&(0,u.default)(t.capacity),m=t=>{if(!t.parentScene)return;const e=b(t);g(e)&&(t.spriteGroup=new i.default(t.resourceLibrary,t.textureLibrary,e),t._resolvePromise(t.spriteGroup),delete t._resolvePromise)},_=(t,e)=>{const{spriteGroup:r}=t;if(!r)return;const n=(0,s.default)(e);n&&"object"==typeof n&&(t.textureMap={},Object.keys(n).forEach(e=>{const i=n[e],s=t.blitpunkCanvas.querySelector(i);t.textureMap[e]=s.textureId,r.setTexture(e,s.textureId)}))};class y extends HTMLElement{static get observedAttributes(){return[h.ATTR_BLEND_MODE,h.ATTR_CAPACITY,h.ATTR_DESCRIPTOR,h.ATTR_FRAGMENT_SHADER,h.ATTR_PRIMITIVE,h.ATTR_TEXTURE_MAP,h.ATTR_VERTEX_SHADER]}constructor(t){const e=super(t);return e.spriteGroupPromise=new Promise(t=>{e._resolvePromise=t}),d(e)}get blitpunkNodeName(){return h.NODE_NAME_SPRITE_GROUP}renderFrame(t){this.spriteGroup&&this.spriteGroup.renderFrame(t)}debug(){console.log(this.spriteGroup),this.textureMap&&console.log(h.ATTR_TEXTURE_MAP,this.textureMap)}connectedCallback(){(0,c.default)(this),this.textureLibrary=this.parentSceneElement.textureLibrary,this.resourceLibrary=this.parentSceneElement.resourceLibrary,m(this),_(this,this.getAttribute(h.ATTR_TEXTURE_MAP)),(0,f.default)(this,h.ATTR_BLEND_MODE)}disconnectedCallback(){this.textureMap=null,this.spriteGroup=null,this.textureLibrary=null,this.resourceLibrary=null,(0,l.default)(this)}attributeChangedCallback(t,e,r){switch(t){case h.ATTR_TEXTURE_MAP:_(this,r);break;case h.ATTR_BLEND_MODE:(0,f.default)(this,t);break;default:this.spriteGroup||m(this)}}}e.default=y},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(126)),s=n(r(127)),a=n(r(128)),o=n(r(129)),u=n(r(133));const c=r(135),l=(t,e)=>{if("function"==typeof e){const r=t.createVO();return e(r),r}return e};class f{constructor(t,e,r){this.resourceLibrary=t,this.textureLibrary=e,this.descriptor=t.findDescriptor(r.descriptor),this.voPool=new u.default(this.descriptor,Object.assign(c(r,["capacity","usage","maxAllocVOSize","voArray"]),{voNew:l(this.descriptor,r.voNew),voZero:l(this.descriptor,r.voZero)})),this.voPoolShaderAttribs=new o.default(this.voPool),this.indices=r.indices||i.default.Generate(this.voPool.capacity,[0,1,2,0,2,3],4),this.shaderProgram=new s.default(t.findVertexShader(r.vertexShader),t.findFragmentShader(r.fragmentShader)),this.primitive=r.primitive,this.textures=Object.assign({},r.textures),this.shaderTextureGroup=null}get capacity(){return this.voPool.capacity}get usedCount(){return this.voPool.usedCount}get availableCount(){return this.voPool.availableCount}setTexture(t,e){this.textures[t]!==e&&(this.textures[t]=e,this.shaderTextureGroup=null)}loadTextureAtlas(t,e){return this.textures[t]=e,this.shaderTextureGroup=null,this.textureLibrary.loadTextureAtlas(e)}getTextureAtlas(t){return this.textureLibrary.getTextureAtlas(this.textures[t])}createSprite(t,e,r){const n=this.voPool.alloc(1);if(null!=t){const i=e||t.width,s=r||t.height;n.setSize(i,s),n.setTexCoordsByTexture(t)}return n}renderFrame(t){null==this.shaderTextureGroup&&(this.shaderTextureGroup=new a.default(this.textureLibrary,this.textures)),this.shaderTextureGroup.whenLoaded(e=>{const{shaderContext:r}=t;r.pushVar(e),r.pushVar(this.voPoolShaderAttribs),t.useShaderProgram(this.shaderProgram),t.drawIndexed(this.primitive,this.indices)})}}e.default=f},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(6)),s=n(r(34));class a{constructor(t,e=1){this.resourceRef=new i.default(this,{target:s.default.ELEMENT_ARRAY_BUFFER,usage:"static"}),this.objectCount=t,this.itemCount=e,this.length=t*e,this.array=new Uint16Array(this.length),this.resourceRef.hints.typedArray=this.array}static Generate(t,e,r=4,n=0){const i=new a(t,e.length);for(let s=0;s<t;++s)for(let t=0;t<e.length;++t)i.array[s*i.itemCount+t]=e[t]+(s+n)*r;return i}}e.default=a},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(4));class i{constructor(t,e){this.id=(0,n.default)(),this.vertexShader=t,this.fragmentShader=e}}e.default=i},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(17)),s=n(r(33));class a{constructor(t,e){this.shaderLibrary=t,this.waitFor=Object.keys(e).map(t=>({shaderVarKey:t,textureId:e[t],isLoaded:!1})),this.shaderVarGroup=new i.default([]),this.shaderVarStore=new Map}get isLoaded(){return 0===this.waitFor.length&&this.shaderVarGroup.shaderVars.length>0}whenLoaded(t){this.isLoaded?t(this.shaderVarGroup):(this.waitFor.forEach(t=>{if(!t.isLoaded){const e=this.shaderLibrary.states.get(t.textureId);if(void 0===e||!e.isReady)return;const r=new s.default(t.shaderVarKey);r.texture=e.texture,this.shaderVarGroup.shaderVars.push(r),t.isLoaded=!0}}),this.waitFor=this.waitFor.filter(t=>!1===t.isLoaded),this.isLoaded&&t(this.shaderVarGroup))}}e.default=a},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(17)),s=n(r(130)),a=n(r(131)),o=n(r(132));class u extends i.default{constructor(t){super([]);const e=t.descriptor;let r;Object.keys(e.attr).forEach(n=>{r?this.shaderVars.push(new o.default(n,r)):(r=new s.default(n,new a.default(n,e,t)),this.shaderVars.push(r))})}get bufferSource(){return this.shaderVars[0].value.bufferSource}get serial(){return this.shaderVars[0].serial}touch(){return this.shaderVars[0].touch()}}e.default=u},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(8));class i extends n.default{constructor(t,e){super(t,n.default.TYPE.ATTRIB,e)}}e.default=i},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(14));class i{constructor(t,e,r){this.name=t,this.descriptor=e,this.bufferSource=r}get attrDescriptor(){return this.descriptor.attr[this.name]}get resourceRef(){const{bufferSource:t}=this;return t instanceof n.default?t.resourceRef:t.voArray.resourceRef}}e.default=i},function(t,e,r){"use strict";e.__esModule=!0;class n{constructor(t,e){this.name=t,this.shaderVar=e}get type(){return this.shaderVar.type}get value(){return this.shaderVar.value}get serial(){return this.shaderVar.serial}}e.default=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(134)),s=n(r(4)),a=n(r(14));class o{constructor(t,e){this.id=(0,s.default)(),this.descriptor=t,this.capacity=e&&e.capacity||this.descriptor.maxIndexedVOPoolSize,this.maxAllocVOSize=e&&e.maxAllocVOSize||0,this.usage=e&&e.usage||o.USAGE.DYNAMIC;let r=e&&e.voArray;if(r){if(r.usage!==this.usage)throw new Error(`VOPool usage(=${this.usage}) mismatch with given voArray(usage=${r.usage})`)}else r=t.createVOArray(this.capacity,this.usage);this.voArray=r,this.voZero=e&&e.voZero||t.createVO(),this.voNew=e&&e.voNew||t.createVO(),this.availableVOs=[],this.usedVOs=[],(0,i.default)(this,this.maxAllocVOSize)}get usedCount(){return this.usedVOs.length}get availableCount(){return this.capacity-this.usedVOs.length}get allocatedCount(){return this.availableVOs.length+this.usedVOs.length}alloc(t=1){if(t>1){const e=[];for(let r=0;r<t;++r){const t=this.alloc(1);if(void 0===t)break;e.push(t)}return e}const e=this.availableVOs.shift();return void 0===e?this.capacity-this.allocatedCount>0?((0,i.default)(this,this.maxAllocVOSize),this.alloc()):void 0:(this.usedVOs.push(e),e.voArray.copy(this.voNew.voArray),e)}free(t){if(Array.isArray(t))return void t.forEach(t=>t.free());const e=this.usedVOs.indexOf(t);if(-1===e)return;const r=this.usedVOs.length-1;if(e!==r){const n=this.usedVOs[r];t.voArray.copy(n.voArray);const i=n.voArray;n.voArray=t.voArray,t.voArray=i,this.usedVOs.splice(e,1,n)}this.usedVOs.pop(),this.availableVOs.unshift(t),t.voArray.copy(this.voZero.voArray)}}e.default=o,o.USAGE=a.default.USAGE},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e=0){const r=t.capacity-t.usedCount-t.allocatedCount,n=t.allocatedCount+(e>0&&e<r?e:r);for(let e=t.allocatedCount;e<n;e++){let r=t.voArray.subarray(e),n=t.descriptor.createVO(r);n.free=t.free.bind(t,n),t.availableVOs.push(n)}}},function(t,e,r){var n=r(136),i=r(177)(function(t,e){return null==t?{}:n(t,e)});t.exports=i},function(t,e,r){var n=r(137),i=r(172);t.exports=function(t,e){return n(t,e,function(e,r){return i(t,r)})}},function(t,e,r){var n=r(138),i=r(169),s=r(10);t.exports=function(t,e,r){for(var a=-1,o=e.length,u={};++a<o;){var c=e[a],l=n(t,c);r(l,c)&&i(u,s(c,t),l)}return u}},function(t,e,r){var n=r(10),i=r(26);t.exports=function(t,e){for(var r=0,s=(e=n(e,t)).length;null!=t&&r<s;)t=t[i(e[r++])];return r&&r==s?t:void 0}},function(t,e,r){var n=r(5),i=r(21),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(n(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!i(t))||a.test(t)||!s.test(t)||null!=e&&t in Object(e)}},function(t,e,r){var n=/^\./,i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,a=r(141)(function(t){var e=[];return n.test(t)&&e.push(""),t.replace(i,function(t,r,n,i){e.push(n?i.replace(s,"$1"):r||t)}),e});t.exports=a},function(t,e,r){var n=r(142),i=500;t.exports=function(t){var e=n(t,function(t){return r.size===i&&r.clear(),t}),r=e.cache;return e}},function(t,e,r){function n(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(s);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var a=t.apply(this,n);return r.cache=s.set(i,a)||s,a};return r.cache=new(n.Cache||i),r}var i=r(143),s="Expected a function";n.Cache=i,t.exports=n},function(t,e,r){function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}var i=r(144),s=r(164),a=r(166),o=r(167),u=r(168);n.prototype.clear=i,n.prototype.delete=s,n.prototype.get=a,n.prototype.has=o,n.prototype.set=u,t.exports=n},function(t,e,r){var n=r(145),i=r(157),s=r(163);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(s||i),string:new n}}},function(t,e,r){function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}var i=r(146),s=r(153),a=r(154),o=r(155),u=r(156);n.prototype.clear=i,n.prototype.delete=s,n.prototype.get=a,n.prototype.has=o,n.prototype.set=u,t.exports=n},function(t,e,r){var n=r(11);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(t,e,r){var n=r(148),i=r(149),s=r(25),a=r(151),o=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,f=c.toString,h=l.hasOwnProperty,d=RegExp("^"+f.call(h).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!s(t)||i(t))&&(n(t)?d:u).test(a(t))}},function(t,e,r){var n=r(22),i=r(25),s="[object AsyncFunction]",a="[object Function]",o="[object GeneratorFunction]",u="[object Proxy]";t.exports=function(t){if(!i(t))return!1;var e=n(t);return e==a||e==o||e==s||e==u}},function(t,e,r){var n=r(150),i=function(){var t=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!i&&i in t}},function(t,e,r){var n=r(20)["__core-js_shared__"];t.exports=n},function(t,e){var r=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,r){var n=r(11),i="__lodash_hash_undefined__",s=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(n){var r=e[t];return r===i?void 0:r}return s.call(e,t)?e[t]:void 0}},function(t,e,r){var n=r(11),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:i.call(e,t)}},function(t,e,r){var n=r(11),i="__lodash_hash_undefined__";t.exports=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=n&&void 0===e?i:e,this}},function(t,e,r){function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}var i=r(158),s=r(159),a=r(160),o=r(161),u=r(162);n.prototype.clear=i,n.prototype.delete=s,n.prototype.get=a,n.prototype.has=o,n.prototype.set=u,t.exports=n},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,r){var n=r(12),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,r=n(e,t);return!(r<0||(r==e.length-1?e.pop():i.call(e,r,1),--this.size,0))}},function(t,e,r){var n=r(12);t.exports=function(t){var e=this.__data__,r=n(e,t);return r<0?void 0:e[r][1]}},function(t,e,r){var n=r(12);t.exports=function(t){return n(this.__data__,t)>-1}},function(t,e,r){var n=r(12);t.exports=function(t,e){var r=this.__data__,i=n(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}},function(t,e,r){var n=r(24)(r(20),"Map");t.exports=n},function(t,e,r){var n=r(13);t.exports=function(t){var e=n(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,r){var n=r(13);t.exports=function(t){return n(this,t).get(t)}},function(t,e,r){var n=r(13);t.exports=function(t){return n(this,t).has(t)}},function(t,e,r){var n=r(13);t.exports=function(t,e){var r=n(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}},function(t,e,r){var n=r(170),i=r(10),s=r(46),a=r(25),o=r(26);t.exports=function(t,e,r,u){if(!a(t))return t;for(var c=-1,l=(e=i(e,t)).length,f=l-1,h=t;null!=h&&++c<l;){var d=o(e[c]),p=r;if(c!=f){var b=h[d];void 0===(p=u?u(b,d,h):void 0)&&(p=a(b)?b:s(e[c+1])?[]:{})}n(h,d,p),h=h[d]}return t}},function(t,e,r){var n=r(171),i=r(44),s=Object.prototype.hasOwnProperty;t.exports=function(t,e,r){var a=t[e];s.call(t,e)&&i(a,r)&&(void 0!==r||e in t)||n(t,e,r)}},function(t,e,r){var n=r(45);t.exports=function(t,e,r){"__proto__"==e&&n?n(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}},function(t,e,r){var n=r(173),i=r(174);t.exports=function(t,e){return null!=t&&i(t,e,n)}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,r){var n=r(10),i=r(47),s=r(5),a=r(46),o=r(176),u=r(26);t.exports=function(t,e,r){for(var c=-1,l=(e=n(e,t)).length,f=!1;++c<l;){var h=u(e[c]);if(!(f=null!=t&&r(t,h)))break;t=t[h]}return f||++c!=l?f:!!(l=null==t?0:t.length)&&o(l)&&a(h,l)&&(s(t)||i(t))}},function(t,e,r){var n=r(22),i=r(23),s="[object Arguments]";t.exports=function(t){return i(t)&&n(t)==s}},function(t,e){var r=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}},function(t,e,r){var n=r(178),i=r(182),s=r(184);t.exports=function(t){return s(i(t,void 0,n),t+"")}},function(t,e,r){var n=r(179);t.exports=function(t){return(null==t?0:t.length)?n(t,1):[]}},function(t,e,r){function n(t,e,r,a,o){var u=-1,c=t.length;for(r||(r=s),o||(o=[]);++u<c;){var l=t[u];e>0&&r(l)?e>1?n(l,e-1,r,a,o):i(o,l):a||(o[o.length]=l)}return o}var i=r(180),s=r(181);t.exports=n},function(t,e){t.exports=function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}},function(t,e,r){var n=r(9),i=r(47),s=r(5),a=n?n.isConcatSpreadable:void 0;t.exports=function(t){return s(t)||i(t)||!!(a&&t&&t[a])}},function(t,e,r){var n=r(183),i=Math.max;t.exports=function(t,e,r){return e=i(void 0===e?t.length-1:e,0),function(){for(var s=arguments,a=-1,o=i(s.length-e,0),u=Array(o);++a<o;)u[a]=s[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=s[a];return c[e]=r(u),n(t,this,c)}}},function(t,e){t.exports=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}},function(t,e,r){var n=r(185),i=r(188)(n);t.exports=i},function(t,e,r){var n=r(186),i=r(45),s=r(187),a=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:n(e),writable:!0})}:s;t.exports=a},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){t.exports=function(t){return t}},function(t,e){var r=800,n=16,i=Date.now;t.exports=function(t){var e=0,s=0;return function(){var a=i(),o=n-(a-s);if(s=a,o>0){if(++e>=r)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){if(!t)return;const e=(0,n.default)(t);if(!e||"object"!=typeof e)return;const r=Object.keys(e);return t=>{r.forEach(r=>{const n=t.descriptor.attr[r];n?n.setValue(t,e[r]):"function"==typeof t[r]?t[r](e[r]):t[r]=e[r]})}};var n=function(t){return t&&t.__esModule?t:{default:t}}(r(18))},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){return"string"==typeof t&&t.length>0}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){return"number"==typeof t&&t>0}},function(t,e,r){"use strict";function n(t,e){if(null==t.blitpunk)return;if(Array.isArray(e))return void e.forEach(n.bind(null,t));const r=t.getAttribute(e);null!=r&&t.blitpunk.componentRegistry.createOrUpdateComponent(t.entity,e,r)}e.__esModule=!0,e.default=n},function(t,e,r){var n=r(194);"string"==typeof n&&(n=[[t.i,n,""]]);var i={};i.transform=void 0;r(196)(n,i);n.locals&&(t.exports=n.locals)},function(t,e,r){(t.exports=r(195)(void 0)).push([t.i,"blitpunk-canvas {\n  display: inline-block;\n  font-size: 0;\n  margin: 0;\n  padding: 0; }\n  blitpunk-canvas > canvas {\n    border: 0;\n    margin: 0;\n    overflow: hidden;\n    padding: 0;\n    -ms-touch-action: none;\n    touch-action: none;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none; }\n\nblitpunk-scene,\nblitpunk-texture-atlas,\nblitpunk-sprite-group {\n  display: none; }\n",""])},function(t,e){function r(t,e){var r=t[1]||"",i=t[3];if(!i)return r;if(e&&"function"==typeof btoa){var s=n(i),a=i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"});return[r].concat(a).concat([s]).join("\n")}return[r].join("\n")}function n(t){return"/*# "+("sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t)))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=r(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},i=0;i<this.length;i++){var s=this[i][0];"number"==typeof s&&(n[s]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),e.push(a))}},e}},function(t,e,r){function n(t,e){for(var r=0;r<t.length;r++){var n=t[r],i=p[n.id];if(i){i.refs++;for(a=0;a<i.parts.length;a++)i.parts[a](n.parts[a]);for(;a<n.parts.length;a++)i.parts.push(l(n.parts[a],e))}else{for(var s=[],a=0;a<n.parts.length;a++)s.push(l(n.parts[a],e));p[n.id]={id:n.id,refs:1,parts:s}}}}function i(t,e){for(var r=[],n={},i=0;i<t.length;i++){var s=t[i],a=e.base?s[0]+e.base:s[0],o={css:s[1],media:s[2],sourceMap:s[3]};n[a]?n[a].parts.push(o):r.push(n[a]={id:a,parts:[o]})}return r}function s(t,e){var r=g(t.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=y[y.length-1];if("top"===t.insertAt)n?n.nextSibling?r.insertBefore(e,n.nextSibling):r.appendChild(e):r.insertBefore(e,r.firstChild),y.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(e)}}function a(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=y.indexOf(t);e>=0&&y.splice(e,1)}function o(t){var e=document.createElement("style");return t.attrs.type="text/css",c(e,t.attrs),s(t,e),e}function u(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",c(e,t.attrs),s(t,e),e}function c(t,e){Object.keys(e).forEach(function(r){t.setAttribute(r,e[r])})}function l(t,e){var r,n,i,s;if(e.transform&&t.css){if(!(s=e.transform(t.css)))return function(){};t.css=s}if(e.singleton){var c=_++;r=m||(m=o(e)),n=f.bind(null,r,c,!1),i=f.bind(null,r,c,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=u(e),n=d.bind(null,r,e),i=function(){a(r),r.href&&URL.revokeObjectURL(r.href)}):(r=o(e),n=h.bind(null,r),i=function(){a(r)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else i()}}function f(t,e,r,n){var i=r?"":n.css;if(t.styleSheet)t.styleSheet.cssText=v(e,i);else{var s=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(s,a[e]):t.appendChild(s)}}function h(t,e){var r=e.css,n=e.media;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}function d(t,e,r){var n=r.css,i=r.sourceMap,s=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||s)&&(n=M(n)),i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([n],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(a),o&&URL.revokeObjectURL(o)}var p={},b=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),g=function(t){var e={};return function(r){return void 0===e[r]&&(e[r]=t.call(this,r)),e[r]}}(function(t){return document.querySelector(t)}),m=null,_=0,y=[],M=r(197);t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||(e.singleton=b()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var r=i(t,e);return n(r,e),function(t){for(var s=[],a=0;a<r.length;a++){var o=r[a];(u=p[o.id]).refs--,s.push(u)}t&&n(i(t,e),e);for(a=0;a<s.length;a++){var u=s[a];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete p[u.id]}}}};var v=function(){var t=[];return function(e,r){return t[e]=r,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var r=e.protocol+"//"+e.host,n=r+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return t;var s;return s=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:n+i.replace(/^\.\//,""),"url("+JSON.stringify(s)+")"})}}])});

/***/ })

});